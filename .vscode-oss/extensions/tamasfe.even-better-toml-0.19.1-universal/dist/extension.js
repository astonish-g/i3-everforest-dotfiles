"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var Rs=require("vscode"),He=require("./_commonjsHelpers.js"),wc=require("child_process"),bc=require("fs"),Dc=require("path"),Sc=require("util"),Rc=require("os"),Tc=require("crypto"),Pc=require("net");function Tt(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}function Ec(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if(n!=="default"){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,Object.freeze(t)}var ve=Ec(Rs),he=Tt(Rs),Ts=Tt(wc),fr=Tt(bc),Vn=Tt(Dc),kc=Tt(Sc),Fc=Tt(Rc),Oc=Tt(Tc),Ic=Tt(Pc);let hr;function Jt(){return hr||(hr=ve.window.createOutputChannel("Even Better TOML")),hr}async function Nc(e,t){let n;switch(e.kind){case"info":n=await ve.window.showInformationMessage(e.message,"Show Details");case"warn":n=await ve.window.showWarningMessage(e.message,"Show Details");case"error":n=await ve.window.showErrorMessage(e.message,"Show Details")}n&&t.outputChannel.show()}function qc(e,t){e.subscriptions.push(ve.commands.registerTextEditorCommand("evenBetterToml.copyAsJson",async n=>{var i,r;const o=n?.document;if(!o||n.selection.isEmpty)return;const s=o.getText(n.selection);if(s.trim().length===0)return;const a=await t.sendRequest("taplo/convertToJson",{text:s}),c=Jt();if((r=(i=a.error)==null?void 0:i.length)!=null&&r){c.appendLine(`Failed to convert TOML to JSON: ${a.error}`),await ve.window.showErrorMessage("Copying has failed!","Show Details")&&c.show();return}try{if(!a.text){c.appendLine("The response shouldn't be empty, but it is."),await ve.window.showErrorMessage("Copying has failed!","Show Details")&&c.show();return}await ve.env.clipboard.writeText(a.text)}catch(u){c.appendLine(`Couldn't write to clipboard: ${u}`),await ve.window.showErrorMessage("Copying has failed!","Show Details")&&c.show();return}await ve.window.showInformationMessage("JSON copied!")}),ve.commands.registerTextEditorCommand("evenBetterToml.copyAsToml",async n=>{var i,r;const o=n?.document;if(!o||n.selection.isEmpty)return;const s=o.getText(n.selection);if(s.trim().length===0)return;const a=await t.sendRequest("taplo/convertToToml",{text:s}),c=Jt();if((r=(i=a.error)==null?void 0:i.length)!=null&&r){c.appendLine(`Failed to convert JSON to TOML: ${a.error}`),await ve.window.showErrorMessage("Copying has failed!","Show Details")&&c.show();return}try{if(!a.text){c.appendLine("The response shouldn't be empty, but it is."),await ve.window.showErrorMessage("Copying has failed!","Show Details")&&c.show();return}await ve.env.clipboard.writeText(a.text)}catch(u){c.appendLine(`Couldn't write to clipboard: ${u}`),await ve.window.showErrorMessage("Copying has failed!","Show Details")&&c.show();return}await ve.window.showInformationMessage("TOML copied!")}),ve.commands.registerTextEditorCommand("evenBetterToml.pasteAsJson",async n=>{var i,r;const o=Jt();let s;try{s=await ve.env.clipboard.readText()}catch(c){o.appendLine(`Failed to read from clipboard:${c}`),await ve.window.showErrorMessage("Paste from clipboard has failed!","Show Details")&&o.show();return}const a=await t.sendRequest("taplo/convertToJson",{text:s});if((r=(i=a.error)==null?void 0:i.length)!=null&&r){o.appendLine(`Failed to convert to JSON: ${a.error}`),await ve.window.showErrorMessage("Pasting JSON has failed!","Show Details")&&o.show();return}n.edit(c=>{c.replace(n.selection,a.text)})}),ve.commands.registerTextEditorCommand("evenBetterToml.pasteAsToml",async n=>{var i,r;const o=Jt();let s;try{s=await ve.env.clipboard.readText()}catch(c){o.appendLine(`Failed to read from clipboard:${c}`),await ve.window.showErrorMessage("Paste from clipboard has failed!","Show Details")&&o.show();return}const a=await t.sendRequest("taplo/convertToToml",{text:s});if((r=(i=a.error)==null?void 0:i.length)!=null&&r){o.appendLine(`Failed to convert to TOML: ${a.error}`),await ve.window.showErrorMessage("Paste from clipboard has failed!","Show Details")&&o.show();return}n.edit(c=>{c.replace(n.selection,a.text)})}))}function Mc(e,t){e.subscriptions.push(ve.commands.registerTextEditorCommand("evenBetterToml.selectSchema",async n=>{if(!n)return;const i=await t.sendRequest("taplo/listSchemas",{documentUri:n.document.uri.toString()}),r=await t.sendRequest("taplo/associatedSchema",{documentUri:n.document.uri.toString()}),o=await ve.window.showQuickPick(i.schemas.map(s=>{var a,c,u;return{label:(c=(a=s.meta)==null?void 0:a.name)!=null?c:s.url,description:Lc(s.meta),detail:$c(s.url),picked:((u=r.schema)==null?void 0:u.url)===s.url,url:s.url,meta:s.meta}}));!o||t.sendNotification("taplo/associateSchema",{documentUri:n.document.uri.toString(),schemaUri:o.url,rule:{url:n.document.uri.toString()},meta:o.meta})}))}function Lc(e){if(typeof e?.description=="string")return e.description}function $c(e,t){return`${e}`}function Ac(e,t){qc(e,t),Mc(e,t)}var gr={exports:{}},Ps={},Pe={};Object.defineProperty(Pe,"__esModule",{value:!0}),Pe.asPromise=Pe.thenable=Pe.typedArray=Pe.stringArray=Pe.array=Pe.func=Pe.error=Pe.number=Pe.string=Pe.boolean=void 0;function jc(e){return e===!0||e===!1}Pe.boolean=jc;function Es(e){return typeof e=="string"||e instanceof String}Pe.string=Es;function Hc(e){return typeof e=="number"||e instanceof Number}Pe.number=Hc;function Wc(e){return e instanceof Error}Pe.error=Wc;function ks(e){return typeof e=="function"}Pe.func=ks;function Fs(e){return Array.isArray(e)}Pe.array=Fs;function Uc(e){return Fs(e)&&e.every(t=>Es(t))}Pe.stringArray=Uc;function xc(e,t){return Array.isArray(e)&&e.every(t)}Pe.typedArray=xc;function Os(e){return e&&ks(e.then)}Pe.thenable=Os;function Kc(e){return e instanceof Promise?e:Os(e)?new Promise((t,n)=>{e.then(i=>t(i),i=>n(i))}):Promise.resolve(e)}Pe.asPromise=Kc;var pr={},ge={},mr={exports:{}},qt={},yr={},Xn={},vr={},xe={};Object.defineProperty(xe,"__esModule",{value:!0}),xe.stringArray=xe.array=xe.func=xe.error=xe.number=xe.string=xe.boolean=void 0;function zc(e){return e===!0||e===!1}xe.boolean=zc;function Is(e){return typeof e=="string"||e instanceof String}xe.string=Is;function Gc(e){return typeof e=="number"||e instanceof Number}xe.number=Gc;function Bc(e){return e instanceof Error}xe.error=Bc;function Vc(e){return typeof e=="function"}xe.func=Vc;function Ns(e){return Array.isArray(e)}xe.array=Ns;function Xc(e){return Ns(e)&&e.every(t=>Is(t))}xe.stringArray=Xc,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Message=e.NotificationType9=e.NotificationType8=e.NotificationType7=e.NotificationType6=e.NotificationType5=e.NotificationType4=e.NotificationType3=e.NotificationType2=e.NotificationType1=e.NotificationType0=e.NotificationType=e.RequestType9=e.RequestType8=e.RequestType7=e.RequestType6=e.RequestType5=e.RequestType4=e.RequestType3=e.RequestType2=e.RequestType1=e.RequestType=e.RequestType0=e.AbstractMessageSignature=e.ParameterStructures=e.ResponseError=e.ErrorCodes=void 0;const t=xe;var n;(function(d){d.ParseError=-32700,d.InvalidRequest=-32600,d.MethodNotFound=-32601,d.InvalidParams=-32602,d.InternalError=-32603,d.jsonrpcReservedErrorRangeStart=-32099,d.serverErrorStart=-32099,d.MessageWriteError=-32099,d.MessageReadError=-32098,d.PendingResponseRejected=-32097,d.ConnectionInactive=-32096,d.ServerNotInitialized=-32002,d.UnknownErrorCode=-32001,d.jsonrpcReservedErrorRangeEnd=-32e3,d.serverErrorEnd=-32e3})(n=e.ErrorCodes||(e.ErrorCodes={}));class i extends Error{constructor(v,R,k){super(R),this.code=t.number(v)?v:n.UnknownErrorCode,this.data=k,Object.setPrototypeOf(this,i.prototype)}toJson(){const v={code:this.code,message:this.message};return this.data!==void 0&&(v.data=this.data),v}}e.ResponseError=i;class r{constructor(v){this.kind=v}static is(v){return v===r.auto||v===r.byName||v===r.byPosition}toString(){return this.kind}}e.ParameterStructures=r,r.auto=new r("auto"),r.byPosition=new r("byPosition"),r.byName=new r("byName");class o{constructor(v,R){this.method=v,this.numberOfParams=R}get parameterStructures(){return r.auto}}e.AbstractMessageSignature=o;class s extends o{constructor(v){super(v,0)}}e.RequestType0=s;class a extends o{constructor(v,R=r.auto){super(v,1),this._parameterStructures=R}get parameterStructures(){return this._parameterStructures}}e.RequestType=a;class c extends o{constructor(v,R=r.auto){super(v,1),this._parameterStructures=R}get parameterStructures(){return this._parameterStructures}}e.RequestType1=c;class u extends o{constructor(v){super(v,2)}}e.RequestType2=u;class p extends o{constructor(v){super(v,3)}}e.RequestType3=p;class y extends o{constructor(v){super(v,4)}}e.RequestType4=y;class f extends o{constructor(v){super(v,5)}}e.RequestType5=f;class g extends o{constructor(v){super(v,6)}}e.RequestType6=g;class h extends o{constructor(v){super(v,7)}}e.RequestType7=h;class N extends o{constructor(v){super(v,8)}}e.RequestType8=N;class j extends o{constructor(v){super(v,9)}}e.RequestType9=j;class X extends o{constructor(v,R=r.auto){super(v,1),this._parameterStructures=R}get parameterStructures(){return this._parameterStructures}}e.NotificationType=X;class G extends o{constructor(v){super(v,0)}}e.NotificationType0=G;class S extends o{constructor(v,R=r.auto){super(v,1),this._parameterStructures=R}get parameterStructures(){return this._parameterStructures}}e.NotificationType1=S;class C extends o{constructor(v){super(v,2)}}e.NotificationType2=C;class M extends o{constructor(v){super(v,3)}}e.NotificationType3=M;class W extends o{constructor(v){super(v,4)}}e.NotificationType4=W;class I extends o{constructor(v){super(v,5)}}e.NotificationType5=I;class P extends o{constructor(v){super(v,6)}}e.NotificationType6=P;class L extends o{constructor(v){super(v,7)}}e.NotificationType7=L;class V extends o{constructor(v){super(v,8)}}e.NotificationType8=V;class D extends o{constructor(v){super(v,9)}}e.NotificationType9=D,function(d){function v(F){const q=F;return q&&t.string(q.method)&&(t.string(q.id)||t.number(q.id))}d.isRequest=v;function R(F){const q=F;return q&&t.string(q.method)&&F.id===void 0}d.isNotification=R;function k(F){const q=F;return q&&(q.result!==void 0||!!q.error)&&(t.string(q.id)||t.number(q.id)||q.id===null)}d.isResponse=k}(e.Message||(e.Message={}))}(vr);var Cr={};(function(e){var t;Object.defineProperty(e,"__esModule",{value:!0}),e.LRUCache=e.LinkedMap=e.Touch=void 0;var n;(function(o){o.None=0,o.First=1,o.AsOld=o.First,o.Last=2,o.AsNew=o.Last})(n=e.Touch||(e.Touch={}));class i{constructor(){this[t]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(s){return this._map.has(s)}get(s,a=n.None){const c=this._map.get(s);if(!!c)return a!==n.None&&this.touch(c,a),c.value}set(s,a,c=n.None){let u=this._map.get(s);if(u)u.value=a,c!==n.None&&this.touch(u,c);else{switch(u={key:s,value:a,next:void 0,previous:void 0},c){case n.None:this.addItemLast(u);break;case n.First:this.addItemFirst(u);break;case n.Last:this.addItemLast(u);break;default:this.addItemLast(u);break}this._map.set(s,u),this._size++}return this}delete(s){return!!this.remove(s)}remove(s){const a=this._map.get(s);if(!!a)return this._map.delete(s),this.removeItem(a),this._size--,a.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");const s=this._head;return this._map.delete(s.key),this.removeItem(s),this._size--,s.value}forEach(s,a){const c=this._state;let u=this._head;for(;u;){if(a?s.bind(a)(u.value,u.key,this):s(u.value,u.key,this),this._state!==c)throw new Error("LinkedMap got modified during iteration.");u=u.next}}keys(){const s=this._state;let a=this._head;const c={[Symbol.iterator]:()=>c,next:()=>{if(this._state!==s)throw new Error("LinkedMap got modified during iteration.");if(a){const u={value:a.key,done:!1};return a=a.next,u}else return{value:void 0,done:!0}}};return c}values(){const s=this._state;let a=this._head;const c={[Symbol.iterator]:()=>c,next:()=>{if(this._state!==s)throw new Error("LinkedMap got modified during iteration.");if(a){const u={value:a.value,done:!1};return a=a.next,u}else return{value:void 0,done:!0}}};return c}entries(){const s=this._state;let a=this._head;const c={[Symbol.iterator]:()=>c,next:()=>{if(this._state!==s)throw new Error("LinkedMap got modified during iteration.");if(a){const u={value:[a.key,a.value],done:!1};return a=a.next,u}else return{value:void 0,done:!0}}};return c}[(t=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(s){if(s>=this.size)return;if(s===0){this.clear();return}let a=this._head,c=this.size;for(;a&&c>s;)this._map.delete(a.key),a=a.next,c--;this._head=a,this._size=c,a&&(a.previous=void 0),this._state++}addItemFirst(s){if(!this._head&&!this._tail)this._tail=s;else if(this._head)s.next=this._head,this._head.previous=s;else throw new Error("Invalid list");this._head=s,this._state++}addItemLast(s){if(!this._head&&!this._tail)this._head=s;else if(this._tail)s.previous=this._tail,this._tail.next=s;else throw new Error("Invalid list");this._tail=s,this._state++}removeItem(s){if(s===this._head&&s===this._tail)this._head=void 0,this._tail=void 0;else if(s===this._head){if(!s.next)throw new Error("Invalid list");s.next.previous=void 0,this._head=s.next}else if(s===this._tail){if(!s.previous)throw new Error("Invalid list");s.previous.next=void 0,this._tail=s.previous}else{const a=s.next,c=s.previous;if(!a||!c)throw new Error("Invalid list");a.previous=c,c.next=a}s.next=void 0,s.previous=void 0,this._state++}touch(s,a){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(a!==n.First&&a!==n.Last)){if(a===n.First){if(s===this._head)return;const c=s.next,u=s.previous;s===this._tail?(u.next=void 0,this._tail=u):(c.previous=u,u.next=c),s.previous=void 0,s.next=this._head,this._head.previous=s,this._head=s,this._state++}else if(a===n.Last){if(s===this._tail)return;const c=s.next,u=s.previous;s===this._head?(c.previous=void 0,this._head=c):(c.previous=u,u.next=c),s.next=void 0,s.previous=this._tail,this._tail.next=s,this._tail=s,this._state++}}}toJSON(){const s=[];return this.forEach((a,c)=>{s.push([c,a])}),s}fromJSON(s){this.clear();for(const[a,c]of s)this.set(a,c)}}e.LinkedMap=i;class r extends i{constructor(s,a=1){super(),this._limit=s,this._ratio=Math.min(Math.max(0,a),1)}get limit(){return this._limit}set limit(s){this._limit=s,this.checkTrim()}get ratio(){return this._ratio}set ratio(s){this._ratio=Math.min(Math.max(0,s),1),this.checkTrim()}get(s,a=n.AsNew){return super.get(s,a)}peek(s){return super.get(s,n.None)}set(s,a){return super.set(s,a,n.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}}e.LRUCache=r})(Cr);var qs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Disposable=void 0,function(t){function n(i){return{dispose:i}}t.create=n}(e.Disposable||(e.Disposable={}))})(qs);var Qt={},vt={};Object.defineProperty(vt,"__esModule",{value:!0});let _r;function wr(){if(_r===void 0)throw new Error("No runtime abstraction layer installed");return _r}(function(e){function t(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");_r=n}e.install=t})(wr||(wr={})),vt.default=wr,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Emitter=e.Event=void 0;const t=vt;(function(r){const o={dispose(){}};r.None=function(){return o}})(e.Event||(e.Event={}));class n{add(o,s=null,a){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(o),this._contexts.push(s),Array.isArray(a)&&a.push({dispose:()=>this.remove(o,s)})}remove(o,s=null){if(!this._callbacks)return;let a=!1;for(let c=0,u=this._callbacks.length;c<u;c++)if(this._callbacks[c]===o)if(this._contexts[c]===s){this._callbacks.splice(c,1),this._contexts.splice(c,1);return}else a=!0;if(a)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...o){if(!this._callbacks)return[];const s=[],a=this._callbacks.slice(0),c=this._contexts.slice(0);for(let u=0,p=a.length;u<p;u++)try{s.push(a[u].apply(c[u],o))}catch(y){(0,t.default)().console.error(y)}return s}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}}class i{constructor(o){this._options=o}get event(){return this._event||(this._event=(o,s,a)=>{this._callbacks||(this._callbacks=new n),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(o,s);const c={dispose:()=>{!this._callbacks||(this._callbacks.remove(o,s),c.dispose=i._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))}};return Array.isArray(a)&&a.push(c),c}),this._event}fire(o){this._callbacks&&this._callbacks.invoke.call(this._callbacks,o)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}}e.Emitter=i,i._noop=function(){}}(Qt);var Jn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CancellationTokenSource=e.CancellationToken=void 0;const t=vt,n=xe,i=Qt;var r;(function(c){c.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:i.Event.None}),c.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:i.Event.None});function u(p){const y=p;return y&&(y===c.None||y===c.Cancelled||n.boolean(y.isCancellationRequested)&&!!y.onCancellationRequested)}c.is=u})(r=e.CancellationToken||(e.CancellationToken={}));const o=Object.freeze(function(c,u){const p=(0,t.default)().timer.setTimeout(c.bind(u),0);return{dispose(){p.dispose()}}});class s{constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?o:(this._emitter||(this._emitter=new i.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}}class a{get token(){return this._token||(this._token=new s),this._token}cancel(){this._token?this._token.cancel():this._token=r.Cancelled}dispose(){this._token?this._token instanceof s&&this._token.dispose():this._token=r.None}}e.CancellationTokenSource=a})(Jn);var Yt={};Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.SharedArrayReceiverStrategy=Yt.SharedArraySenderStrategy=void 0;const Jc=Jn;var Cn;(function(e){e.Continue=0,e.Cancelled=1})(Cn||(Cn={}));class Qc{constructor(){this.buffers=new Map}enableCancellation(t){if(t.id===null)return;const n=new SharedArrayBuffer(4),i=new Int32Array(n,0,1);i[0]=Cn.Continue,this.buffers.set(t.id,n),t.$cancellationData=n}async sendCancellation(t,n){const i=this.buffers.get(n);if(i===void 0)return;const r=new Int32Array(i,0,1);Atomics.store(r,0,Cn.Cancelled)}cleanup(t){this.buffers.delete(t)}dispose(){this.buffers.clear()}}Yt.SharedArraySenderStrategy=Qc;class Yc{constructor(t){this.data=new Int32Array(t,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===Cn.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}}class Zc{constructor(t){this.token=new Yc(t)}cancel(){}dispose(){}}class eu{constructor(){this.kind="request"}createCancellationTokenSource(t){const n=t.$cancellationData;return n===void 0?new Jc.CancellationTokenSource:new Zc(n)}}Yt.SharedArrayReceiverStrategy=eu;var Ms={},_n={};Object.defineProperty(_n,"__esModule",{value:!0}),_n.Semaphore=void 0;const tu=vt;class nu{constructor(t=1){if(t<=0)throw new Error("Capacity must be greater than 0");this._capacity=t,this._active=0,this._waiting=[]}lock(t){return new Promise((n,i)=>{this._waiting.push({thunk:t,resolve:n,reject:i}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,tu.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;const t=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const n=t.thunk();n instanceof Promise?n.then(i=>{this._active--,t.resolve(i),this.runNext()},i=>{this._active--,t.reject(i),this.runNext()}):(this._active--,t.resolve(n),this.runNext())}catch(n){this._active--,t.reject(n),this.runNext()}}}_n.Semaphore=nu,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ReadableStreamMessageReader=e.AbstractMessageReader=e.MessageReader=void 0;const t=vt,n=xe,i=Qt,r=_n;(function(c){function u(p){let y=p;return y&&n.func(y.listen)&&n.func(y.dispose)&&n.func(y.onError)&&n.func(y.onClose)&&n.func(y.onPartialMessage)}c.is=u})(e.MessageReader||(e.MessageReader={}));class o{constructor(){this.errorEmitter=new i.Emitter,this.closeEmitter=new i.Emitter,this.partialMessageEmitter=new i.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(u){this.errorEmitter.fire(this.asError(u))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(u){this.partialMessageEmitter.fire(u)}asError(u){return u instanceof Error?u:new Error(`Reader received error. Reason: ${n.string(u.message)?u.message:"unknown"}`)}}e.AbstractMessageReader=o;var s;(function(c){function u(p){let y,f;const g=new Map;let h;const N=new Map;if(p===void 0||typeof p=="string")y=p??"utf-8";else{if(y=p.charset??"utf-8",p.contentDecoder!==void 0&&(f=p.contentDecoder,g.set(f.name,f)),p.contentDecoders!==void 0)for(const j of p.contentDecoders)g.set(j.name,j);if(p.contentTypeDecoder!==void 0&&(h=p.contentTypeDecoder,N.set(h.name,h)),p.contentTypeDecoders!==void 0)for(const j of p.contentTypeDecoders)N.set(j.name,j)}return h===void 0&&(h=(0,t.default)().applicationJson.decoder,N.set(h.name,h)),{charset:y,contentDecoder:f,contentDecoders:g,contentTypeDecoder:h,contentTypeDecoders:N}}c.fromOptions=u})(s||(s={}));class a extends o{constructor(u,p){super(),this.readable=u,this.options=s.fromOptions(p),this.buffer=(0,t.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new r.Semaphore(1)}set partialMessageTimeout(u){this._partialMessageTimeout=u}get partialMessageTimeout(){return this._partialMessageTimeout}listen(u){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=u;const p=this.readable.onData(y=>{this.onData(y)});return this.readable.onError(y=>this.fireError(y)),this.readable.onClose(()=>this.fireClose()),p}onData(u){for(this.buffer.append(u);;){if(this.nextMessageLength===-1){const y=this.buffer.tryReadHeaders(!0);if(!y)return;const f=y.get("content-length");if(!f){this.fireError(new Error("Header must provide a Content-Length property."));return}const g=parseInt(f);if(isNaN(g)){this.fireError(new Error("Content-Length value must be a number."));return}this.nextMessageLength=g}const p=this.buffer.tryReadBody(this.nextMessageLength);if(p===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{const y=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(p):p,f=await this.options.contentTypeDecoder.decode(y,this.options);this.callback(f)}).catch(y=>{this.fireError(y)})}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,t.default)().timer.setTimeout((u,p)=>{this.partialMessageTimer=void 0,u===this.messageToken&&(this.firePartialMessage({messageToken:u,waitingTime:p}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}}e.ReadableStreamMessageReader=a}(Ms);var Ls={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WriteableStreamMessageWriter=e.AbstractMessageWriter=e.MessageWriter=void 0;const t=vt,n=xe,i=_n,r=Qt,o="Content-Length: ",s=`\r
`;(function(p){function y(f){let g=f;return g&&n.func(g.dispose)&&n.func(g.onClose)&&n.func(g.onError)&&n.func(g.write)}p.is=y})(e.MessageWriter||(e.MessageWriter={}));class a{constructor(){this.errorEmitter=new r.Emitter,this.closeEmitter=new r.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(y,f,g){this.errorEmitter.fire([this.asError(y),f,g])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(y){return y instanceof Error?y:new Error(`Writer received error. Reason: ${n.string(y.message)?y.message:"unknown"}`)}}e.AbstractMessageWriter=a;var c;(function(p){function y(f){return f===void 0||typeof f=="string"?{charset:f??"utf-8",contentTypeEncoder:(0,t.default)().applicationJson.encoder}:{charset:f.charset??"utf-8",contentEncoder:f.contentEncoder,contentTypeEncoder:f.contentTypeEncoder??(0,t.default)().applicationJson.encoder}}p.fromOptions=y})(c||(c={}));class u extends a{constructor(y,f){super(),this.writable=y,this.options=c.fromOptions(f),this.errorCount=0,this.writeSemaphore=new i.Semaphore(1),this.writable.onError(g=>this.fireError(g)),this.writable.onClose(()=>this.fireClose())}async write(y){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(y,this.options).then(g=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(g):g).then(g=>{const h=[];return h.push(o,g.byteLength.toString(),s),h.push(s),this.doWrite(y,h,g)},g=>{throw this.fireError(g),g}))}async doWrite(y,f,g){try{return await this.writable.write(f.join(""),"ascii"),this.writable.write(g)}catch(h){return this.handleError(h,y),Promise.reject(h)}}handleError(y,f){this.errorCount++,this.fireError(y,f,this.errorCount)}end(){this.writable.end()}}e.WriteableStreamMessageWriter=u})(Ls);var Qn={};Object.defineProperty(Qn,"__esModule",{value:!0}),Qn.AbstractMessageBuffer=void 0;const iu=13,ru=10,ou=`\r
`;class su{constructor(t="utf-8"){this._encoding=t,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(t){const n=typeof t=="string"?this.fromString(t,this._encoding):t;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(t=!1){if(this._chunks.length===0)return;let n=0,i=0,r=0,o=0;e:for(;i<this._chunks.length;){const u=this._chunks[i];for(r=0;r<u.length;){switch(u[r]){case iu:switch(n){case 0:n=1;break;case 2:n=3;break;default:n=0}break;case ru:switch(n){case 1:n=2;break;case 3:n=4,r++;break e;default:n=0}break;default:n=0}r++}o+=u.byteLength,i++}if(n!==4)return;const s=this._read(o+r),a=new Map,c=this.toString(s,"ascii").split(ou);if(c.length<2)return a;for(let u=0;u<c.length-2;u++){const p=c[u],y=p.indexOf(":");if(y===-1)throw new Error("Message header must separate key and value using :");const f=p.substr(0,y),g=p.substr(y+1).trim();a.set(t?f.toLowerCase():f,g)}return a}tryReadBody(t){if(!(this._totalLength<t))return this._read(t)}get numberOfBytes(){return this._totalLength}_read(t){if(t===0)return this.emptyBuffer();if(t>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===t){const o=this._chunks[0];return this._chunks.shift(),this._totalLength-=t,this.asNative(o)}if(this._chunks[0].byteLength>t){const o=this._chunks[0],s=this.asNative(o,t);return this._chunks[0]=o.slice(t),this._totalLength-=t,s}const n=this.allocNative(t);let i=0,r=0;for(;t>0;){const o=this._chunks[r];if(o.byteLength>t){const s=o.slice(0,t);n.set(s,i),i+=t,this._chunks[r]=o.slice(t),this._totalLength-=t,t-=t}else n.set(o,i),i+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,t-=o.byteLength}return n}}Qn.AbstractMessageBuffer=su;var $s={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.createMessageConnection=e.ConnectionOptions=e.MessageStrategy=e.CancellationStrategy=e.CancellationSenderStrategy=e.CancellationReceiverStrategy=e.RequestCancellationReceiverStrategy=e.IdCancellationReceiverStrategy=e.ConnectionStrategy=e.ConnectionError=e.ConnectionErrors=e.LogTraceNotification=e.SetTraceNotification=e.TraceFormat=e.TraceValues=e.Trace=e.NullLogger=e.ProgressType=e.ProgressToken=void 0;const t=vt,n=xe,i=vr,r=Cr,o=Qt,s=Jn;var a;(function(D){D.type=new i.NotificationType("$/cancelRequest")})(a||(a={}));var c;(function(D){function d(v){return typeof v=="string"||typeof v=="number"}D.is=d})(c=e.ProgressToken||(e.ProgressToken={}));var u;(function(D){D.type=new i.NotificationType("$/progress")})(u||(u={}));class p{constructor(){}}e.ProgressType=p;var y;(function(D){function d(v){return n.func(v)}D.is=d})(y||(y={})),e.NullLogger=Object.freeze({error:()=>{},warn:()=>{},info:()=>{},log:()=>{}});var f;(function(D){D[D.Off=0]="Off",D[D.Messages=1]="Messages",D[D.Compact=2]="Compact",D[D.Verbose=3]="Verbose"})(f=e.Trace||(e.Trace={})),function(D){D.Off="off",D.Messages="messages",D.Compact="compact",D.Verbose="verbose"}(e.TraceValues||(e.TraceValues={})),function(D){function d(R){if(!n.string(R))return D.Off;switch(R=R.toLowerCase(),R){case"off":return D.Off;case"messages":return D.Messages;case"compact":return D.Compact;case"verbose":return D.Verbose;default:return D.Off}}D.fromString=d;function v(R){switch(R){case D.Off:return"off";case D.Messages:return"messages";case D.Compact:return"compact";case D.Verbose:return"verbose";default:return"off"}}D.toString=v}(f=e.Trace||(e.Trace={}));var g;(function(D){D.Text="text",D.JSON="json"})(g=e.TraceFormat||(e.TraceFormat={})),function(D){function d(v){return n.string(v)?(v=v.toLowerCase(),v==="json"?D.JSON:D.Text):D.Text}D.fromString=d}(g=e.TraceFormat||(e.TraceFormat={}));var h;(function(D){D.type=new i.NotificationType("$/setTrace")})(h=e.SetTraceNotification||(e.SetTraceNotification={}));var N;(function(D){D.type=new i.NotificationType("$/logTrace")})(N=e.LogTraceNotification||(e.LogTraceNotification={}));var j;(function(D){D[D.Closed=1]="Closed",D[D.Disposed=2]="Disposed",D[D.AlreadyListening=3]="AlreadyListening"})(j=e.ConnectionErrors||(e.ConnectionErrors={}));class X extends Error{constructor(d,v){super(v),this.code=d,Object.setPrototypeOf(this,X.prototype)}}e.ConnectionError=X;var G;(function(D){function d(v){const R=v;return R&&n.func(R.cancelUndispatched)}D.is=d})(G=e.ConnectionStrategy||(e.ConnectionStrategy={}));var S;(function(D){function d(v){const R=v;return R&&(R.kind===void 0||R.kind==="id")&&n.func(R.createCancellationTokenSource)&&(R.dispose===void 0||n.func(R.dispose))}D.is=d})(S=e.IdCancellationReceiverStrategy||(e.IdCancellationReceiverStrategy={}));var C;(function(D){function d(v){const R=v;return R&&R.kind==="request"&&n.func(R.createCancellationTokenSource)&&(R.dispose===void 0||n.func(R.dispose))}D.is=d})(C=e.RequestCancellationReceiverStrategy||(e.RequestCancellationReceiverStrategy={}));var M;(function(D){D.Message=Object.freeze({createCancellationTokenSource(v){return new s.CancellationTokenSource}});function d(v){return S.is(v)||C.is(v)}D.is=d})(M=e.CancellationReceiverStrategy||(e.CancellationReceiverStrategy={}));var W;(function(D){D.Message=Object.freeze({sendCancellation(v,R){return v.sendNotification(a.type,{id:R})},cleanup(v){}});function d(v){const R=v;return R&&n.func(R.sendCancellation)&&n.func(R.cleanup)}D.is=d})(W=e.CancellationSenderStrategy||(e.CancellationSenderStrategy={}));var I;(function(D){D.Message=Object.freeze({receiver:M.Message,sender:W.Message});function d(v){const R=v;return R&&M.is(R.receiver)&&W.is(R.sender)}D.is=d})(I=e.CancellationStrategy||(e.CancellationStrategy={}));var P;(function(D){function d(v){const R=v;return R&&n.func(R.handleMessage)}D.is=d})(P=e.MessageStrategy||(e.MessageStrategy={})),function(D){function d(v){const R=v;return R&&(I.is(R.cancellationStrategy)||G.is(R.connectionStrategy)||P.is(R.messageStrategy))}D.is=d}(e.ConnectionOptions||(e.ConnectionOptions={}));var L;(function(D){D[D.New=1]="New",D[D.Listening=2]="Listening",D[D.Closed=3]="Closed",D[D.Disposed=4]="Disposed"})(L||(L={}));function V(D,d,v,R){const k=v!==void 0?v:e.NullLogger;let F=0,q=0,$=0;const x="2.0";let Z;const ee=new Map;let re;const ae=new Map,ne=new Map;let te,ce=new r.LinkedMap,se=new Map,nt=new Set,ze=new Map,Ce=f.Off,Ye=g.Text,ke,ue=L.New;const Ve=new o.Emitter,gt=new o.Emitter,mt=new o.Emitter,et=new o.Emitter,le=new o.Emitter,b=R&&R.cancellationStrategy?R.cancellationStrategy:I.Message;function E(w){if(w===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+w.toString()}function T(w){return w===null?"res-unknown-"+(++$).toString():"res-"+w.toString()}function z(){return"not-"+(++q).toString()}function K(w,U){i.Message.isRequest(U)?w.set(E(U.id),U):i.Message.isResponse(U)?w.set(T(U.id),U):w.set(z(),U)}function B(w){}function Fe(){return ue===L.Listening}function de(){return ue===L.Closed}function Ge(){return ue===L.Disposed}function Be(){(ue===L.New||ue===L.Listening)&&(ue=L.Closed,gt.fire(void 0))}function Ft(w){Ve.fire([w,void 0,void 0])}function Kt(w){Ve.fire(w)}D.onClose(Be),D.onError(Ft),d.onClose(Be),d.onError(Kt);function zt(){te||ce.size===0||(te=(0,t.default)().timer.setImmediate(()=>{te=void 0,Gt()}))}function Ot(w){i.Message.isRequest(w)?Bt(w):i.Message.isNotification(w)?Vt(w):i.Message.isResponse(w)?mn(w):It(w)}function Gt(){if(ce.size===0)return;const w=ce.shift();try{const U=R?.messageStrategy;P.is(U)?U.handleMessage(w,Ot):Ot(w)}finally{zt()}}const pn=w=>{try{if(i.Message.isNotification(w)&&w.method===a.type.method){const U=w.params.id,Q=E(U),oe=ce.get(Q);if(i.Message.isRequest(oe)){const Ie=R?.connectionStrategy,Le=Ie&&Ie.cancelUndispatched?Ie.cancelUndispatched(oe,B):void 0;if(Le&&(Le.error!==void 0||Le.result!==void 0)){ce.delete(Q),ze.delete(U),Le.id=oe.id,De(Le,w.method,Date.now()),d.write(Le).catch(()=>k.error("Sending response for canceled message failed."));return}}const Ne=ze.get(U);if(Ne!==void 0){Ne.cancel(),je(w);return}else nt.add(U)}K(ce,w)}finally{zt()}};function Bt(w){if(Ge())return;function U(_,A,J){const be={jsonrpc:x,id:w.id};_ instanceof i.ResponseError?be.error=_.toJson():be.result=_===void 0?null:_,De(be,A,J),d.write(be).catch(()=>k.error("Sending response failed."))}function Q(_,A,J){const be={jsonrpc:x,id:w.id,error:_.toJson()};De(be,A,J),d.write(be).catch(()=>k.error("Sending response failed."))}function oe(_,A,J){_===void 0&&(_=null);const be={jsonrpc:x,id:w.id,result:_};De(be,A,J),d.write(be).catch(()=>k.error("Sending response failed."))}Oe(w);const Ne=ee.get(w.method);let Ie,Le;Ne&&(Ie=Ne.type,Le=Ne.handler);const l=Date.now();if(Le||Z){const _=w.id??String(Date.now()),A=S.is(b.receiver)?b.receiver.createCancellationTokenSource(_):b.receiver.createCancellationTokenSource(w);w.id!==null&&nt.has(w.id)&&A.cancel(),w.id!==null&&ze.set(_,A);try{let J;if(Le)if(w.params===void 0){if(Ie!==void 0&&Ie.numberOfParams!==0){Q(new i.ResponseError(i.ErrorCodes.InvalidParams,`Request ${w.method} defines ${Ie.numberOfParams} params but received none.`),w.method,l);return}J=Le(A.token)}else if(Array.isArray(w.params)){if(Ie!==void 0&&Ie.parameterStructures===i.ParameterStructures.byName){Q(new i.ResponseError(i.ErrorCodes.InvalidParams,`Request ${w.method} defines parameters by name but received parameters by position`),w.method,l);return}J=Le(...w.params,A.token)}else{if(Ie!==void 0&&Ie.parameterStructures===i.ParameterStructures.byPosition){Q(new i.ResponseError(i.ErrorCodes.InvalidParams,`Request ${w.method} defines parameters by position but received parameters by name`),w.method,l);return}J=Le(w.params,A.token)}else Z&&(J=Z(w.method,w.params,A.token));const be=J;J?be.then?be.then(Se=>{ze.delete(_),U(Se,w.method,l)},Se=>{ze.delete(_),Se instanceof i.ResponseError?Q(Se,w.method,l):Se&&n.string(Se.message)?Q(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${w.method} failed with message: ${Se.message}`),w.method,l):Q(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${w.method} failed unexpectedly without providing any details.`),w.method,l)}):(ze.delete(_),U(J,w.method,l)):(ze.delete(_),oe(J,w.method,l))}catch(J){ze.delete(_),J instanceof i.ResponseError?U(J,w.method,l):J&&n.string(J.message)?Q(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${w.method} failed with message: ${J.message}`),w.method,l):Q(new i.ResponseError(i.ErrorCodes.InternalError,`Request ${w.method} failed unexpectedly without providing any details.`),w.method,l)}}else Q(new i.ResponseError(i.ErrorCodes.MethodNotFound,`Unhandled method ${w.method}`),w.method,l)}function mn(w){if(!Ge())if(w.id===null)w.error?k.error(`Received response message without id: Error is: 
${JSON.stringify(w.error,void 0,4)}`):k.error("Received response message without id. No further error information provided.");else{const U=w.id,Q=se.get(U);if(tt(w,Q),Q!==void 0){se.delete(U);try{if(w.error){const oe=w.error;Q.reject(new i.ResponseError(oe.code,oe.message,oe.data))}else if(w.result!==void 0)Q.resolve(w.result);else throw new Error("Should never happen.")}catch(oe){oe.message?k.error(`Response handler '${Q.method}' failed with message: ${oe.message}`):k.error(`Response handler '${Q.method}' failed unexpectedly.`)}}}}function Vt(w){if(Ge())return;let U,Q;if(w.method===a.type.method){const oe=w.params.id;nt.delete(oe),je(w);return}else{const oe=ae.get(w.method);oe&&(Q=oe.handler,U=oe.type)}if(Q||re)try{if(je(w),Q)if(w.params===void 0)U!==void 0&&U.numberOfParams!==0&&U.parameterStructures!==i.ParameterStructures.byName&&k.error(`Notification ${w.method} defines ${U.numberOfParams} params but received none.`),Q();else if(Array.isArray(w.params)){const oe=w.params;w.method===u.type.method&&oe.length===2&&c.is(oe[0])?Q({token:oe[0],value:oe[1]}):(U!==void 0&&(U.parameterStructures===i.ParameterStructures.byName&&k.error(`Notification ${w.method} defines parameters by name but received parameters by position`),U.numberOfParams!==w.params.length&&k.error(`Notification ${w.method} defines ${U.numberOfParams} params but received ${oe.length} arguments`)),Q(...oe))}else U!==void 0&&U.parameterStructures===i.ParameterStructures.byPosition&&k.error(`Notification ${w.method} defines parameters by position but received parameters by name`),Q(w.params);else re&&re(w.method,w.params)}catch(oe){oe.message?k.error(`Notification handler '${w.method}' failed with message: ${oe.message}`):k.error(`Notification handler '${w.method}' failed unexpectedly.`)}else mt.fire(w)}function It(w){if(!w){k.error("Received empty message.");return}k.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(w,null,4)}`);const U=w;if(n.string(U.id)||n.number(U.id)){const Q=U.id,oe=se.get(Q);oe&&oe.reject(new Error("The received response has neither a result nor an error property."))}}function m(w){if(w!=null)switch(Ce){case f.Verbose:return JSON.stringify(w,null,4);case f.Compact:return JSON.stringify(w);default:return}}function H(w){if(!(Ce===f.Off||!ke))if(Ye===g.Text){let U;(Ce===f.Verbose||Ce===f.Compact)&&w.params&&(U=`Params: ${m(w.params)}

`),ke.log(`Sending request '${w.method} - (${w.id})'.`,U)}else Je("send-request",w)}function ie(w){if(!(Ce===f.Off||!ke))if(Ye===g.Text){let U;(Ce===f.Verbose||Ce===f.Compact)&&(w.params?U=`Params: ${m(w.params)}

`:U=`No parameters provided.

`),ke.log(`Sending notification '${w.method}'.`,U)}else Je("send-notification",w)}function De(w,U,Q){if(!(Ce===f.Off||!ke))if(Ye===g.Text){let oe;(Ce===f.Verbose||Ce===f.Compact)&&(w.error&&w.error.data?oe=`Error data: ${m(w.error.data)}

`:w.result?oe=`Result: ${m(w.result)}

`:w.error===void 0&&(oe=`No result returned.

`)),ke.log(`Sending response '${U} - (${w.id})'. Processing request took ${Date.now()-Q}ms`,oe)}else Je("send-response",w)}function Oe(w){if(!(Ce===f.Off||!ke))if(Ye===g.Text){let U;(Ce===f.Verbose||Ce===f.Compact)&&w.params&&(U=`Params: ${m(w.params)}

`),ke.log(`Received request '${w.method} - (${w.id})'.`,U)}else Je("receive-request",w)}function je(w){if(!(Ce===f.Off||!ke||w.method===N.type.method))if(Ye===g.Text){let U;(Ce===f.Verbose||Ce===f.Compact)&&(w.params?U=`Params: ${m(w.params)}

`:U=`No parameters provided.

`),ke.log(`Received notification '${w.method}'.`,U)}else Je("receive-notification",w)}function tt(w,U){if(!(Ce===f.Off||!ke))if(Ye===g.Text){let Q;if((Ce===f.Verbose||Ce===f.Compact)&&(w.error&&w.error.data?Q=`Error data: ${m(w.error.data)}

`:w.result?Q=`Result: ${m(w.result)}

`:w.error===void 0&&(Q=`No result returned.

`)),U){const oe=w.error?` Request failed: ${w.error.message} (${w.error.code}).`:"";ke.log(`Received response '${U.method} - (${w.id})' in ${Date.now()-U.timerStart}ms.${oe}`,Q)}else ke.log(`Received response ${w.id} without active response promise.`,Q)}else Je("receive-response",w)}function Je(w,U){if(!ke||Ce===f.Off)return;const Q={isLSPMessage:!0,type:w,message:U,timestamp:Date.now()};ke.log(Q)}function Nt(){if(de())throw new X(j.Closed,"Connection is closed.");if(Ge())throw new X(j.Disposed,"Connection is disposed.")}function Xt(){if(Fe())throw new X(j.AlreadyListening,"Connection is already listening")}function lr(){if(!Fe())throw new Error("Call listen() first.")}function Rt(w){return w===void 0?null:w}function zn(w){if(w!==null)return w}function yn(w){return w!=null&&!Array.isArray(w)&&typeof w=="object"}function vn(w,U){switch(w){case i.ParameterStructures.auto:return yn(U)?zn(U):[Rt(U)];case i.ParameterStructures.byName:if(!yn(U))throw new Error("Received parameters by name but param is not an object literal.");return zn(U);case i.ParameterStructures.byPosition:return[Rt(U)];default:throw new Error(`Unknown parameter structure ${w.toString()}`)}}function Gn(w,U){let Q;const oe=w.numberOfParams;switch(oe){case 0:Q=void 0;break;case 1:Q=vn(w.parameterStructures,U[0]);break;default:Q=[];for(let Ne=0;Ne<U.length&&Ne<oe;Ne++)Q.push(Rt(U[Ne]));if(U.length<oe)for(let Ne=U.length;Ne<oe;Ne++)Q.push(null);break}return Q}const yt={sendNotification:(w,...U)=>{Nt();let Q,oe;if(n.string(w)){Q=w;const Ie=U[0];let Le=0,l=i.ParameterStructures.auto;i.ParameterStructures.is(Ie)&&(Le=1,l=Ie);let _=U.length;const A=_-Le;switch(A){case 0:oe=void 0;break;case 1:oe=vn(l,U[Le]);break;default:if(l===i.ParameterStructures.byName)throw new Error(`Received ${A} parameters for 'by Name' notification parameter structure.`);oe=U.slice(Le,_).map(J=>Rt(J));break}}else{const Ie=U;Q=w.method,oe=Gn(w,Ie)}const Ne={jsonrpc:x,method:Q,params:oe};return ie(Ne),d.write(Ne).catch(Ie=>{throw k.error("Sending notification failed."),Ie})},onNotification:(w,U)=>{Nt();let Q;return n.func(w)?re=w:U&&(n.string(w)?(Q=w,ae.set(w,{type:void 0,handler:U})):(Q=w.method,ae.set(w.method,{type:w,handler:U}))),{dispose:()=>{Q!==void 0?ae.delete(Q):re=void 0}}},onProgress:(w,U,Q)=>{if(ne.has(U))throw new Error(`Progress handler for token ${U} already registered`);return ne.set(U,Q),{dispose:()=>{ne.delete(U)}}},sendProgress:(w,U,Q)=>yt.sendNotification(u.type,{token:U,value:Q}),onUnhandledProgress:et.event,sendRequest:(w,...U)=>{Nt(),lr();let Q,oe,Ne;if(n.string(w)){Q=w;const _=U[0],A=U[U.length-1];let J=0,be=i.ParameterStructures.auto;i.ParameterStructures.is(_)&&(J=1,be=_);let Se=U.length;s.CancellationToken.is(A)&&(Se=Se-1,Ne=A);const ye=Se-J;switch(ye){case 0:oe=void 0;break;case 1:oe=vn(be,U[J]);break;default:if(be===i.ParameterStructures.byName)throw new Error(`Received ${ye} parameters for 'by Name' request parameter structure.`);oe=U.slice(J,Se).map(ct=>Rt(ct));break}}else{const _=U;Q=w.method,oe=Gn(w,_);const A=w.numberOfParams;Ne=s.CancellationToken.is(_[A])?_[A]:void 0}const Ie=F++;let Le;Ne&&(Le=Ne.onCancellationRequested(()=>{const _=b.sender.sendCancellation(yt,Ie);return _===void 0?(k.log(`Received no promise from cancellation strategy when cancelling id ${Ie}`),Promise.resolve()):_.catch(()=>{k.log(`Sending cancellation messages for id ${Ie} failed`)})}));const l={jsonrpc:x,id:Ie,method:Q,params:oe};return H(l),typeof b.sender.enableCancellation=="function"&&b.sender.enableCancellation(l),new Promise(async(_,A)=>{const J=ye=>{_(ye),b.sender.cleanup(Ie),Le?.dispose()},be=ye=>{A(ye),b.sender.cleanup(Ie),Le?.dispose()},Se={method:Q,timerStart:Date.now(),resolve:J,reject:be};try{await d.write(l),se.set(Ie,Se)}catch(ye){throw k.error("Sending request failed."),Se.reject(new i.ResponseError(i.ErrorCodes.MessageWriteError,ye.message?ye.message:"Unknown reason")),ye}})},onRequest:(w,U)=>{Nt();let Q=null;return y.is(w)?(Q=void 0,Z=w):n.string(w)?(Q=null,U!==void 0&&(Q=w,ee.set(w,{handler:U,type:void 0}))):U!==void 0&&(Q=w.method,ee.set(w.method,{type:w,handler:U})),{dispose:()=>{Q!==null&&(Q!==void 0?ee.delete(Q):Z=void 0)}}},hasPendingResponse:()=>se.size>0,trace:async(w,U,Q)=>{let oe=!1,Ne=g.Text;Q!==void 0&&(n.boolean(Q)?oe=Q:(oe=Q.sendNotification||!1,Ne=Q.traceFormat||g.Text)),Ce=w,Ye=Ne,Ce===f.Off?ke=void 0:ke=U,oe&&!de()&&!Ge()&&await yt.sendNotification(h.type,{value:f.toString(w)})},onError:Ve.event,onClose:gt.event,onUnhandledNotification:mt.event,onDispose:le.event,end:()=>{d.end()},dispose:()=>{if(Ge())return;ue=L.Disposed,le.fire(void 0);const w=new i.ResponseError(i.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(const U of se.values())U.reject(w);se=new Map,ze=new Map,nt=new Set,ce=new r.LinkedMap,n.func(d.dispose)&&d.dispose(),n.func(D.dispose)&&D.dispose()},listen:()=>{Nt(),Xt(),ue=L.Listening,D.listen(pn)},inspect:()=>{(0,t.default)().console.log("inspect")}};return yt.onNotification(N.type,w=>{if(Ce===f.Off||!ke)return;const U=Ce===f.Verbose||Ce===f.Compact;ke.log(w.message,U?w.verbose:void 0)}),yt.onNotification(u.type,w=>{const U=ne.get(w.token);U?U(w.value):et.fire(w)}),yt}e.createMessageConnection=V})($s),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProgressType=e.ProgressToken=e.createMessageConnection=e.NullLogger=e.ConnectionOptions=e.ConnectionStrategy=e.AbstractMessageBuffer=e.WriteableStreamMessageWriter=e.AbstractMessageWriter=e.MessageWriter=e.ReadableStreamMessageReader=e.AbstractMessageReader=e.MessageReader=e.SharedArrayReceiverStrategy=e.SharedArraySenderStrategy=e.CancellationToken=e.CancellationTokenSource=e.Emitter=e.Event=e.Disposable=e.LRUCache=e.Touch=e.LinkedMap=e.ParameterStructures=e.NotificationType9=e.NotificationType8=e.NotificationType7=e.NotificationType6=e.NotificationType5=e.NotificationType4=e.NotificationType3=e.NotificationType2=e.NotificationType1=e.NotificationType0=e.NotificationType=e.ErrorCodes=e.ResponseError=e.RequestType9=e.RequestType8=e.RequestType7=e.RequestType6=e.RequestType5=e.RequestType4=e.RequestType3=e.RequestType2=e.RequestType1=e.RequestType0=e.RequestType=e.Message=e.RAL=void 0,e.MessageStrategy=e.CancellationStrategy=e.CancellationSenderStrategy=e.CancellationReceiverStrategy=e.ConnectionError=e.ConnectionErrors=e.LogTraceNotification=e.SetTraceNotification=e.TraceFormat=e.TraceValues=e.Trace=void 0;const t=vr;Object.defineProperty(e,"Message",{enumerable:!0,get:function(){return t.Message}}),Object.defineProperty(e,"RequestType",{enumerable:!0,get:function(){return t.RequestType}}),Object.defineProperty(e,"RequestType0",{enumerable:!0,get:function(){return t.RequestType0}}),Object.defineProperty(e,"RequestType1",{enumerable:!0,get:function(){return t.RequestType1}}),Object.defineProperty(e,"RequestType2",{enumerable:!0,get:function(){return t.RequestType2}}),Object.defineProperty(e,"RequestType3",{enumerable:!0,get:function(){return t.RequestType3}}),Object.defineProperty(e,"RequestType4",{enumerable:!0,get:function(){return t.RequestType4}}),Object.defineProperty(e,"RequestType5",{enumerable:!0,get:function(){return t.RequestType5}}),Object.defineProperty(e,"RequestType6",{enumerable:!0,get:function(){return t.RequestType6}}),Object.defineProperty(e,"RequestType7",{enumerable:!0,get:function(){return t.RequestType7}}),Object.defineProperty(e,"RequestType8",{enumerable:!0,get:function(){return t.RequestType8}}),Object.defineProperty(e,"RequestType9",{enumerable:!0,get:function(){return t.RequestType9}}),Object.defineProperty(e,"ResponseError",{enumerable:!0,get:function(){return t.ResponseError}}),Object.defineProperty(e,"ErrorCodes",{enumerable:!0,get:function(){return t.ErrorCodes}}),Object.defineProperty(e,"NotificationType",{enumerable:!0,get:function(){return t.NotificationType}}),Object.defineProperty(e,"NotificationType0",{enumerable:!0,get:function(){return t.NotificationType0}}),Object.defineProperty(e,"NotificationType1",{enumerable:!0,get:function(){return t.NotificationType1}}),Object.defineProperty(e,"NotificationType2",{enumerable:!0,get:function(){return t.NotificationType2}}),Object.defineProperty(e,"NotificationType3",{enumerable:!0,get:function(){return t.NotificationType3}}),Object.defineProperty(e,"NotificationType4",{enumerable:!0,get:function(){return t.NotificationType4}}),Object.defineProperty(e,"NotificationType5",{enumerable:!0,get:function(){return t.NotificationType5}}),Object.defineProperty(e,"NotificationType6",{enumerable:!0,get:function(){return t.NotificationType6}}),Object.defineProperty(e,"NotificationType7",{enumerable:!0,get:function(){return t.NotificationType7}}),Object.defineProperty(e,"NotificationType8",{enumerable:!0,get:function(){return t.NotificationType8}}),Object.defineProperty(e,"NotificationType9",{enumerable:!0,get:function(){return t.NotificationType9}}),Object.defineProperty(e,"ParameterStructures",{enumerable:!0,get:function(){return t.ParameterStructures}});const n=Cr;Object.defineProperty(e,"LinkedMap",{enumerable:!0,get:function(){return n.LinkedMap}}),Object.defineProperty(e,"LRUCache",{enumerable:!0,get:function(){return n.LRUCache}}),Object.defineProperty(e,"Touch",{enumerable:!0,get:function(){return n.Touch}});const i=qs;Object.defineProperty(e,"Disposable",{enumerable:!0,get:function(){return i.Disposable}});const r=Qt;Object.defineProperty(e,"Event",{enumerable:!0,get:function(){return r.Event}}),Object.defineProperty(e,"Emitter",{enumerable:!0,get:function(){return r.Emitter}});const o=Jn;Object.defineProperty(e,"CancellationTokenSource",{enumerable:!0,get:function(){return o.CancellationTokenSource}}),Object.defineProperty(e,"CancellationToken",{enumerable:!0,get:function(){return o.CancellationToken}});const s=Yt;Object.defineProperty(e,"SharedArraySenderStrategy",{enumerable:!0,get:function(){return s.SharedArraySenderStrategy}}),Object.defineProperty(e,"SharedArrayReceiverStrategy",{enumerable:!0,get:function(){return s.SharedArrayReceiverStrategy}});const a=Ms;Object.defineProperty(e,"MessageReader",{enumerable:!0,get:function(){return a.MessageReader}}),Object.defineProperty(e,"AbstractMessageReader",{enumerable:!0,get:function(){return a.AbstractMessageReader}}),Object.defineProperty(e,"ReadableStreamMessageReader",{enumerable:!0,get:function(){return a.ReadableStreamMessageReader}});const c=Ls;Object.defineProperty(e,"MessageWriter",{enumerable:!0,get:function(){return c.MessageWriter}}),Object.defineProperty(e,"AbstractMessageWriter",{enumerable:!0,get:function(){return c.AbstractMessageWriter}}),Object.defineProperty(e,"WriteableStreamMessageWriter",{enumerable:!0,get:function(){return c.WriteableStreamMessageWriter}});const u=Qn;Object.defineProperty(e,"AbstractMessageBuffer",{enumerable:!0,get:function(){return u.AbstractMessageBuffer}});const p=$s;Object.defineProperty(e,"ConnectionStrategy",{enumerable:!0,get:function(){return p.ConnectionStrategy}}),Object.defineProperty(e,"ConnectionOptions",{enumerable:!0,get:function(){return p.ConnectionOptions}}),Object.defineProperty(e,"NullLogger",{enumerable:!0,get:function(){return p.NullLogger}}),Object.defineProperty(e,"createMessageConnection",{enumerable:!0,get:function(){return p.createMessageConnection}}),Object.defineProperty(e,"ProgressToken",{enumerable:!0,get:function(){return p.ProgressToken}}),Object.defineProperty(e,"ProgressType",{enumerable:!0,get:function(){return p.ProgressType}}),Object.defineProperty(e,"Trace",{enumerable:!0,get:function(){return p.Trace}}),Object.defineProperty(e,"TraceValues",{enumerable:!0,get:function(){return p.TraceValues}}),Object.defineProperty(e,"TraceFormat",{enumerable:!0,get:function(){return p.TraceFormat}}),Object.defineProperty(e,"SetTraceNotification",{enumerable:!0,get:function(){return p.SetTraceNotification}}),Object.defineProperty(e,"LogTraceNotification",{enumerable:!0,get:function(){return p.LogTraceNotification}}),Object.defineProperty(e,"ConnectionErrors",{enumerable:!0,get:function(){return p.ConnectionErrors}}),Object.defineProperty(e,"ConnectionError",{enumerable:!0,get:function(){return p.ConnectionError}}),Object.defineProperty(e,"CancellationReceiverStrategy",{enumerable:!0,get:function(){return p.CancellationReceiverStrategy}}),Object.defineProperty(e,"CancellationSenderStrategy",{enumerable:!0,get:function(){return p.CancellationSenderStrategy}}),Object.defineProperty(e,"CancellationStrategy",{enumerable:!0,get:function(){return p.CancellationStrategy}}),Object.defineProperty(e,"MessageStrategy",{enumerable:!0,get:function(){return p.MessageStrategy}});const y=vt;e.RAL=y.default}(Xn),Object.defineProperty(yr,"__esModule",{value:!0});const As=kc.default,Ct=Xn;class ur extends Ct.AbstractMessageBuffer{constructor(t="utf-8"){super(t)}emptyBuffer(){return ur.emptyBuffer}fromString(t,n){return Buffer.from(t,n)}toString(t,n){return t instanceof Buffer?t.toString(n):new As.TextDecoder(n).decode(t)}asNative(t,n){return n===void 0?t instanceof Buffer?t:Buffer.from(t):t instanceof Buffer?t.slice(0,n):Buffer.from(t,0,n)}allocNative(t){return Buffer.allocUnsafe(t)}}ur.emptyBuffer=Buffer.allocUnsafe(0);class au{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),Ct.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),Ct.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),Ct.Disposable.create(()=>this.stream.off("end",t))}onData(t){return this.stream.on("data",t),Ct.Disposable.create(()=>this.stream.off("data",t))}}class cu{constructor(t){this.stream=t}onClose(t){return this.stream.on("close",t),Ct.Disposable.create(()=>this.stream.off("close",t))}onError(t){return this.stream.on("error",t),Ct.Disposable.create(()=>this.stream.off("error",t))}onEnd(t){return this.stream.on("end",t),Ct.Disposable.create(()=>this.stream.off("end",t))}write(t,n){return new Promise((i,r)=>{const o=s=>{s==null?i():r(s)};typeof t=="string"?this.stream.write(t,n,o):this.stream.write(t,o)})}end(){this.stream.end()}}const js=Object.freeze({messageBuffer:Object.freeze({create:e=>new ur(e)}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:(e,t)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(e,void 0,0),t.charset))}catch(n){return Promise.reject(n)}}}),decoder:Object.freeze({name:"application/json",decode:(e,t)=>{try{return e instanceof Buffer?Promise.resolve(JSON.parse(e.toString(t.charset))):Promise.resolve(JSON.parse(new As.TextDecoder(t.charset).decode(e)))}catch(n){return Promise.reject(n)}}})}),stream:Object.freeze({asReadableStream:e=>new au(e),asWritableStream:e=>new cu(e)}),console,timer:Object.freeze({setTimeout(e,t,...n){const i=setTimeout(e,t,...n);return{dispose:()=>clearTimeout(i)}},setImmediate(e,...t){const n=setImmediate(e,...t);return{dispose:()=>clearImmediate(n)}},setInterval(e,t,...n){const i=setInterval(e,t,...n);return{dispose:()=>clearInterval(i)}}})});function br(){return js}(function(e){function t(){Ct.RAL.install(js)}e.install=t})(br||(br={})),yr.default=br,function(e){var t=He.commonjsGlobal&&He.commonjsGlobal.__createBinding||(Object.create?function(D,d,v,R){R===void 0&&(R=v);var k=Object.getOwnPropertyDescriptor(d,v);(!k||("get"in k?!d.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return d[v]}}),Object.defineProperty(D,R,k)}:function(D,d,v,R){R===void 0&&(R=v),D[R]=d[v]}),n=He.commonjsGlobal&&He.commonjsGlobal.__exportStar||function(D,d){for(var v in D)v!=="default"&&!Object.prototype.hasOwnProperty.call(d,v)&&t(d,D,v)};Object.defineProperty(e,"__esModule",{value:!0}),e.createMessageConnection=e.createServerSocketTransport=e.createClientSocketTransport=e.createServerPipeTransport=e.createClientPipeTransport=e.generateRandomPipeName=e.StreamMessageWriter=e.StreamMessageReader=e.SocketMessageWriter=e.SocketMessageReader=e.PortMessageWriter=e.PortMessageReader=e.IPCMessageWriter=e.IPCMessageReader=void 0;const i=yr;i.default.install();const r=Vn.default,o=Fc.default,s=Oc.default,a=Ic.default,c=Xn;n(Xn,e);class u extends c.AbstractMessageReader{constructor(d){super(),this.process=d;let v=this.process;v.on("error",R=>this.fireError(R)),v.on("close",()=>this.fireClose())}listen(d){return this.process.on("message",d),c.Disposable.create(()=>this.process.off("message",d))}}e.IPCMessageReader=u;class p extends c.AbstractMessageWriter{constructor(d){super(),this.process=d,this.errorCount=0;const v=this.process;v.on("error",R=>this.fireError(R)),v.on("close",()=>this.fireClose)}write(d){try{return typeof this.process.send=="function"&&this.process.send(d,void 0,void 0,v=>{v?(this.errorCount++,this.handleError(v,d)):this.errorCount=0}),Promise.resolve()}catch(v){return this.handleError(v,d),Promise.reject(v)}}handleError(d,v){this.errorCount++,this.fireError(d,v,this.errorCount)}end(){}}e.IPCMessageWriter=p;class y extends c.AbstractMessageReader{constructor(d){super(),this.onData=new c.Emitter,d.on("close",()=>this.fireClose),d.on("error",v=>this.fireError(v)),d.on("message",v=>{this.onData.fire(v)})}listen(d){return this.onData.event(d)}}e.PortMessageReader=y;class f extends c.AbstractMessageWriter{constructor(d){super(),this.port=d,this.errorCount=0,d.on("close",()=>this.fireClose()),d.on("error",v=>this.fireError(v))}write(d){try{return this.port.postMessage(d),Promise.resolve()}catch(v){return this.handleError(v,d),Promise.reject(v)}}handleError(d,v){this.errorCount++,this.fireError(d,v,this.errorCount)}end(){}}e.PortMessageWriter=f;class g extends c.ReadableStreamMessageReader{constructor(d,v="utf-8"){super((0,i.default)().stream.asReadableStream(d),v)}}e.SocketMessageReader=g;class h extends c.WriteableStreamMessageWriter{constructor(d,v){super((0,i.default)().stream.asWritableStream(d),v),this.socket=d}dispose(){super.dispose(),this.socket.destroy()}}e.SocketMessageWriter=h;class N extends c.ReadableStreamMessageReader{constructor(d,v){super((0,i.default)().stream.asReadableStream(d),v)}}e.StreamMessageReader=N;class j extends c.WriteableStreamMessageWriter{constructor(d,v){super((0,i.default)().stream.asWritableStream(d),v)}}e.StreamMessageWriter=j;const X=process.env.XDG_RUNTIME_DIR,G=new Map([["linux",107],["darwin",103]]);function S(){const D=(0,s.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${D}-sock`;let d;X?d=r.join(X,`vscode-ipc-${D}.sock`):d=r.join(o.tmpdir(),`vscode-${D}.sock`);const v=G.get(process.platform);return v!==void 0&&d.length>v&&(0,i.default)().console.warn(`WARNING: IPC handle "${d}" is longer than ${v} characters.`),d}e.generateRandomPipeName=S;function C(D,d="utf-8"){let v;const R=new Promise((k,F)=>{v=k});return new Promise((k,F)=>{let q=(0,a.createServer)($=>{q.close(),v([new g($,d),new h($,d)])});q.on("error",F),q.listen(D,()=>{q.removeListener("error",F),k({onConnected:()=>R})})})}e.createClientPipeTransport=C;function M(D,d="utf-8"){const v=(0,a.createConnection)(D);return[new g(v,d),new h(v,d)]}e.createServerPipeTransport=M;function W(D,d="utf-8"){let v;const R=new Promise((k,F)=>{v=k});return new Promise((k,F)=>{const q=(0,a.createServer)($=>{q.close(),v([new g($,d),new h($,d)])});q.on("error",F),q.listen(D,"127.0.0.1",()=>{q.removeListener("error",F),k({onConnected:()=>R})})})}e.createClientSocketTransport=W;function I(D,d="utf-8"){const v=(0,a.createConnection)(D,"127.0.0.1");return[new g(v,d),new h(v,d)]}e.createServerSocketTransport=I;function P(D){const d=D;return d.read!==void 0&&d.addListener!==void 0}function L(D){const d=D;return d.write!==void 0&&d.addListener!==void 0}function V(D,d,v,R){v||(v=c.NullLogger);const k=P(D)?new N(D):D,F=L(d)?new j(d):d;return c.ConnectionStrategy.is(R)&&(R={connectionStrategy:R}),(0,c.createMessageConnection)(k,F,v,R)}e.createMessageConnection=V}(qt),function(e){e.exports=qt}(mr);var Hs={},Dr;(function(e){function t(n){return typeof n=="string"}e.is=t})(Dr||(Dr={}));var Yn;(function(e){function t(n){return typeof n=="string"}e.is=t})(Yn||(Yn={}));var Sr;(function(e){e.MIN_VALUE=-2147483648,e.MAX_VALUE=2147483647;function t(n){return typeof n=="number"&&e.MIN_VALUE<=n&&n<=e.MAX_VALUE}e.is=t})(Sr||(Sr={}));var wn;(function(e){e.MIN_VALUE=0,e.MAX_VALUE=2147483647;function t(n){return typeof n=="number"&&e.MIN_VALUE<=n&&n<=e.MAX_VALUE}e.is=t})(wn||(wn={}));var ut;(function(e){function t(i,r){return i===Number.MAX_VALUE&&(i=wn.MAX_VALUE),r===Number.MAX_VALUE&&(r=wn.MAX_VALUE),{line:i,character:r}}e.create=t;function n(i){var r=i;return O.objectLiteral(r)&&O.uinteger(r.line)&&O.uinteger(r.character)}e.is=n})(ut||(ut={}));var We;(function(e){function t(i,r,o,s){if(O.uinteger(i)&&O.uinteger(r)&&O.uinteger(o)&&O.uinteger(s))return{start:ut.create(i,r),end:ut.create(o,s)};if(ut.is(i)&&ut.is(r))return{start:i,end:r};throw new Error("Range#create called with invalid arguments[".concat(i,", ").concat(r,", ").concat(o,", ").concat(s,"]"))}e.create=t;function n(i){var r=i;return O.objectLiteral(r)&&ut.is(r.start)&&ut.is(r.end)}e.is=n})(We||(We={}));var bn;(function(e){function t(i,r){return{uri:i,range:r}}e.create=t;function n(i){var r=i;return O.objectLiteral(r)&&We.is(r.range)&&(O.string(r.uri)||O.undefined(r.uri))}e.is=n})(bn||(bn={}));var Rr;(function(e){function t(i,r,o,s){return{targetUri:i,targetRange:r,targetSelectionRange:o,originSelectionRange:s}}e.create=t;function n(i){var r=i;return O.objectLiteral(r)&&We.is(r.targetRange)&&O.string(r.targetUri)&&We.is(r.targetSelectionRange)&&(We.is(r.originSelectionRange)||O.undefined(r.originSelectionRange))}e.is=n})(Rr||(Rr={}));var Zn;(function(e){function t(i,r,o,s){return{red:i,green:r,blue:o,alpha:s}}e.create=t;function n(i){var r=i;return O.objectLiteral(r)&&O.numberRange(r.red,0,1)&&O.numberRange(r.green,0,1)&&O.numberRange(r.blue,0,1)&&O.numberRange(r.alpha,0,1)}e.is=n})(Zn||(Zn={}));var Tr;(function(e){function t(i,r){return{range:i,color:r}}e.create=t;function n(i){var r=i;return O.objectLiteral(r)&&We.is(r.range)&&Zn.is(r.color)}e.is=n})(Tr||(Tr={}));var Pr;(function(e){function t(i,r,o){return{label:i,textEdit:r,additionalTextEdits:o}}e.create=t;function n(i){var r=i;return O.objectLiteral(r)&&O.string(r.label)&&(O.undefined(r.textEdit)||pt.is(r))&&(O.undefined(r.additionalTextEdits)||O.typedArray(r.additionalTextEdits,pt.is))}e.is=n})(Pr||(Pr={}));var Er;(function(e){e.Comment="comment",e.Imports="imports",e.Region="region"})(Er||(Er={}));var kr;(function(e){function t(i,r,o,s,a,c){var u={startLine:i,endLine:r};return O.defined(o)&&(u.startCharacter=o),O.defined(s)&&(u.endCharacter=s),O.defined(a)&&(u.kind=a),O.defined(c)&&(u.collapsedText=c),u}e.create=t;function n(i){var r=i;return O.objectLiteral(r)&&O.uinteger(r.startLine)&&O.uinteger(r.startLine)&&(O.undefined(r.startCharacter)||O.uinteger(r.startCharacter))&&(O.undefined(r.endCharacter)||O.uinteger(r.endCharacter))&&(O.undefined(r.kind)||O.string(r.kind))}e.is=n})(kr||(kr={}));var ei;(function(e){function t(i,r){return{location:i,message:r}}e.create=t;function n(i){var r=i;return O.defined(r)&&bn.is(r.location)&&O.string(r.message)}e.is=n})(ei||(ei={}));var Fr;(function(e){e.Error=1,e.Warning=2,e.Information=3,e.Hint=4})(Fr||(Fr={}));var Or;(function(e){e.Unnecessary=1,e.Deprecated=2})(Or||(Or={}));var Ir;(function(e){function t(n){var i=n;return O.objectLiteral(i)&&O.string(i.href)}e.is=t})(Ir||(Ir={}));var Dn;(function(e){function t(i,r,o,s,a,c){var u={range:i,message:r};return O.defined(o)&&(u.severity=o),O.defined(s)&&(u.code=s),O.defined(a)&&(u.source=a),O.defined(c)&&(u.relatedInformation=c),u}e.create=t;function n(i){var r,o=i;return O.defined(o)&&We.is(o.range)&&O.string(o.message)&&(O.number(o.severity)||O.undefined(o.severity))&&(O.integer(o.code)||O.string(o.code)||O.undefined(o.code))&&(O.undefined(o.codeDescription)||O.string((r=o.codeDescription)===null||r===void 0?void 0:r.href))&&(O.string(o.source)||O.undefined(o.source))&&(O.undefined(o.relatedInformation)||O.typedArray(o.relatedInformation,ei.is))}e.is=n})(Dn||(Dn={}));var Mt;(function(e){function t(i,r){for(var o=[],s=2;s<arguments.length;s++)o[s-2]=arguments[s];var a={title:i,command:r};return O.defined(o)&&o.length>0&&(a.arguments=o),a}e.create=t;function n(i){var r=i;return O.defined(r)&&O.string(r.title)&&O.string(r.command)}e.is=n})(Mt||(Mt={}));var pt;(function(e){function t(o,s){return{range:o,newText:s}}e.replace=t;function n(o,s){return{range:{start:o,end:o},newText:s}}e.insert=n;function i(o){return{range:o,newText:""}}e.del=i;function r(o){var s=o;return O.objectLiteral(s)&&O.string(s.newText)&&We.is(s.range)}e.is=r})(pt||(pt={}));var Lt;(function(e){function t(i,r,o){var s={label:i};return r!==void 0&&(s.needsConfirmation=r),o!==void 0&&(s.description=o),s}e.create=t;function n(i){var r=i;return O.objectLiteral(r)&&O.string(r.label)&&(O.boolean(r.needsConfirmation)||r.needsConfirmation===void 0)&&(O.string(r.description)||r.description===void 0)}e.is=n})(Lt||(Lt={}));var Qe;(function(e){function t(n){var i=n;return O.string(i)}e.is=t})(Qe||(Qe={}));var _t;(function(e){function t(o,s,a){return{range:o,newText:s,annotationId:a}}e.replace=t;function n(o,s,a){return{range:{start:o,end:o},newText:s,annotationId:a}}e.insert=n;function i(o,s){return{range:o,newText:"",annotationId:s}}e.del=i;function r(o){var s=o;return pt.is(s)&&(Lt.is(s.annotationId)||Qe.is(s.annotationId))}e.is=r})(_t||(_t={}));var Sn;(function(e){function t(i,r){return{textDocument:i,edits:r}}e.create=t;function n(i){var r=i;return O.defined(r)&&Rn.is(r.textDocument)&&Array.isArray(r.edits)}e.is=n})(Sn||(Sn={}));var Zt;(function(e){function t(i,r,o){var s={kind:"create",uri:i};return r!==void 0&&(r.overwrite!==void 0||r.ignoreIfExists!==void 0)&&(s.options=r),o!==void 0&&(s.annotationId=o),s}e.create=t;function n(i){var r=i;return r&&r.kind==="create"&&O.string(r.uri)&&(r.options===void 0||(r.options.overwrite===void 0||O.boolean(r.options.overwrite))&&(r.options.ignoreIfExists===void 0||O.boolean(r.options.ignoreIfExists)))&&(r.annotationId===void 0||Qe.is(r.annotationId))}e.is=n})(Zt||(Zt={}));var en;(function(e){function t(i,r,o,s){var a={kind:"rename",oldUri:i,newUri:r};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(a.options=o),s!==void 0&&(a.annotationId=s),a}e.create=t;function n(i){var r=i;return r&&r.kind==="rename"&&O.string(r.oldUri)&&O.string(r.newUri)&&(r.options===void 0||(r.options.overwrite===void 0||O.boolean(r.options.overwrite))&&(r.options.ignoreIfExists===void 0||O.boolean(r.options.ignoreIfExists)))&&(r.annotationId===void 0||Qe.is(r.annotationId))}e.is=n})(en||(en={}));var tn;(function(e){function t(i,r,o){var s={kind:"delete",uri:i};return r!==void 0&&(r.recursive!==void 0||r.ignoreIfNotExists!==void 0)&&(s.options=r),o!==void 0&&(s.annotationId=o),s}e.create=t;function n(i){var r=i;return r&&r.kind==="delete"&&O.string(r.uri)&&(r.options===void 0||(r.options.recursive===void 0||O.boolean(r.options.recursive))&&(r.options.ignoreIfNotExists===void 0||O.boolean(r.options.ignoreIfNotExists)))&&(r.annotationId===void 0||Qe.is(r.annotationId))}e.is=n})(tn||(tn={}));var ti;(function(e){function t(n){var i=n;return i&&(i.changes!==void 0||i.documentChanges!==void 0)&&(i.documentChanges===void 0||i.documentChanges.every(function(r){return O.string(r.kind)?Zt.is(r)||en.is(r)||tn.is(r):Sn.is(r)}))}e.is=t})(ti||(ti={}));var ni=function(){function e(t,n){this.edits=t,this.changeAnnotations=n}return e.prototype.insert=function(t,n,i){var r,o;if(i===void 0?r=pt.insert(t,n):Qe.is(i)?(o=i,r=_t.insert(t,n,i)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(i),r=_t.insert(t,n,o)),this.edits.push(r),o!==void 0)return o},e.prototype.replace=function(t,n,i){var r,o;if(i===void 0?r=pt.replace(t,n):Qe.is(i)?(o=i,r=_t.replace(t,n,i)):(this.assertChangeAnnotations(this.changeAnnotations),o=this.changeAnnotations.manage(i),r=_t.replace(t,n,o)),this.edits.push(r),o!==void 0)return o},e.prototype.delete=function(t,n){var i,r;if(n===void 0?i=pt.del(t):Qe.is(n)?(r=n,i=_t.del(t,n)):(this.assertChangeAnnotations(this.changeAnnotations),r=this.changeAnnotations.manage(n),i=_t.del(t,r)),this.edits.push(i),r!==void 0)return r},e.prototype.add=function(t){this.edits.push(t)},e.prototype.all=function(){return this.edits},e.prototype.clear=function(){this.edits.splice(0,this.edits.length)},e.prototype.assertChangeAnnotations=function(t){if(t===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},e}(),Ws=function(){function e(t){this._annotations=t===void 0?Object.create(null):t,this._counter=0,this._size=0}return e.prototype.all=function(){return this._annotations},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!1,configurable:!0}),e.prototype.manage=function(t,n){var i;if(Qe.is(t)?i=t:(i=this.nextId(),n=t),this._annotations[i]!==void 0)throw new Error("Id ".concat(i," is already in use."));if(n===void 0)throw new Error("No annotation provided for id ".concat(i));return this._annotations[i]=n,this._size++,i},e.prototype.nextId=function(){return this._counter++,this._counter.toString()},e}(),uu=function(){function e(t){var n=this;this._textEditChanges=Object.create(null),t!==void 0?(this._workspaceEdit=t,t.documentChanges?(this._changeAnnotations=new Ws(t.changeAnnotations),t.changeAnnotations=this._changeAnnotations.all(),t.documentChanges.forEach(function(i){if(Sn.is(i)){var r=new ni(i.edits,n._changeAnnotations);n._textEditChanges[i.textDocument.uri]=r}})):t.changes&&Object.keys(t.changes).forEach(function(i){var r=new ni(t.changes[i]);n._textEditChanges[i]=r})):this._workspaceEdit={}}return Object.defineProperty(e.prototype,"edit",{get:function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},enumerable:!1,configurable:!0}),e.prototype.getTextEditChange=function(t){if(Rn.is(t)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var n={uri:t.uri,version:t.version},i=this._textEditChanges[n.uri];if(!i){var r=[],o={textDocument:n,edits:r};this._workspaceEdit.documentChanges.push(o),i=new ni(r,this._changeAnnotations),this._textEditChanges[n.uri]=i}return i}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var i=this._textEditChanges[t];if(!i){var r=[];this._workspaceEdit.changes[t]=r,i=new ni(r),this._textEditChanges[t]=i}return i}},e.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new Ws,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},e.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},e.prototype.createFile=function(t,n,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var r;Lt.is(n)||Qe.is(n)?r=n:i=n;var o,s;if(r===void 0?o=Zt.create(t,i):(s=Qe.is(r)?r:this._changeAnnotations.manage(r),o=Zt.create(t,i,s)),this._workspaceEdit.documentChanges.push(o),s!==void 0)return s},e.prototype.renameFile=function(t,n,i,r){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var o;Lt.is(i)||Qe.is(i)?o=i:r=i;var s,a;if(o===void 0?s=en.create(t,n,r):(a=Qe.is(o)?o:this._changeAnnotations.manage(o),s=en.create(t,n,r,a)),this._workspaceEdit.documentChanges.push(s),a!==void 0)return a},e.prototype.deleteFile=function(t,n,i){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var r;Lt.is(n)||Qe.is(n)?r=n:i=n;var o,s;if(r===void 0?o=tn.create(t,i):(s=Qe.is(r)?r:this._changeAnnotations.manage(r),o=tn.create(t,i,s)),this._workspaceEdit.documentChanges.push(o),s!==void 0)return s},e}(),Nr;(function(e){function t(i){return{uri:i}}e.create=t;function n(i){var r=i;return O.defined(r)&&O.string(r.uri)}e.is=n})(Nr||(Nr={}));var qr;(function(e){function t(i,r){return{uri:i,version:r}}e.create=t;function n(i){var r=i;return O.defined(r)&&O.string(r.uri)&&O.integer(r.version)}e.is=n})(qr||(qr={}));var Rn;(function(e){function t(i,r){return{uri:i,version:r}}e.create=t;function n(i){var r=i;return O.defined(r)&&O.string(r.uri)&&(r.version===null||O.integer(r.version))}e.is=n})(Rn||(Rn={}));var Mr;(function(e){function t(i,r,o,s){return{uri:i,languageId:r,version:o,text:s}}e.create=t;function n(i){var r=i;return O.defined(r)&&O.string(r.uri)&&O.string(r.languageId)&&O.integer(r.version)&&O.string(r.text)}e.is=n})(Mr||(Mr={}));var ii;(function(e){e.PlainText="plaintext",e.Markdown="markdown";function t(n){var i=n;return i===e.PlainText||i===e.Markdown}e.is=t})(ii||(ii={}));var nn;(function(e){function t(n){var i=n;return O.objectLiteral(n)&&ii.is(i.kind)&&O.string(i.value)}e.is=t})(nn||(nn={}));var Lr;(function(e){e.Text=1,e.Method=2,e.Function=3,e.Constructor=4,e.Field=5,e.Variable=6,e.Class=7,e.Interface=8,e.Module=9,e.Property=10,e.Unit=11,e.Value=12,e.Enum=13,e.Keyword=14,e.Snippet=15,e.Color=16,e.File=17,e.Reference=18,e.Folder=19,e.EnumMember=20,e.Constant=21,e.Struct=22,e.Event=23,e.Operator=24,e.TypeParameter=25})(Lr||(Lr={}));var $r;(function(e){e.PlainText=1,e.Snippet=2})($r||($r={}));var Ar;(function(e){e.Deprecated=1})(Ar||(Ar={}));var jr;(function(e){function t(i,r,o){return{newText:i,insert:r,replace:o}}e.create=t;function n(i){var r=i;return r&&O.string(r.newText)&&We.is(r.insert)&&We.is(r.replace)}e.is=n})(jr||(jr={}));var Hr;(function(e){e.asIs=1,e.adjustIndentation=2})(Hr||(Hr={}));var Wr;(function(e){function t(n){var i=n;return i&&(O.string(i.detail)||i.detail===void 0)&&(O.string(i.description)||i.description===void 0)}e.is=t})(Wr||(Wr={}));var Ur;(function(e){function t(n){return{label:n}}e.create=t})(Ur||(Ur={}));var xr;(function(e){function t(n,i){return{items:n||[],isIncomplete:!!i}}e.create=t})(xr||(xr={}));var Tn;(function(e){function t(i){return i.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}e.fromPlainText=t;function n(i){var r=i;return O.string(r)||O.objectLiteral(r)&&O.string(r.language)&&O.string(r.value)}e.is=n})(Tn||(Tn={}));var Kr;(function(e){function t(n){var i=n;return!!i&&O.objectLiteral(i)&&(nn.is(i.contents)||Tn.is(i.contents)||O.typedArray(i.contents,Tn.is))&&(n.range===void 0||We.is(n.range))}e.is=t})(Kr||(Kr={}));var zr;(function(e){function t(n,i){return i?{label:n,documentation:i}:{label:n}}e.create=t})(zr||(zr={}));var Gr;(function(e){function t(n,i){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var s={label:n};return O.defined(i)&&(s.documentation=i),O.defined(r)?s.parameters=r:s.parameters=[],s}e.create=t})(Gr||(Gr={}));var Br;(function(e){e.Text=1,e.Read=2,e.Write=3})(Br||(Br={}));var Vr;(function(e){function t(n,i){var r={range:n};return O.number(i)&&(r.kind=i),r}e.create=t})(Vr||(Vr={}));var Xr;(function(e){e.File=1,e.Module=2,e.Namespace=3,e.Package=4,e.Class=5,e.Method=6,e.Property=7,e.Field=8,e.Constructor=9,e.Enum=10,e.Interface=11,e.Function=12,e.Variable=13,e.Constant=14,e.String=15,e.Number=16,e.Boolean=17,e.Array=18,e.Object=19,e.Key=20,e.Null=21,e.EnumMember=22,e.Struct=23,e.Event=24,e.Operator=25,e.TypeParameter=26})(Xr||(Xr={}));var Jr;(function(e){e.Deprecated=1})(Jr||(Jr={}));var Qr;(function(e){function t(n,i,r,o,s){var a={name:n,kind:i,location:{uri:o,range:r}};return s&&(a.containerName=s),a}e.create=t})(Qr||(Qr={}));var Yr;(function(e){function t(n,i,r,o){return o!==void 0?{name:n,kind:i,location:{uri:r,range:o}}:{name:n,kind:i,location:{uri:r}}}e.create=t})(Yr||(Yr={}));var Zr;(function(e){function t(i,r,o,s,a,c){var u={name:i,detail:r,kind:o,range:s,selectionRange:a};return c!==void 0&&(u.children=c),u}e.create=t;function n(i){var r=i;return r&&O.string(r.name)&&O.number(r.kind)&&We.is(r.range)&&We.is(r.selectionRange)&&(r.detail===void 0||O.string(r.detail))&&(r.deprecated===void 0||O.boolean(r.deprecated))&&(r.children===void 0||Array.isArray(r.children))&&(r.tags===void 0||Array.isArray(r.tags))}e.is=n})(Zr||(Zr={}));var eo;(function(e){e.Empty="",e.QuickFix="quickfix",e.Refactor="refactor",e.RefactorExtract="refactor.extract",e.RefactorInline="refactor.inline",e.RefactorRewrite="refactor.rewrite",e.Source="source",e.SourceOrganizeImports="source.organizeImports",e.SourceFixAll="source.fixAll"})(eo||(eo={}));var Pn;(function(e){e.Invoked=1,e.Automatic=2})(Pn||(Pn={}));var to;(function(e){function t(i,r,o){var s={diagnostics:i};return r!=null&&(s.only=r),o!=null&&(s.triggerKind=o),s}e.create=t;function n(i){var r=i;return O.defined(r)&&O.typedArray(r.diagnostics,Dn.is)&&(r.only===void 0||O.typedArray(r.only,O.string))&&(r.triggerKind===void 0||r.triggerKind===Pn.Invoked||r.triggerKind===Pn.Automatic)}e.is=n})(to||(to={}));var no;(function(e){function t(i,r,o){var s={title:i},a=!0;return typeof r=="string"?(a=!1,s.kind=r):Mt.is(r)?s.command=r:s.edit=r,a&&o!==void 0&&(s.kind=o),s}e.create=t;function n(i){var r=i;return r&&O.string(r.title)&&(r.diagnostics===void 0||O.typedArray(r.diagnostics,Dn.is))&&(r.kind===void 0||O.string(r.kind))&&(r.edit!==void 0||r.command!==void 0)&&(r.command===void 0||Mt.is(r.command))&&(r.isPreferred===void 0||O.boolean(r.isPreferred))&&(r.edit===void 0||ti.is(r.edit))}e.is=n})(no||(no={}));var io;(function(e){function t(i,r){var o={range:i};return O.defined(r)&&(o.data=r),o}e.create=t;function n(i){var r=i;return O.defined(r)&&We.is(r.range)&&(O.undefined(r.command)||Mt.is(r.command))}e.is=n})(io||(io={}));var ro;(function(e){function t(i,r){return{tabSize:i,insertSpaces:r}}e.create=t;function n(i){var r=i;return O.defined(r)&&O.uinteger(r.tabSize)&&O.boolean(r.insertSpaces)}e.is=n})(ro||(ro={}));var oo;(function(e){function t(i,r,o){return{range:i,target:r,data:o}}e.create=t;function n(i){var r=i;return O.defined(r)&&We.is(r.range)&&(O.undefined(r.target)||O.string(r.target))}e.is=n})(oo||(oo={}));var so;(function(e){function t(i,r){return{range:i,parent:r}}e.create=t;function n(i){var r=i;return O.objectLiteral(r)&&We.is(r.range)&&(r.parent===void 0||e.is(r.parent))}e.is=n})(so||(so={}));var ao;(function(e){e.namespace="namespace",e.type="type",e.class="class",e.enum="enum",e.interface="interface",e.struct="struct",e.typeParameter="typeParameter",e.parameter="parameter",e.variable="variable",e.property="property",e.enumMember="enumMember",e.event="event",e.function="function",e.method="method",e.macro="macro",e.keyword="keyword",e.modifier="modifier",e.comment="comment",e.string="string",e.number="number",e.regexp="regexp",e.operator="operator",e.decorator="decorator"})(ao||(ao={}));var co;(function(e){e.declaration="declaration",e.definition="definition",e.readonly="readonly",e.static="static",e.deprecated="deprecated",e.abstract="abstract",e.async="async",e.modification="modification",e.documentation="documentation",e.defaultLibrary="defaultLibrary"})(co||(co={}));var uo;(function(e){function t(n){var i=n;return O.objectLiteral(i)&&(i.resultId===void 0||typeof i.resultId=="string")&&Array.isArray(i.data)&&(i.data.length===0||typeof i.data[0]=="number")}e.is=t})(uo||(uo={}));var lo;(function(e){function t(i,r){return{range:i,text:r}}e.create=t;function n(i){var r=i;return r!=null&&We.is(r.range)&&O.string(r.text)}e.is=n})(lo||(lo={}));var fo;(function(e){function t(i,r,o){return{range:i,variableName:r,caseSensitiveLookup:o}}e.create=t;function n(i){var r=i;return r!=null&&We.is(r.range)&&O.boolean(r.caseSensitiveLookup)&&(O.string(r.variableName)||r.variableName===void 0)}e.is=n})(fo||(fo={}));var ho;(function(e){function t(i,r){return{range:i,expression:r}}e.create=t;function n(i){var r=i;return r!=null&&We.is(r.range)&&(O.string(r.expression)||r.expression===void 0)}e.is=n})(ho||(ho={}));var go;(function(e){function t(i,r){return{frameId:i,stoppedLocation:r}}e.create=t;function n(i){var r=i;return O.defined(r)&&We.is(i.stoppedLocation)}e.is=n})(go||(go={}));var ri;(function(e){e.Type=1,e.Parameter=2;function t(n){return n===1||n===2}e.is=t})(ri||(ri={}));var oi;(function(e){function t(i){return{value:i}}e.create=t;function n(i){var r=i;return O.objectLiteral(r)&&(r.tooltip===void 0||O.string(r.tooltip)||nn.is(r.tooltip))&&(r.location===void 0||bn.is(r.location))&&(r.command===void 0||Mt.is(r.command))}e.is=n})(oi||(oi={}));var po;(function(e){function t(i,r,o){var s={position:i,label:r};return o!==void 0&&(s.kind=o),s}e.create=t;function n(i){var r=i;return O.objectLiteral(r)&&ut.is(r.position)&&(O.string(r.label)||O.typedArray(r.label,oi.is))&&(r.kind===void 0||ri.is(r.kind))&&r.textEdits===void 0||O.typedArray(r.textEdits,pt.is)&&(r.tooltip===void 0||O.string(r.tooltip)||nn.is(r.tooltip))&&(r.paddingLeft===void 0||O.boolean(r.paddingLeft))&&(r.paddingRight===void 0||O.boolean(r.paddingRight))}e.is=n})(po||(po={}));var mo;(function(e){function t(n){var i=n;return O.objectLiteral(i)&&Yn.is(i.uri)&&O.string(i.name)}e.is=t})(mo||(mo={}));var lu=[`
`,`\r
`,"\r"],yo;(function(e){function t(o,s,a,c){return new du(o,s,a,c)}e.create=t;function n(o){var s=o;return!!(O.defined(s)&&O.string(s.uri)&&(O.undefined(s.languageId)||O.string(s.languageId))&&O.uinteger(s.lineCount)&&O.func(s.getText)&&O.func(s.positionAt)&&O.func(s.offsetAt))}e.is=n;function i(o,s){for(var a=o.getText(),c=r(s,function(h,N){var j=h.range.start.line-N.range.start.line;return j===0?h.range.start.character-N.range.start.character:j}),u=a.length,p=c.length-1;p>=0;p--){var y=c[p],f=o.offsetAt(y.range.start),g=o.offsetAt(y.range.end);if(g<=u)a=a.substring(0,f)+y.newText+a.substring(g,a.length);else throw new Error("Overlapping edit");u=f}return a}e.applyEdits=i;function r(o,s){if(o.length<=1)return o;var a=o.length/2|0,c=o.slice(0,a),u=o.slice(a);r(c,s),r(u,s);for(var p=0,y=0,f=0;p<c.length&&y<u.length;){var g=s(c[p],u[y]);g<=0?o[f++]=c[p++]:o[f++]=u[y++]}for(;p<c.length;)o[f++]=c[p++];for(;y<u.length;)o[f++]=u[y++];return o}})(yo||(yo={}));var du=function(){function e(t,n,i,r){this._uri=t,this._languageId=n,this._version=i,this._content=r,this._lineOffsets=void 0}return Object.defineProperty(e.prototype,"uri",{get:function(){return this._uri},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"languageId",{get:function(){return this._languageId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),e.prototype.getText=function(t){if(t){var n=this.offsetAt(t.start),i=this.offsetAt(t.end);return this._content.substring(n,i)}return this._content},e.prototype.update=function(t,n){this._content=t.text,this._version=n,this._lineOffsets=void 0},e.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var t=[],n=this._content,i=!0,r=0;r<n.length;r++){i&&(t.push(r),i=!1);var o=n.charAt(r);i=o==="\r"||o===`
`,o==="\r"&&r+1<n.length&&n.charAt(r+1)===`
`&&r++}i&&n.length>0&&t.push(n.length),this._lineOffsets=t}return this._lineOffsets},e.prototype.positionAt=function(t){t=Math.max(Math.min(t,this._content.length),0);var n=this.getLineOffsets(),i=0,r=n.length;if(r===0)return ut.create(0,t);for(;i<r;){var o=Math.floor((i+r)/2);n[o]>t?r=o:i=o+1}var s=i-1;return ut.create(s,t-n[s])},e.prototype.offsetAt=function(t){var n=this.getLineOffsets();if(t.line>=n.length)return this._content.length;if(t.line<0)return 0;var i=n[t.line],r=t.line+1<n.length?n[t.line+1]:this._content.length;return Math.max(Math.min(i+t.character,r),i)},Object.defineProperty(e.prototype,"lineCount",{get:function(){return this.getLineOffsets().length},enumerable:!1,configurable:!0}),e}(),O;(function(e){var t=Object.prototype.toString;function n(g){return typeof g<"u"}e.defined=n;function i(g){return typeof g>"u"}e.undefined=i;function r(g){return g===!0||g===!1}e.boolean=r;function o(g){return t.call(g)==="[object String]"}e.string=o;function s(g){return t.call(g)==="[object Number]"}e.number=s;function a(g,h,N){return t.call(g)==="[object Number]"&&h<=g&&g<=N}e.numberRange=a;function c(g){return t.call(g)==="[object Number]"&&-2147483648<=g&&g<=2147483647}e.integer=c;function u(g){return t.call(g)==="[object Number]"&&0<=g&&g<=2147483647}e.uinteger=u;function p(g){return t.call(g)==="[object Function]"}e.func=p;function y(g){return g!==null&&typeof g=="object"}e.objectLiteral=y;function f(g,h){return Array.isArray(g)&&g.every(h)}e.typedArray=f})(O||(O={}));var fu=Object.freeze({__proto__:null,get DocumentUri(){return Dr},get URI(){return Yn},get integer(){return Sr},get uinteger(){return wn},get Position(){return ut},get Range(){return We},get Location(){return bn},get LocationLink(){return Rr},get Color(){return Zn},get ColorInformation(){return Tr},get ColorPresentation(){return Pr},get FoldingRangeKind(){return Er},get FoldingRange(){return kr},get DiagnosticRelatedInformation(){return ei},get DiagnosticSeverity(){return Fr},get DiagnosticTag(){return Or},get CodeDescription(){return Ir},get Diagnostic(){return Dn},get Command(){return Mt},get TextEdit(){return pt},get ChangeAnnotation(){return Lt},get ChangeAnnotationIdentifier(){return Qe},get AnnotatedTextEdit(){return _t},get TextDocumentEdit(){return Sn},get CreateFile(){return Zt},get RenameFile(){return en},get DeleteFile(){return tn},get WorkspaceEdit(){return ti},WorkspaceChange:uu,get TextDocumentIdentifier(){return Nr},get VersionedTextDocumentIdentifier(){return qr},get OptionalVersionedTextDocumentIdentifier(){return Rn},get TextDocumentItem(){return Mr},get MarkupKind(){return ii},get MarkupContent(){return nn},get CompletionItemKind(){return Lr},get InsertTextFormat(){return $r},get CompletionItemTag(){return Ar},get InsertReplaceEdit(){return jr},get InsertTextMode(){return Hr},get CompletionItemLabelDetails(){return Wr},get CompletionItem(){return Ur},get CompletionList(){return xr},get MarkedString(){return Tn},get Hover(){return Kr},get ParameterInformation(){return zr},get SignatureInformation(){return Gr},get DocumentHighlightKind(){return Br},get DocumentHighlight(){return Vr},get SymbolKind(){return Xr},get SymbolTag(){return Jr},get SymbolInformation(){return Qr},get WorkspaceSymbol(){return Yr},get DocumentSymbol(){return Zr},get CodeActionKind(){return eo},get CodeActionTriggerKind(){return Pn},get CodeActionContext(){return to},get CodeAction(){return no},get CodeLens(){return io},get FormattingOptions(){return ro},get DocumentLink(){return oo},get SelectionRange(){return so},get SemanticTokenTypes(){return ao},get SemanticTokenModifiers(){return co},get SemanticTokens(){return uo},get InlineValueText(){return lo},get InlineValueVariableLookup(){return fo},get InlineValueEvaluatableExpression(){return ho},get InlineValueContext(){return go},get InlayHintKind(){return ri},get InlayHintLabelPart(){return oi},get InlayHint(){return po},get WorkspaceFolder(){return mo},EOL:lu,get TextDocument(){return yo}}),vo=He.getAugmentedNamespace(fu),$e={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProtocolNotificationType=e.ProtocolNotificationType0=e.ProtocolRequestType=e.ProtocolRequestType0=e.RegistrationType=e.MessageDirection=void 0;const t=qt;(function(a){a.clientToServer="clientToServer",a.serverToClient="serverToClient",a.both="both"})(e.MessageDirection||(e.MessageDirection={}));class n{constructor(c){this.method=c}}e.RegistrationType=n;class i extends t.RequestType0{constructor(c){super(c)}}e.ProtocolRequestType0=i;class r extends t.RequestType{constructor(c){super(c,t.ParameterStructures.byName)}}e.ProtocolRequestType=r;class o extends t.NotificationType0{constructor(c){super(c)}}e.ProtocolNotificationType0=o;class s extends t.NotificationType{constructor(c){super(c,t.ParameterStructures.byName)}}e.ProtocolNotificationType=s})($e);var Us={},Ue={};Object.defineProperty(Ue,"__esModule",{value:!0}),Ue.objectLiteral=Ue.typedArray=Ue.stringArray=Ue.array=Ue.func=Ue.error=Ue.number=Ue.string=Ue.boolean=void 0;function hu(e){return e===!0||e===!1}Ue.boolean=hu;function xs(e){return typeof e=="string"||e instanceof String}Ue.string=xs;function gu(e){return typeof e=="number"||e instanceof Number}Ue.number=gu;function pu(e){return e instanceof Error}Ue.error=pu;function mu(e){return typeof e=="function"}Ue.func=mu;function Ks(e){return Array.isArray(e)}Ue.array=Ks;function yu(e){return Ks(e)&&e.every(t=>xs(t))}Ue.stringArray=yu;function vu(e,t){return Array.isArray(e)&&e.every(t)}Ue.typedArray=vu;function Cu(e){return e!==null&&typeof e=="object"}Ue.objectLiteral=Cu;var zs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ImplementationRequest=void 0;const t=$e;(function(n){n.method="textDocument/implementation",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.ImplementationRequest||(e.ImplementationRequest={}))})(zs);var Gs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TypeDefinitionRequest=void 0;const t=$e;(function(n){n.method="textDocument/typeDefinition",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.TypeDefinitionRequest||(e.TypeDefinitionRequest={}))})(Gs);var Bs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DidChangeWorkspaceFoldersNotification=e.WorkspaceFoldersRequest=void 0;const t=$e;(function(n){n.method="workspace/workspaceFolders",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType0(n.method)})(e.WorkspaceFoldersRequest||(e.WorkspaceFoldersRequest={})),function(n){n.method="workspace/didChangeWorkspaceFolders",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolNotificationType(n.method)}(e.DidChangeWorkspaceFoldersNotification||(e.DidChangeWorkspaceFoldersNotification={}))})(Bs);var Vs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ConfigurationRequest=void 0;const t=$e;(function(n){n.method="workspace/configuration",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType(n.method)})(e.ConfigurationRequest||(e.ConfigurationRequest={}))})(Vs);var Xs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ColorPresentationRequest=e.DocumentColorRequest=void 0;const t=$e;(function(n){n.method="textDocument/documentColor",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.DocumentColorRequest||(e.DocumentColorRequest={})),function(n){n.method="textDocument/colorPresentation",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.ColorPresentationRequest||(e.ColorPresentationRequest={}))})(Xs);var Js={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FoldingRangeRequest=void 0;const t=$e;(function(n){n.method="textDocument/foldingRange",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.FoldingRangeRequest||(e.FoldingRangeRequest={}))})(Js);var Qs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DeclarationRequest=void 0;const t=$e;(function(n){n.method="textDocument/declaration",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.DeclarationRequest||(e.DeclarationRequest={}))})(Qs);var Ys={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SelectionRangeRequest=void 0;const t=$e;(function(n){n.method="textDocument/selectionRange",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.SelectionRangeRequest||(e.SelectionRangeRequest={}))})(Ys);var Zs={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WorkDoneProgressCancelNotification=e.WorkDoneProgressCreateRequest=e.WorkDoneProgress=void 0;const t=qt,n=$e;(function(i){i.type=new t.ProgressType;function r(o){return o===i.type}i.is=r})(e.WorkDoneProgress||(e.WorkDoneProgress={})),function(i){i.method="window/workDoneProgress/create",i.messageDirection=n.MessageDirection.serverToClient,i.type=new n.ProtocolRequestType(i.method)}(e.WorkDoneProgressCreateRequest||(e.WorkDoneProgressCreateRequest={})),function(i){i.method="window/workDoneProgress/cancel",i.messageDirection=n.MessageDirection.clientToServer,i.type=new n.ProtocolNotificationType(i.method)}(e.WorkDoneProgressCancelNotification||(e.WorkDoneProgressCancelNotification={}))})(Zs);var ea={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CallHierarchyOutgoingCallsRequest=e.CallHierarchyIncomingCallsRequest=e.CallHierarchyPrepareRequest=void 0;const t=$e;(function(n){n.method="textDocument/prepareCallHierarchy",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.CallHierarchyPrepareRequest||(e.CallHierarchyPrepareRequest={})),function(n){n.method="callHierarchy/incomingCalls",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.CallHierarchyIncomingCallsRequest||(e.CallHierarchyIncomingCallsRequest={})),function(n){n.method="callHierarchy/outgoingCalls",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.CallHierarchyOutgoingCallsRequest||(e.CallHierarchyOutgoingCallsRequest={}))})(ea);var ta={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SemanticTokensRefreshRequest=e.SemanticTokensRangeRequest=e.SemanticTokensDeltaRequest=e.SemanticTokensRequest=e.SemanticTokensRegistrationType=e.TokenFormat=void 0;const t=$e;(function(i){i.Relative="relative"})(e.TokenFormat||(e.TokenFormat={}));var n;(function(i){i.method="textDocument/semanticTokens",i.type=new t.RegistrationType(i.method)})(n=e.SemanticTokensRegistrationType||(e.SemanticTokensRegistrationType={})),function(i){i.method="textDocument/semanticTokens/full",i.messageDirection=t.MessageDirection.clientToServer,i.type=new t.ProtocolRequestType(i.method),i.registrationMethod=n.method}(e.SemanticTokensRequest||(e.SemanticTokensRequest={})),function(i){i.method="textDocument/semanticTokens/full/delta",i.messageDirection=t.MessageDirection.clientToServer,i.type=new t.ProtocolRequestType(i.method),i.registrationMethod=n.method}(e.SemanticTokensDeltaRequest||(e.SemanticTokensDeltaRequest={})),function(i){i.method="textDocument/semanticTokens/range",i.messageDirection=t.MessageDirection.clientToServer,i.type=new t.ProtocolRequestType(i.method),i.registrationMethod=n.method}(e.SemanticTokensRangeRequest||(e.SemanticTokensRangeRequest={})),function(i){i.method="workspace/semanticTokens/refresh",i.messageDirection=t.MessageDirection.serverToClient,i.type=new t.ProtocolRequestType0(i.method)}(e.SemanticTokensRefreshRequest||(e.SemanticTokensRefreshRequest={}))})(ta);var na={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ShowDocumentRequest=void 0;const t=$e;(function(n){n.method="window/showDocument",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType(n.method)})(e.ShowDocumentRequest||(e.ShowDocumentRequest={}))})(na);var ia={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LinkedEditingRangeRequest=void 0;const t=$e;(function(n){n.method="textDocument/linkedEditingRange",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.LinkedEditingRangeRequest||(e.LinkedEditingRangeRequest={}))})(ia);var ra={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WillDeleteFilesRequest=e.DidDeleteFilesNotification=e.DidRenameFilesNotification=e.WillRenameFilesRequest=e.DidCreateFilesNotification=e.WillCreateFilesRequest=e.FileOperationPatternKind=void 0;const t=$e;(function(n){n.file="file",n.folder="folder"})(e.FileOperationPatternKind||(e.FileOperationPatternKind={})),function(n){n.method="workspace/willCreateFiles",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.WillCreateFilesRequest||(e.WillCreateFilesRequest={})),function(n){n.method="workspace/didCreateFiles",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolNotificationType(n.method)}(e.DidCreateFilesNotification||(e.DidCreateFilesNotification={})),function(n){n.method="workspace/willRenameFiles",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.WillRenameFilesRequest||(e.WillRenameFilesRequest={})),function(n){n.method="workspace/didRenameFiles",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolNotificationType(n.method)}(e.DidRenameFilesNotification||(e.DidRenameFilesNotification={})),function(n){n.method="workspace/didDeleteFiles",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolNotificationType(n.method)}(e.DidDeleteFilesNotification||(e.DidDeleteFilesNotification={})),function(n){n.method="workspace/willDeleteFiles",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.WillDeleteFilesRequest||(e.WillDeleteFilesRequest={}))})(ra);var oa={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.MonikerRequest=e.MonikerKind=e.UniquenessLevel=void 0;const t=$e;(function(n){n.document="document",n.project="project",n.group="group",n.scheme="scheme",n.global="global"})(e.UniquenessLevel||(e.UniquenessLevel={})),function(n){n.$import="import",n.$export="export",n.local="local"}(e.MonikerKind||(e.MonikerKind={})),function(n){n.method="textDocument/moniker",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.MonikerRequest||(e.MonikerRequest={}))})(oa);var sa={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TypeHierarchySubtypesRequest=e.TypeHierarchySupertypesRequest=e.TypeHierarchyPrepareRequest=void 0;const t=$e;(function(n){n.method="textDocument/prepareTypeHierarchy",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.TypeHierarchyPrepareRequest||(e.TypeHierarchyPrepareRequest={})),function(n){n.method="typeHierarchy/supertypes",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.TypeHierarchySupertypesRequest||(e.TypeHierarchySupertypesRequest={})),function(n){n.method="typeHierarchy/subtypes",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.TypeHierarchySubtypesRequest||(e.TypeHierarchySubtypesRequest={}))})(sa);var aa={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InlineValueRefreshRequest=e.InlineValueRequest=void 0;const t=$e;(function(n){n.method="textDocument/inlineValue",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.InlineValueRequest||(e.InlineValueRequest={})),function(n){n.method="workspace/inlineValue/refresh",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType0(n.method)}(e.InlineValueRefreshRequest||(e.InlineValueRefreshRequest={}))})(aa);var ca={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.InlayHintRefreshRequest=e.InlayHintResolveRequest=e.InlayHintRequest=void 0;const t=$e;(function(n){n.method="textDocument/inlayHint",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)})(e.InlayHintRequest||(e.InlayHintRequest={})),function(n){n.method="inlayHint/resolve",n.messageDirection=t.MessageDirection.clientToServer,n.type=new t.ProtocolRequestType(n.method)}(e.InlayHintResolveRequest||(e.InlayHintResolveRequest={})),function(n){n.method="workspace/inlayHint/refresh",n.messageDirection=t.MessageDirection.serverToClient,n.type=new t.ProtocolRequestType0(n.method)}(e.InlayHintRefreshRequest||(e.InlayHintRefreshRequest={}))})(ca);var ua={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DiagnosticRefreshRequest=e.WorkspaceDiagnosticRequest=e.DocumentDiagnosticRequest=e.DocumentDiagnosticReportKind=e.DiagnosticServerCancellationData=void 0;const t=qt,n=Ue,i=$e;(function(r){function o(s){const a=s;return a&&n.boolean(a.retriggerRequest)}r.is=o})(e.DiagnosticServerCancellationData||(e.DiagnosticServerCancellationData={})),function(r){r.Full="full",r.Unchanged="unchanged"}(e.DocumentDiagnosticReportKind||(e.DocumentDiagnosticReportKind={})),function(r){r.method="textDocument/diagnostic",r.messageDirection=i.MessageDirection.clientToServer,r.type=new i.ProtocolRequestType(r.method),r.partialResult=new t.ProgressType}(e.DocumentDiagnosticRequest||(e.DocumentDiagnosticRequest={})),function(r){r.method="workspace/diagnostic",r.messageDirection=i.MessageDirection.clientToServer,r.type=new i.ProtocolRequestType(r.method),r.partialResult=new t.ProgressType}(e.WorkspaceDiagnosticRequest||(e.WorkspaceDiagnosticRequest={})),function(r){r.method="workspace/diagnostic/refresh",r.messageDirection=i.MessageDirection.serverToClient,r.type=new i.ProtocolRequestType0(r.method)}(e.DiagnosticRefreshRequest||(e.DiagnosticRefreshRequest={}))})(ua);var la={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DidCloseNotebookDocumentNotification=e.DidSaveNotebookDocumentNotification=e.DidChangeNotebookDocumentNotification=e.NotebookCellArrayChange=e.DidOpenNotebookDocumentNotification=e.NotebookDocumentSyncRegistrationType=e.NotebookDocument=e.NotebookCell=e.ExecutionSummary=e.NotebookCellKind=void 0;const t=vo,n=Ue,i=$e;var r;(function(c){c.Markup=1,c.Code=2;function u(p){return p===1||p===2}c.is=u})(r=e.NotebookCellKind||(e.NotebookCellKind={}));var o;(function(c){function u(f,g){const h={executionOrder:f};return(g===!0||g===!1)&&(h.success=g),h}c.create=u;function p(f){const g=f;return n.objectLiteral(g)&&t.uinteger.is(g.executionOrder)&&(g.success===void 0||n.boolean(g.success))}c.is=p;function y(f,g){return f===g?!0:f==null||g===null||g===void 0?!1:f.executionOrder===g.executionOrder&&f.success===g.success}c.equals=y})(o=e.ExecutionSummary||(e.ExecutionSummary={}));var s;(function(c){function u(g,h){return{kind:g,document:h}}c.create=u;function p(g){const h=g;return n.objectLiteral(h)&&r.is(h.kind)&&t.DocumentUri.is(h.document)&&(h.metadata===void 0||n.objectLiteral(h.metadata))}c.is=p;function y(g,h){const N=new Set;return g.document!==h.document&&N.add("document"),g.kind!==h.kind&&N.add("kind"),g.executionSummary!==h.executionSummary&&N.add("executionSummary"),(g.metadata!==void 0||h.metadata!==void 0)&&!f(g.metadata,h.metadata)&&N.add("metadata"),(g.executionSummary!==void 0||h.executionSummary!==void 0)&&!o.equals(g.executionSummary,h.executionSummary)&&N.add("executionSummary"),N}c.diff=y;function f(g,h){if(g===h)return!0;if(g==null||h===null||h===void 0||typeof g!=typeof h||typeof g!="object")return!1;const N=Array.isArray(g),j=Array.isArray(h);if(N!==j)return!1;if(N&&j){if(g.length!==h.length)return!1;for(let X=0;X<g.length;X++)if(!f(g[X],h[X]))return!1}if(n.objectLiteral(g)&&n.objectLiteral(h)){const X=Object.keys(g),G=Object.keys(h);if(X.length!==G.length||(X.sort(),G.sort(),!f(X,G)))return!1;for(let S=0;S<X.length;S++){const C=X[S];if(!f(g[C],h[C]))return!1}}return!0}})(s=e.NotebookCell||(e.NotebookCell={})),function(c){function u(y,f,g,h){return{uri:y,notebookType:f,version:g,cells:h}}c.create=u;function p(y){const f=y;return n.objectLiteral(f)&&n.string(f.uri)&&t.integer.is(f.version)&&n.typedArray(f.cells,s.is)}c.is=p}(e.NotebookDocument||(e.NotebookDocument={}));var a;(function(c){c.method="notebookDocument/sync",c.messageDirection=i.MessageDirection.clientToServer,c.type=new i.RegistrationType(c.method)})(a=e.NotebookDocumentSyncRegistrationType||(e.NotebookDocumentSyncRegistrationType={})),function(c){c.method="notebookDocument/didOpen",c.messageDirection=i.MessageDirection.clientToServer,c.type=new i.ProtocolNotificationType(c.method),c.registrationMethod=a.method}(e.DidOpenNotebookDocumentNotification||(e.DidOpenNotebookDocumentNotification={})),function(c){function u(y){const f=y;return n.objectLiteral(f)&&t.uinteger.is(f.start)&&t.uinteger.is(f.deleteCount)&&(f.cells===void 0||n.typedArray(f.cells,s.is))}c.is=u;function p(y,f,g){const h={start:y,deleteCount:f};return g!==void 0&&(h.cells=g),h}c.create=p}(e.NotebookCellArrayChange||(e.NotebookCellArrayChange={})),function(c){c.method="notebookDocument/didChange",c.messageDirection=i.MessageDirection.clientToServer,c.type=new i.ProtocolNotificationType(c.method),c.registrationMethod=a.method}(e.DidChangeNotebookDocumentNotification||(e.DidChangeNotebookDocumentNotification={})),function(c){c.method="notebookDocument/didSave",c.messageDirection=i.MessageDirection.clientToServer,c.type=new i.ProtocolNotificationType(c.method),c.registrationMethod=a.method}(e.DidSaveNotebookDocumentNotification||(e.DidSaveNotebookDocumentNotification={})),function(c){c.method="notebookDocument/didClose",c.messageDirection=i.MessageDirection.clientToServer,c.type=new i.ProtocolNotificationType(c.method),c.registrationMethod=a.method}(e.DidCloseNotebookDocumentNotification||(e.DidCloseNotebookDocumentNotification={}))})(la),function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WorkspaceSymbolRequest=e.CodeActionResolveRequest=e.CodeActionRequest=e.DocumentSymbolRequest=e.DocumentHighlightRequest=e.ReferencesRequest=e.DefinitionRequest=e.SignatureHelpRequest=e.SignatureHelpTriggerKind=e.HoverRequest=e.CompletionResolveRequest=e.CompletionRequest=e.CompletionTriggerKind=e.PublishDiagnosticsNotification=e.WatchKind=e.RelativePattern=e.FileChangeType=e.DidChangeWatchedFilesNotification=e.WillSaveTextDocumentWaitUntilRequest=e.WillSaveTextDocumentNotification=e.TextDocumentSaveReason=e.DidSaveTextDocumentNotification=e.DidCloseTextDocumentNotification=e.DidChangeTextDocumentNotification=e.TextDocumentContentChangeEvent=e.DidOpenTextDocumentNotification=e.TextDocumentSyncKind=e.TelemetryEventNotification=e.LogMessageNotification=e.ShowMessageRequest=e.ShowMessageNotification=e.MessageType=e.DidChangeConfigurationNotification=e.ExitNotification=e.ShutdownRequest=e.InitializedNotification=e.InitializeErrorCodes=e.InitializeRequest=e.WorkDoneProgressOptions=e.TextDocumentRegistrationOptions=e.StaticRegistrationOptions=e.PositionEncodingKind=e.FailureHandlingKind=e.ResourceOperationKind=e.UnregistrationRequest=e.RegistrationRequest=e.DocumentSelector=e.NotebookCellTextDocumentFilter=e.NotebookDocumentFilter=e.TextDocumentFilter=void 0,e.TypeHierarchySubtypesRequest=e.TypeHierarchyPrepareRequest=e.MonikerRequest=e.MonikerKind=e.UniquenessLevel=e.WillDeleteFilesRequest=e.DidDeleteFilesNotification=e.WillRenameFilesRequest=e.DidRenameFilesNotification=e.WillCreateFilesRequest=e.DidCreateFilesNotification=e.FileOperationPatternKind=e.LinkedEditingRangeRequest=e.ShowDocumentRequest=e.SemanticTokensRegistrationType=e.SemanticTokensRefreshRequest=e.SemanticTokensRangeRequest=e.SemanticTokensDeltaRequest=e.SemanticTokensRequest=e.TokenFormat=e.CallHierarchyPrepareRequest=e.CallHierarchyOutgoingCallsRequest=e.CallHierarchyIncomingCallsRequest=e.WorkDoneProgressCancelNotification=e.WorkDoneProgressCreateRequest=e.WorkDoneProgress=e.SelectionRangeRequest=e.DeclarationRequest=e.FoldingRangeRequest=e.ColorPresentationRequest=e.DocumentColorRequest=e.ConfigurationRequest=e.DidChangeWorkspaceFoldersNotification=e.WorkspaceFoldersRequest=e.TypeDefinitionRequest=e.ImplementationRequest=e.ApplyWorkspaceEditRequest=e.ExecuteCommandRequest=e.PrepareRenameRequest=e.RenameRequest=e.PrepareSupportDefaultBehavior=e.DocumentOnTypeFormattingRequest=e.DocumentRangeFormattingRequest=e.DocumentFormattingRequest=e.DocumentLinkResolveRequest=e.DocumentLinkRequest=e.CodeLensRefreshRequest=e.CodeLensResolveRequest=e.CodeLensRequest=e.WorkspaceSymbolResolveRequest=void 0,e.DidCloseNotebookDocumentNotification=e.DidSaveNotebookDocumentNotification=e.DidChangeNotebookDocumentNotification=e.NotebookCellArrayChange=e.DidOpenNotebookDocumentNotification=e.NotebookDocumentSyncRegistrationType=e.NotebookDocument=e.NotebookCell=e.ExecutionSummary=e.NotebookCellKind=e.DiagnosticRefreshRequest=e.WorkspaceDiagnosticRequest=e.DocumentDiagnosticRequest=e.DocumentDiagnosticReportKind=e.DiagnosticServerCancellationData=e.InlayHintRefreshRequest=e.InlayHintResolveRequest=e.InlayHintRequest=e.InlineValueRefreshRequest=e.InlineValueRequest=e.TypeHierarchySupertypesRequest=void 0;const t=$e,n=vo,i=Ue,r=zs;Object.defineProperty(e,"ImplementationRequest",{enumerable:!0,get:function(){return r.ImplementationRequest}});const o=Gs;Object.defineProperty(e,"TypeDefinitionRequest",{enumerable:!0,get:function(){return o.TypeDefinitionRequest}});const s=Bs;Object.defineProperty(e,"WorkspaceFoldersRequest",{enumerable:!0,get:function(){return s.WorkspaceFoldersRequest}}),Object.defineProperty(e,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:function(){return s.DidChangeWorkspaceFoldersNotification}});const a=Vs;Object.defineProperty(e,"ConfigurationRequest",{enumerable:!0,get:function(){return a.ConfigurationRequest}});const c=Xs;Object.defineProperty(e,"DocumentColorRequest",{enumerable:!0,get:function(){return c.DocumentColorRequest}}),Object.defineProperty(e,"ColorPresentationRequest",{enumerable:!0,get:function(){return c.ColorPresentationRequest}});const u=Js;Object.defineProperty(e,"FoldingRangeRequest",{enumerable:!0,get:function(){return u.FoldingRangeRequest}});const p=Qs;Object.defineProperty(e,"DeclarationRequest",{enumerable:!0,get:function(){return p.DeclarationRequest}});const y=Ys;Object.defineProperty(e,"SelectionRangeRequest",{enumerable:!0,get:function(){return y.SelectionRangeRequest}});const f=Zs;Object.defineProperty(e,"WorkDoneProgress",{enumerable:!0,get:function(){return f.WorkDoneProgress}}),Object.defineProperty(e,"WorkDoneProgressCreateRequest",{enumerable:!0,get:function(){return f.WorkDoneProgressCreateRequest}}),Object.defineProperty(e,"WorkDoneProgressCancelNotification",{enumerable:!0,get:function(){return f.WorkDoneProgressCancelNotification}});const g=ea;Object.defineProperty(e,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:function(){return g.CallHierarchyIncomingCallsRequest}}),Object.defineProperty(e,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:function(){return g.CallHierarchyOutgoingCallsRequest}}),Object.defineProperty(e,"CallHierarchyPrepareRequest",{enumerable:!0,get:function(){return g.CallHierarchyPrepareRequest}});const h=ta;Object.defineProperty(e,"TokenFormat",{enumerable:!0,get:function(){return h.TokenFormat}}),Object.defineProperty(e,"SemanticTokensRequest",{enumerable:!0,get:function(){return h.SemanticTokensRequest}}),Object.defineProperty(e,"SemanticTokensDeltaRequest",{enumerable:!0,get:function(){return h.SemanticTokensDeltaRequest}}),Object.defineProperty(e,"SemanticTokensRangeRequest",{enumerable:!0,get:function(){return h.SemanticTokensRangeRequest}}),Object.defineProperty(e,"SemanticTokensRefreshRequest",{enumerable:!0,get:function(){return h.SemanticTokensRefreshRequest}}),Object.defineProperty(e,"SemanticTokensRegistrationType",{enumerable:!0,get:function(){return h.SemanticTokensRegistrationType}});const N=na;Object.defineProperty(e,"ShowDocumentRequest",{enumerable:!0,get:function(){return N.ShowDocumentRequest}});const j=ia;Object.defineProperty(e,"LinkedEditingRangeRequest",{enumerable:!0,get:function(){return j.LinkedEditingRangeRequest}});const X=ra;Object.defineProperty(e,"FileOperationPatternKind",{enumerable:!0,get:function(){return X.FileOperationPatternKind}}),Object.defineProperty(e,"DidCreateFilesNotification",{enumerable:!0,get:function(){return X.DidCreateFilesNotification}}),Object.defineProperty(e,"WillCreateFilesRequest",{enumerable:!0,get:function(){return X.WillCreateFilesRequest}}),Object.defineProperty(e,"DidRenameFilesNotification",{enumerable:!0,get:function(){return X.DidRenameFilesNotification}}),Object.defineProperty(e,"WillRenameFilesRequest",{enumerable:!0,get:function(){return X.WillRenameFilesRequest}}),Object.defineProperty(e,"DidDeleteFilesNotification",{enumerable:!0,get:function(){return X.DidDeleteFilesNotification}}),Object.defineProperty(e,"WillDeleteFilesRequest",{enumerable:!0,get:function(){return X.WillDeleteFilesRequest}});const G=oa;Object.defineProperty(e,"UniquenessLevel",{enumerable:!0,get:function(){return G.UniquenessLevel}}),Object.defineProperty(e,"MonikerKind",{enumerable:!0,get:function(){return G.MonikerKind}}),Object.defineProperty(e,"MonikerRequest",{enumerable:!0,get:function(){return G.MonikerRequest}});const S=sa;Object.defineProperty(e,"TypeHierarchyPrepareRequest",{enumerable:!0,get:function(){return S.TypeHierarchyPrepareRequest}}),Object.defineProperty(e,"TypeHierarchySubtypesRequest",{enumerable:!0,get:function(){return S.TypeHierarchySubtypesRequest}}),Object.defineProperty(e,"TypeHierarchySupertypesRequest",{enumerable:!0,get:function(){return S.TypeHierarchySupertypesRequest}});const C=aa;Object.defineProperty(e,"InlineValueRequest",{enumerable:!0,get:function(){return C.InlineValueRequest}}),Object.defineProperty(e,"InlineValueRefreshRequest",{enumerable:!0,get:function(){return C.InlineValueRefreshRequest}});const M=ca;Object.defineProperty(e,"InlayHintRequest",{enumerable:!0,get:function(){return M.InlayHintRequest}}),Object.defineProperty(e,"InlayHintResolveRequest",{enumerable:!0,get:function(){return M.InlayHintResolveRequest}}),Object.defineProperty(e,"InlayHintRefreshRequest",{enumerable:!0,get:function(){return M.InlayHintRefreshRequest}});const W=ua;Object.defineProperty(e,"DiagnosticServerCancellationData",{enumerable:!0,get:function(){return W.DiagnosticServerCancellationData}}),Object.defineProperty(e,"DocumentDiagnosticReportKind",{enumerable:!0,get:function(){return W.DocumentDiagnosticReportKind}}),Object.defineProperty(e,"DocumentDiagnosticRequest",{enumerable:!0,get:function(){return W.DocumentDiagnosticRequest}}),Object.defineProperty(e,"WorkspaceDiagnosticRequest",{enumerable:!0,get:function(){return W.WorkspaceDiagnosticRequest}}),Object.defineProperty(e,"DiagnosticRefreshRequest",{enumerable:!0,get:function(){return W.DiagnosticRefreshRequest}});const I=la;Object.defineProperty(e,"NotebookCellKind",{enumerable:!0,get:function(){return I.NotebookCellKind}}),Object.defineProperty(e,"ExecutionSummary",{enumerable:!0,get:function(){return I.ExecutionSummary}}),Object.defineProperty(e,"NotebookCell",{enumerable:!0,get:function(){return I.NotebookCell}}),Object.defineProperty(e,"NotebookDocument",{enumerable:!0,get:function(){return I.NotebookDocument}}),Object.defineProperty(e,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:function(){return I.NotebookDocumentSyncRegistrationType}}),Object.defineProperty(e,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:function(){return I.DidOpenNotebookDocumentNotification}}),Object.defineProperty(e,"NotebookCellArrayChange",{enumerable:!0,get:function(){return I.NotebookCellArrayChange}}),Object.defineProperty(e,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:function(){return I.DidChangeNotebookDocumentNotification}}),Object.defineProperty(e,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:function(){return I.DidSaveNotebookDocumentNotification}}),Object.defineProperty(e,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:function(){return I.DidCloseNotebookDocumentNotification}});var P;(function(d){function v(R){const k=R;return i.string(k.language)||i.string(k.scheme)||i.string(k.pattern)}d.is=v})(P=e.TextDocumentFilter||(e.TextDocumentFilter={}));var L;(function(d){function v(R){const k=R;return i.objectLiteral(k)&&(i.string(k.notebookType)||i.string(k.scheme)||i.string(k.pattern))}d.is=v})(L=e.NotebookDocumentFilter||(e.NotebookDocumentFilter={}));var V;(function(d){function v(R){const k=R;return i.objectLiteral(k)&&(i.string(k.notebook)||L.is(k.notebook))&&(k.language===void 0||i.string(k.language))}d.is=v})(V=e.NotebookCellTextDocumentFilter||(e.NotebookCellTextDocumentFilter={}));var D;(function(d){function v(R){if(!Array.isArray(R))return!1;for(let k of R)if(!i.string(k)&&!P.is(k)&&!V.is(k))return!1;return!0}d.is=v})(D=e.DocumentSelector||(e.DocumentSelector={})),function(d){d.method="client/registerCapability",d.messageDirection=t.MessageDirection.serverToClient,d.type=new t.ProtocolRequestType(d.method)}(e.RegistrationRequest||(e.RegistrationRequest={})),function(d){d.method="client/unregisterCapability",d.messageDirection=t.MessageDirection.serverToClient,d.type=new t.ProtocolRequestType(d.method)}(e.UnregistrationRequest||(e.UnregistrationRequest={})),function(d){d.Create="create",d.Rename="rename",d.Delete="delete"}(e.ResourceOperationKind||(e.ResourceOperationKind={})),function(d){d.Abort="abort",d.Transactional="transactional",d.TextOnlyTransactional="textOnlyTransactional",d.Undo="undo"}(e.FailureHandlingKind||(e.FailureHandlingKind={})),function(d){d.UTF8="utf-8",d.UTF16="utf-16",d.UTF32="utf-32"}(e.PositionEncodingKind||(e.PositionEncodingKind={})),function(d){function v(R){const k=R;return k&&i.string(k.id)&&k.id.length>0}d.hasId=v}(e.StaticRegistrationOptions||(e.StaticRegistrationOptions={})),function(d){function v(R){const k=R;return k&&(k.documentSelector===null||D.is(k.documentSelector))}d.is=v}(e.TextDocumentRegistrationOptions||(e.TextDocumentRegistrationOptions={})),function(d){function v(k){const F=k;return i.objectLiteral(F)&&(F.workDoneProgress===void 0||i.boolean(F.workDoneProgress))}d.is=v;function R(k){const F=k;return F&&i.boolean(F.workDoneProgress)}d.hasWorkDoneProgress=R}(e.WorkDoneProgressOptions||(e.WorkDoneProgressOptions={})),function(d){d.method="initialize",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolRequestType(d.method)}(e.InitializeRequest||(e.InitializeRequest={})),function(d){d.unknownProtocolVersion=1}(e.InitializeErrorCodes||(e.InitializeErrorCodes={})),function(d){d.method="initialized",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolNotificationType(d.method)}(e.InitializedNotification||(e.InitializedNotification={})),function(d){d.method="shutdown",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolRequestType0(d.method)}(e.ShutdownRequest||(e.ShutdownRequest={})),function(d){d.method="exit",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolNotificationType0(d.method)}(e.ExitNotification||(e.ExitNotification={})),function(d){d.method="workspace/didChangeConfiguration",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolNotificationType(d.method)}(e.DidChangeConfigurationNotification||(e.DidChangeConfigurationNotification={})),function(d){d.Error=1,d.Warning=2,d.Info=3,d.Log=4}(e.MessageType||(e.MessageType={})),function(d){d.method="window/showMessage",d.messageDirection=t.MessageDirection.serverToClient,d.type=new t.ProtocolNotificationType(d.method)}(e.ShowMessageNotification||(e.ShowMessageNotification={})),function(d){d.method="window/showMessageRequest",d.messageDirection=t.MessageDirection.serverToClient,d.type=new t.ProtocolRequestType(d.method)}(e.ShowMessageRequest||(e.ShowMessageRequest={})),function(d){d.method="window/logMessage",d.messageDirection=t.MessageDirection.serverToClient,d.type=new t.ProtocolNotificationType(d.method)}(e.LogMessageNotification||(e.LogMessageNotification={})),function(d){d.method="telemetry/event",d.messageDirection=t.MessageDirection.serverToClient,d.type=new t.ProtocolNotificationType(d.method)}(e.TelemetryEventNotification||(e.TelemetryEventNotification={})),function(d){d.None=0,d.Full=1,d.Incremental=2}(e.TextDocumentSyncKind||(e.TextDocumentSyncKind={})),function(d){d.method="textDocument/didOpen",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolNotificationType(d.method)}(e.DidOpenTextDocumentNotification||(e.DidOpenTextDocumentNotification={})),function(d){function v(k){let F=k;return F!=null&&typeof F.text=="string"&&F.range!==void 0&&(F.rangeLength===void 0||typeof F.rangeLength=="number")}d.isIncremental=v;function R(k){let F=k;return F!=null&&typeof F.text=="string"&&F.range===void 0&&F.rangeLength===void 0}d.isFull=R}(e.TextDocumentContentChangeEvent||(e.TextDocumentContentChangeEvent={})),function(d){d.method="textDocument/didChange",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolNotificationType(d.method)}(e.DidChangeTextDocumentNotification||(e.DidChangeTextDocumentNotification={})),function(d){d.method="textDocument/didClose",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolNotificationType(d.method)}(e.DidCloseTextDocumentNotification||(e.DidCloseTextDocumentNotification={})),function(d){d.method="textDocument/didSave",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolNotificationType(d.method)}(e.DidSaveTextDocumentNotification||(e.DidSaveTextDocumentNotification={})),function(d){d.Manual=1,d.AfterDelay=2,d.FocusOut=3}(e.TextDocumentSaveReason||(e.TextDocumentSaveReason={})),function(d){d.method="textDocument/willSave",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolNotificationType(d.method)}(e.WillSaveTextDocumentNotification||(e.WillSaveTextDocumentNotification={})),function(d){d.method="textDocument/willSaveWaitUntil",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolRequestType(d.method)}(e.WillSaveTextDocumentWaitUntilRequest||(e.WillSaveTextDocumentWaitUntilRequest={})),function(d){d.method="workspace/didChangeWatchedFiles",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolNotificationType(d.method)}(e.DidChangeWatchedFilesNotification||(e.DidChangeWatchedFilesNotification={})),function(d){d.Created=1,d.Changed=2,d.Deleted=3}(e.FileChangeType||(e.FileChangeType={})),function(d){function v(R){const k=R;return i.objectLiteral(k)&&(n.URI.is(k.baseUri)||n.WorkspaceFolder.is(k.baseUri))&&i.string(k.pattern)}d.is=v}(e.RelativePattern||(e.RelativePattern={})),function(d){d.Create=1,d.Change=2,d.Delete=4}(e.WatchKind||(e.WatchKind={})),function(d){d.method="textDocument/publishDiagnostics",d.messageDirection=t.MessageDirection.serverToClient,d.type=new t.ProtocolNotificationType(d.method)}(e.PublishDiagnosticsNotification||(e.PublishDiagnosticsNotification={})),function(d){d.Invoked=1,d.TriggerCharacter=2,d.TriggerForIncompleteCompletions=3}(e.CompletionTriggerKind||(e.CompletionTriggerKind={})),function(d){d.method="textDocument/completion",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolRequestType(d.method)}(e.CompletionRequest||(e.CompletionRequest={})),function(d){d.method="completionItem/resolve",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolRequestType(d.method)}(e.CompletionResolveRequest||(e.CompletionResolveRequest={})),function(d){d.method="textDocument/hover",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolRequestType(d.method)}(e.HoverRequest||(e.HoverRequest={})),function(d){d.Invoked=1,d.TriggerCharacter=2,d.ContentChange=3}(e.SignatureHelpTriggerKind||(e.SignatureHelpTriggerKind={})),function(d){d.method="textDocument/signatureHelp",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolRequestType(d.method)}(e.SignatureHelpRequest||(e.SignatureHelpRequest={})),function(d){d.method="textDocument/definition",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolRequestType(d.method)}(e.DefinitionRequest||(e.DefinitionRequest={})),function(d){d.method="textDocument/references",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolRequestType(d.method)}(e.ReferencesRequest||(e.ReferencesRequest={})),function(d){d.method="textDocument/documentHighlight",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolRequestType(d.method)}(e.DocumentHighlightRequest||(e.DocumentHighlightRequest={})),function(d){d.method="textDocument/documentSymbol",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolRequestType(d.method)}(e.DocumentSymbolRequest||(e.DocumentSymbolRequest={})),function(d){d.method="textDocument/codeAction",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolRequestType(d.method)}(e.CodeActionRequest||(e.CodeActionRequest={})),function(d){d.method="codeAction/resolve",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolRequestType(d.method)}(e.CodeActionResolveRequest||(e.CodeActionResolveRequest={})),function(d){d.method="workspace/symbol",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolRequestType(d.method)}(e.WorkspaceSymbolRequest||(e.WorkspaceSymbolRequest={})),function(d){d.method="workspaceSymbol/resolve",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolRequestType(d.method)}(e.WorkspaceSymbolResolveRequest||(e.WorkspaceSymbolResolveRequest={})),function(d){d.method="textDocument/codeLens",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolRequestType(d.method)}(e.CodeLensRequest||(e.CodeLensRequest={})),function(d){d.method="codeLens/resolve",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolRequestType(d.method)}(e.CodeLensResolveRequest||(e.CodeLensResolveRequest={})),function(d){d.method="workspace/codeLens/refresh",d.messageDirection=t.MessageDirection.serverToClient,d.type=new t.ProtocolRequestType0(d.method)}(e.CodeLensRefreshRequest||(e.CodeLensRefreshRequest={})),function(d){d.method="textDocument/documentLink",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolRequestType(d.method)}(e.DocumentLinkRequest||(e.DocumentLinkRequest={})),function(d){d.method="documentLink/resolve",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolRequestType(d.method)}(e.DocumentLinkResolveRequest||(e.DocumentLinkResolveRequest={})),function(d){d.method="textDocument/formatting",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolRequestType(d.method)}(e.DocumentFormattingRequest||(e.DocumentFormattingRequest={})),function(d){d.method="textDocument/rangeFormatting",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolRequestType(d.method)}(e.DocumentRangeFormattingRequest||(e.DocumentRangeFormattingRequest={})),function(d){d.method="textDocument/onTypeFormatting",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolRequestType(d.method)}(e.DocumentOnTypeFormattingRequest||(e.DocumentOnTypeFormattingRequest={})),function(d){d.Identifier=1}(e.PrepareSupportDefaultBehavior||(e.PrepareSupportDefaultBehavior={})),function(d){d.method="textDocument/rename",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolRequestType(d.method)}(e.RenameRequest||(e.RenameRequest={})),function(d){d.method="textDocument/prepareRename",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolRequestType(d.method)}(e.PrepareRenameRequest||(e.PrepareRenameRequest={})),function(d){d.method="workspace/executeCommand",d.messageDirection=t.MessageDirection.clientToServer,d.type=new t.ProtocolRequestType(d.method)}(e.ExecuteCommandRequest||(e.ExecuteCommandRequest={})),function(d){d.method="workspace/applyEdit",d.messageDirection=t.MessageDirection.serverToClient,d.type=new t.ProtocolRequestType("workspace/applyEdit")}(e.ApplyWorkspaceEditRequest||(e.ApplyWorkspaceEditRequest={}))}(Us);var si={};Object.defineProperty(si,"__esModule",{value:!0}),si.createProtocolConnection=void 0;const da=qt;function _u(e,t,n,i){return da.ConnectionStrategy.is(i)&&(i={connectionStrategy:i}),(0,da.createMessageConnection)(e,t,n,i)}si.createProtocolConnection=_u,function(e){var t=He.commonjsGlobal&&He.commonjsGlobal.__createBinding||(Object.create?function(r,o,s,a){a===void 0&&(a=s);var c=Object.getOwnPropertyDescriptor(o,s);(!c||("get"in c?!o.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(r,a,c)}:function(r,o,s,a){a===void 0&&(a=s),r[a]=o[s]}),n=He.commonjsGlobal&&He.commonjsGlobal.__exportStar||function(r,o){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&t(o,r,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.LSPErrorCodes=e.createProtocolConnection=void 0,n(qt,e),n(vo,e),n($e,e),n(Us,e);var i=si;Object.defineProperty(e,"createProtocolConnection",{enumerable:!0,get:function(){return i.createProtocolConnection}}),function(r){r.lspReservedErrorRangeStart=-32899,r.RequestFailed=-32803,r.ServerCancelled=-32802,r.ContentModified=-32801,r.RequestCancelled=-32800,r.lspReservedErrorRangeEnd=-32800}(e.LSPErrorCodes||(e.LSPErrorCodes={}))}(Hs),function(e){var t=He.commonjsGlobal&&He.commonjsGlobal.__createBinding||(Object.create?function(o,s,a,c){c===void 0&&(c=a);var u=Object.getOwnPropertyDescriptor(s,a);(!u||("get"in u?!s.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return s[a]}}),Object.defineProperty(o,c,u)}:function(o,s,a,c){c===void 0&&(c=a),o[c]=s[a]}),n=He.commonjsGlobal&&He.commonjsGlobal.__exportStar||function(o,s){for(var a in o)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&t(s,o,a)};Object.defineProperty(e,"__esModule",{value:!0}),e.createProtocolConnection=void 0;const i=mr.exports;n(mr.exports,e),n(Hs,e);function r(o,s,a,c){return(0,i.createMessageConnection)(o,s,a,c)}e.createProtocolConnection=r}(ge);var ai={},Xe={};Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.forEach=Xe.mapAsync=Xe.map=Xe.clearTestMode=Xe.setTestMode=Xe.Semaphore=Xe.Delayer=void 0;const En=ge;class wu{constructor(t){this.defaultDelay=t,this.timeout=void 0,this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0}trigger(t,n=this.defaultDelay){return this.task=t,n>=0&&this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise(i=>{this.onSuccess=i}).then(()=>{this.completionPromise=void 0,this.onSuccess=void 0;var i=this.task();return this.task=void 0,i})),(n>=0||this.timeout===void 0)&&(this.timeout=(0,En.RAL)().timer.setTimeout(()=>{this.timeout=void 0,this.onSuccess(void 0)},n>=0?n:this.defaultDelay)),this.completionPromise}forceDelivery(){if(!this.completionPromise)return;this.cancelTimeout();let t=this.task();return this.completionPromise=void 0,this.onSuccess=void 0,this.task=void 0,t}isTriggered(){return this.timeout!==void 0}cancel(){this.cancelTimeout(),this.completionPromise=void 0}cancelTimeout(){this.timeout!==void 0&&(this.timeout.dispose(),this.timeout=void 0)}}Xe.Delayer=wu;class bu{constructor(t=1){if(t<=0)throw new Error("Capacity must be greater than 0");this._capacity=t,this._active=0,this._waiting=[]}lock(t){return new Promise((n,i)=>{this._waiting.push({thunk:t,resolve:n,reject:i}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,En.RAL)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;const t=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{const n=t.thunk();n instanceof Promise?n.then(i=>{this._active--,t.resolve(i),this.runNext()},i=>{this._active--,t.reject(i),this.runNext()}):(this._active--,t.resolve(n),this.runNext())}catch(n){this._active--,t.reject(n),this.runNext()}}}Xe.Semaphore=bu;let Co=!1;function Du(){Co=!0}Xe.setTestMode=Du;function Su(){Co=!1}Xe.clearTestMode=Su;const fa=15;class _o{constructor(t=fa){this.yieldAfter=Co===!0?Math.max(t,2):Math.max(t,fa),this.startTime=Date.now(),this.counter=0,this.total=0,this.counterInterval=1}start(){this.counter=0,this.total=0,this.counterInterval=1,this.startTime=Date.now()}shouldYield(){if(++this.counter>=this.counterInterval){const t=Date.now()-this.startTime,n=Math.max(0,this.yieldAfter-t);if(this.total+=this.counter,this.counter=0,t>=this.yieldAfter||n<=1)return this.counterInterval=1,this.total=0,!0;switch(t){case 0:case 1:this.counterInterval=this.total*2;break}}return!1}}async function Ru(e,t,n,i){if(e.length===0)return[];const r=new Array(e.length),o=new _o(i?.yieldAfter);function s(c){o.start();for(let u=c;u<e.length;u++)if(r[u]=t(e[u]),o.shouldYield())return i?.yieldCallback&&i.yieldCallback(),u+1;return-1}let a=s(0);for(;a!==-1&&!(n!==void 0&&n.isCancellationRequested);)a=await new Promise(c=>{(0,En.RAL)().timer.setImmediate(()=>{c(s(a))})});return r}Xe.map=Ru;async function Tu(e,t,n,i){if(e.length===0)return[];const r=new Array(e.length),o=new _o(i?.yieldAfter);async function s(c){o.start();for(let u=c;u<e.length;u++)if(r[u]=await t(e[u],n),o.shouldYield())return i?.yieldCallback&&i.yieldCallback(),u+1;return-1}let a=await s(0);for(;a!==-1&&!(n!==void 0&&n.isCancellationRequested);)a=await new Promise(c=>{(0,En.RAL)().timer.setImmediate(()=>{c(s(a))})});return r}Xe.mapAsync=Tu;async function Pu(e,t,n,i){if(e.length===0)return;const r=new _o(i?.yieldAfter);function o(a){r.start();for(let c=a;c<e.length;c++)if(t(e[c]),r.shouldYield())return i?.yieldCallback&&i.yieldCallback(),c+1;return-1}let s=o(0);for(;s!==-1&&!(n!==void 0&&n.isCancellationRequested);)s=await new Promise(a=>{(0,En.RAL)().timer.setImmediate(()=>{a(o(s))})})}Xe.forEach=Pu;var ci={};Object.defineProperty(ci,"__esModule",{value:!0});const Eu=he.default;class ku extends Eu.CompletionItem{constructor(t){super(t)}}ci.default=ku;var ui={};Object.defineProperty(ui,"__esModule",{value:!0});const Fu=he.default;class Ou extends Fu.CodeLens{constructor(t){super(t)}}ui.default=Ou;var li={};Object.defineProperty(li,"__esModule",{value:!0});const Iu=he.default;class Nu extends Iu.DocumentLink{constructor(t,n){super(t,n)}}li.default=Nu;var di={};Object.defineProperty(di,"__esModule",{value:!0});const qu=he.default;class Mu extends qu.CodeAction{constructor(t,n){super(t),this.data=n}}di.default=Mu;var wo={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProtocolDiagnostic=e.DiagnosticCode=void 0;const t=he.default,n=Pe;(function(r){function o(s){const a=s;return a!=null&&(n.number(a.value)||n.string(a.value))&&n.string(a.target)}r.is=o})(e.DiagnosticCode||(e.DiagnosticCode={}));class i extends t.Diagnostic{constructor(o,s,a,c){super(o,s,a),this.data=c,this.hasDiagnosticCode=!1}}e.ProtocolDiagnostic=i})(wo);var fi={};Object.defineProperty(fi,"__esModule",{value:!0});const Lu=he.default;class $u extends Lu.CallHierarchyItem{constructor(t,n,i,r,o,s,a){super(t,n,i,r,o,s),a!==void 0&&(this.data=a)}}fi.default=$u;var hi={};Object.defineProperty(hi,"__esModule",{value:!0});const Au=he.default;class ju extends Au.TypeHierarchyItem{constructor(t,n,i,r,o,s,a){super(t,n,i,r,o,s),a!==void 0&&(this.data=a)}}hi.default=ju;var gi={};Object.defineProperty(gi,"__esModule",{value:!0});const pi=he.default;class Hu extends pi.SymbolInformation{constructor(t,n,i,r,o){const s=!(r instanceof pi.Uri);super(t,n,i,s?r:new pi.Location(r,new pi.Range(0,0,0,0))),this.hasRange=s,o!==void 0&&(this.data=o)}}gi.default=Hu;var mi={};Object.defineProperty(mi,"__esModule",{value:!0});const Wu=he.default;class Uu extends Wu.InlayHint{constructor(t,n,i){super(t,n,i)}}mi.default=Uu,Object.defineProperty(ai,"__esModule",{value:!0}),ai.createConverter=void 0;const Ke=he.default,me=ge,rn=Pe,ha=Xe,xu=ci,Ku=ui,zu=li,Gu=di,ga=wo,Bu=fi,Vu=hi,Xu=gi,Ju=mi;var bo;(function(e){function t(n){const i=n;return i&&!!i.inserting&&!!i.replacing}e.is=t})(bo||(bo={}));function Qu(e){const n=e||(m=>m.toString());function i(m){return n(m)}function r(m){return{uri:n(m.uri)}}function o(m){return{uri:n(m.uri),languageId:m.languageId,version:m.version,text:m.getText()}}function s(m){return{uri:n(m.uri),version:m.version}}function a(m){return{textDocument:o(m)}}function c(m){const H=m;return!!H.document&&!!H.contentChanges}function u(m){const H=m;return!!H.uri&&!!H.version}function p(m,H,ie){if(u(m))return{textDocument:{uri:n(m.uri),version:m.version},contentChanges:[{text:m.getText()}]};if(c(m)){const De=H,Oe=ie;return{textDocument:{uri:n(De),version:Oe},contentChanges:m.contentChanges.map(tt=>{const Je=tt.range;return{range:{start:{line:Je.start.line,character:Je.start.character},end:{line:Je.end.line,character:Je.end.character}},rangeLength:tt.rangeLength,text:tt.text}})}}else throw Error("Unsupported text document change parameter")}function y(m){return{textDocument:r(m)}}function f(m,H=!1){let ie={textDocument:r(m)};return H&&(ie.text=m.getText()),ie}function g(m){switch(m){case Ke.TextDocumentSaveReason.Manual:return me.TextDocumentSaveReason.Manual;case Ke.TextDocumentSaveReason.AfterDelay:return me.TextDocumentSaveReason.AfterDelay;case Ke.TextDocumentSaveReason.FocusOut:return me.TextDocumentSaveReason.FocusOut}return me.TextDocumentSaveReason.Manual}function h(m){return{textDocument:r(m.document),reason:g(m.reason)}}function N(m){return{files:m.files.map(H=>({uri:n(H)}))}}function j(m){return{files:m.files.map(H=>({oldUri:n(H.oldUri),newUri:n(H.newUri)}))}}function X(m){return{files:m.files.map(H=>({uri:n(H)}))}}function G(m){return{files:m.files.map(H=>({uri:n(H)}))}}function S(m){return{files:m.files.map(H=>({oldUri:n(H.oldUri),newUri:n(H.newUri)}))}}function C(m){return{files:m.files.map(H=>({uri:n(H)}))}}function M(m,H){return{textDocument:r(m),position:k(H)}}function W(m){switch(m){case Ke.CompletionTriggerKind.TriggerCharacter:return me.CompletionTriggerKind.TriggerCharacter;case Ke.CompletionTriggerKind.TriggerForIncompleteCompletions:return me.CompletionTriggerKind.TriggerForIncompleteCompletions;default:return me.CompletionTriggerKind.Invoked}}function I(m,H,ie){return{textDocument:r(m),position:k(H),context:{triggerKind:W(ie.triggerKind),triggerCharacter:ie.triggerCharacter}}}function P(m){switch(m){case Ke.SignatureHelpTriggerKind.Invoke:return me.SignatureHelpTriggerKind.Invoked;case Ke.SignatureHelpTriggerKind.TriggerCharacter:return me.SignatureHelpTriggerKind.TriggerCharacter;case Ke.SignatureHelpTriggerKind.ContentChange:return me.SignatureHelpTriggerKind.ContentChange}}function L(m){return{label:m.label}}function V(m){return m.map(L)}function D(m){return{label:m.label,parameters:V(m.parameters)}}function d(m){return m.map(D)}function v(m){return m===void 0?m:{signatures:d(m.signatures),activeSignature:m.activeSignature,activeParameter:m.activeParameter}}function R(m,H,ie){return{textDocument:r(m),position:k(H),context:{isRetrigger:ie.isRetrigger,triggerCharacter:ie.triggerCharacter,triggerKind:P(ie.triggerKind),activeSignatureHelp:v(ie.activeSignatureHelp)}}}function k(m){return{line:m.line,character:m.character}}function F(m){return m==null?m:{line:m.line>me.uinteger.MAX_VALUE?me.uinteger.MAX_VALUE:m.line,character:m.character>me.uinteger.MAX_VALUE?me.uinteger.MAX_VALUE:m.character}}function q(m,H){return ha.map(m,F,H)}function $(m){return m==null?m:{start:F(m.start),end:F(m.end)}}function x(m){return m==null?m:me.Location.create(i(m.uri),$(m.range))}function Z(m){switch(m){case Ke.DiagnosticSeverity.Error:return me.DiagnosticSeverity.Error;case Ke.DiagnosticSeverity.Warning:return me.DiagnosticSeverity.Warning;case Ke.DiagnosticSeverity.Information:return me.DiagnosticSeverity.Information;case Ke.DiagnosticSeverity.Hint:return me.DiagnosticSeverity.Hint}}function ee(m){if(!m)return;let H=[];for(let ie of m){let De=re(ie);De!==void 0&&H.push(De)}return H.length>0?H:void 0}function re(m){switch(m){case Ke.DiagnosticTag.Unnecessary:return me.DiagnosticTag.Unnecessary;case Ke.DiagnosticTag.Deprecated:return me.DiagnosticTag.Deprecated;default:return}}function ae(m){return{message:m.message,location:x(m.location)}}function ne(m){return m.map(ae)}function te(m){if(m!=null)return rn.number(m)||rn.string(m)?m:{value:m.value,target:i(m.target)}}function ce(m){const H=me.Diagnostic.create($(m.range),m.message),ie=m instanceof ga.ProtocolDiagnostic?m:void 0;ie!==void 0&&ie.data!==void 0&&(H.data=ie.data);const De=te(m.code);return ga.DiagnosticCode.is(De)?ie!==void 0&&ie.hasDiagnosticCode?H.code=De:(H.code=De.value,H.codeDescription={href:De.target}):H.code=De,rn.number(m.severity)&&(H.severity=Z(m.severity)),Array.isArray(m.tags)&&(H.tags=ee(m.tags)),m.relatedInformation&&(H.relatedInformation=ne(m.relatedInformation)),m.source&&(H.source=m.source),H}function se(m,H){return m==null?m:ha.map(m,ce,H)}function nt(m,H){switch(m){case"$string":return H;case me.MarkupKind.PlainText:return{kind:m,value:H};case me.MarkupKind.Markdown:return{kind:m,value:H.value};default:return`Unsupported Markup content received. Kind is: ${m}`}}function ze(m){switch(m){case Ke.CompletionItemTag.Deprecated:return me.CompletionItemTag.Deprecated}}function Ce(m){if(m===void 0)return m;const H=[];for(let ie of m){const De=ze(ie);De!==void 0&&H.push(De)}return H}function Ye(m,H){return H!==void 0?H:m+1}function ke(m,H=!1){let ie,De;rn.string(m.label)?ie=m.label:(ie=m.label.label,H&&(m.label.detail!==void 0||m.label.description!==void 0)&&(De={detail:m.label.detail,description:m.label.description}));let Oe={label:ie};De!==void 0&&(Oe.labelDetails=De);let je=m instanceof xu.default?m:void 0;m.detail&&(Oe.detail=m.detail),m.documentation&&(!je||je.documentationFormat==="$string"?Oe.documentation=m.documentation:Oe.documentation=nt(je.documentationFormat,m.documentation)),m.filterText&&(Oe.filterText=m.filterText),ue(Oe,m),rn.number(m.kind)&&(Oe.kind=Ye(m.kind,je&&je.originalItemKind)),m.sortText&&(Oe.sortText=m.sortText),m.additionalTextEdits&&(Oe.additionalTextEdits=mt(m.additionalTextEdits)),m.commitCharacters&&(Oe.commitCharacters=m.commitCharacters.slice()),m.command&&(Oe.command=de(m.command)),(m.preselect===!0||m.preselect===!1)&&(Oe.preselect=m.preselect);const tt=Ce(m.tags);if(je){if(je.data!==void 0&&(Oe.data=je.data),je.deprecated===!0||je.deprecated===!1){if(je.deprecated===!0&&tt!==void 0&&tt.length>0){const Je=tt.indexOf(Ke.CompletionItemTag.Deprecated);Je!==-1&&tt.splice(Je,1)}Oe.deprecated=je.deprecated}je.insertTextMode!==void 0&&(Oe.insertTextMode=je.insertTextMode)}return tt!==void 0&&tt.length>0&&(Oe.tags=tt),Oe.insertTextMode===void 0&&m.keepWhitespace===!0&&(Oe.insertTextMode=me.InsertTextMode.adjustIndentation),Oe}function ue(m,H){let ie=me.InsertTextFormat.PlainText,De,Oe;H.textEdit?(De=H.textEdit.newText,Oe=H.textEdit.range):H.insertText instanceof Ke.SnippetString?(ie=me.InsertTextFormat.Snippet,De=H.insertText.value):De=H.insertText,H.range&&(Oe=H.range),m.insertTextFormat=ie,H.fromEdit&&De!==void 0&&Oe!==void 0?m.textEdit=Ve(De,Oe):m.insertText=De}function Ve(m,H){return bo.is(H)?me.InsertReplaceEdit.create(m,$(H.inserting),$(H.replacing)):{newText:m,range:$(H)}}function gt(m){return{range:$(m.range),newText:m.newText}}function mt(m){return m==null?m:m.map(gt)}function et(m){return m<=Ke.SymbolKind.TypeParameter?m+1:me.SymbolKind.Property}function le(m){return m}function b(m){return m.map(le)}function E(m,H,ie){return{textDocument:r(m),position:k(H),context:{includeDeclaration:ie.includeDeclaration}}}async function T(m,H){let ie=me.CodeAction.create(m.title);if(m instanceof Gu.default&&m.data!==void 0&&(ie.data=m.data),m.kind!==void 0&&(ie.kind=B(m.kind)),m.diagnostics!==void 0&&(ie.diagnostics=await se(m.diagnostics,H)),m.edit!==void 0)throw new Error("VS Code code actions can only be converted to a protocol code action without an edit.");return m.command!==void 0&&(ie.command=de(m.command)),m.isPreferred!==void 0&&(ie.isPreferred=m.isPreferred),m.disabled!==void 0&&(ie.disabled={reason:m.disabled.reason}),ie}async function z(m,H){if(m==null)return m;let ie;return m.only&&rn.string(m.only.value)&&(ie=[m.only.value]),me.CodeActionContext.create(await se(m.diagnostics,H),ie,K(m.triggerKind))}function K(m){switch(m){case Ke.CodeActionTriggerKind.Invoke:return me.CodeActionTriggerKind.Invoked;case Ke.CodeActionTriggerKind.Automatic:return me.CodeActionTriggerKind.Automatic;default:return}}function B(m){if(m!=null)return m.value}function Fe(m){return m==null?m:me.InlineValueContext.create(m.frameId,$(m.stoppedLocation))}function de(m){let H=me.Command.create(m.title,m.command);return m.arguments&&(H.arguments=m.arguments),H}function Ge(m){let H=me.CodeLens.create($(m.range));return m.command&&(H.command=de(m.command)),m instanceof Ku.default&&m.data&&(H.data=m.data),H}function Be(m,H){const ie={tabSize:m.tabSize,insertSpaces:m.insertSpaces};return H.trimTrailingWhitespace&&(ie.trimTrailingWhitespace=!0),H.trimFinalNewlines&&(ie.trimFinalNewlines=!0),H.insertFinalNewline&&(ie.insertFinalNewline=!0),ie}function Ft(m){return{textDocument:r(m)}}function Kt(m){return{textDocument:r(m)}}function zt(m){let H=me.DocumentLink.create($(m.range));m.target&&(H.target=i(m.target)),m.tooltip!==void 0&&(H.tooltip=m.tooltip);let ie=m instanceof zu.default?m:void 0;return ie&&ie.data&&(H.data=ie.data),H}function Ot(m){return{textDocument:r(m)}}function Gt(m){const H={name:m.name,kind:et(m.kind),uri:i(m.uri),range:$(m.range),selectionRange:$(m.selectionRange)};return m.detail!==void 0&&m.detail.length>0&&(H.detail=m.detail),m.tags!==void 0&&(H.tags=b(m.tags)),m instanceof Bu.default&&m.data!==void 0&&(H.data=m.data),H}function pn(m){const H={name:m.name,kind:et(m.kind),uri:i(m.uri),range:$(m.range),selectionRange:$(m.selectionRange)};return m.detail!==void 0&&m.detail.length>0&&(H.detail=m.detail),m.tags!==void 0&&(H.tags=b(m.tags)),m instanceof Vu.default&&m.data!==void 0&&(H.data=m.data),H}function Bt(m){const H=m instanceof Xu.default?{name:m.name,kind:et(m.kind),location:m.hasRange?x(m.location):{uri:n(m.location.uri)},data:m.data}:{name:m.name,kind:et(m.kind),location:x(m.location)};return m.tags!==void 0&&(H.tags=b(m.tags)),m.containerName!==""&&(H.containerName=m.containerName),H}function mn(m){const H=typeof m.label=="string"?m.label:m.label.map(Vt),ie=me.InlayHint.create(F(m.position),H);return m.kind!==void 0&&(ie.kind=m.kind),m.textEdits!==void 0&&(ie.textEdits=mt(m.textEdits)),m.tooltip!==void 0&&(ie.tooltip=It(m.tooltip)),m.paddingLeft!==void 0&&(ie.paddingLeft=m.paddingLeft),m.paddingRight!==void 0&&(ie.paddingRight=m.paddingRight),m instanceof Ju.default&&m.data!==void 0&&(ie.data=m.data),ie}function Vt(m){const H=me.InlayHintLabelPart.create(m.value);return m.location!==void 0&&(H.location=x(m.location)),m.command!==void 0&&(H.command=de(m.command)),m.tooltip!==void 0&&(H.tooltip=It(m.tooltip)),H}function It(m){return typeof m=="string"?m:{kind:me.MarkupKind.Markdown,value:m.value}}return{asUri:i,asTextDocumentIdentifier:r,asTextDocumentItem:o,asVersionedTextDocumentIdentifier:s,asOpenTextDocumentParams:a,asChangeTextDocumentParams:p,asCloseTextDocumentParams:y,asSaveTextDocumentParams:f,asWillSaveTextDocumentParams:h,asDidCreateFilesParams:N,asDidRenameFilesParams:j,asDidDeleteFilesParams:X,asWillCreateFilesParams:G,asWillRenameFilesParams:S,asWillDeleteFilesParams:C,asTextDocumentPositionParams:M,asCompletionParams:I,asSignatureHelpParams:R,asWorkerPosition:k,asRange:$,asPosition:F,asPositions:q,asLocation:x,asDiagnosticSeverity:Z,asDiagnosticTag:re,asDiagnostic:ce,asDiagnostics:se,asCompletionItem:ke,asTextEdit:gt,asSymbolKind:et,asSymbolTag:le,asSymbolTags:b,asReferenceParams:E,asCodeAction:T,asCodeActionContext:z,asInlineValueContext:Fe,asCommand:de,asCodeLens:Ge,asFormattingOptions:Be,asDocumentSymbolParams:Ft,asCodeLensParams:Kt,asDocumentLink:zt,asDocumentLinkParams:Ot,asCallHierarchyItem:Gt,asTypeHierarchyItem:pn,asInlayHint:mn,asWorkspaceSymbol:Bt}}ai.createConverter=Qu;var yi={};Object.defineProperty(yi,"__esModule",{value:!0}),yi.createConverter=void 0;const Y=he.default,fe=ge,lt=Pe,Ee=Xe,Yu=ci,Zu=ui,el=li,tl=di,pa=wo,nl=fi,il=hi,rl=gi,ol=mi,ma=ge;var vi;(function(e){function t(n){let i=n;return i&&lt.string(i.language)&&lt.string(i.value)}e.is=t})(vi||(vi={}));function sl(e,t,n){const r=e||(l=>Y.Uri.parse(l));function o(l){return r(l)}function s(l){const _=[];for(const A of l)if(typeof A=="string")_.push(A);else if(ma.NotebookCellTextDocumentFilter.is(A))if(typeof A.notebook=="string")_.push({notebookType:A.notebook,language:A.language});else{const J=A.notebook.notebookType??"*";_.push({notebookType:J,scheme:A.notebook.scheme,pattern:A.notebook.pattern,language:A.language})}else ma.TextDocumentFilter.is(A)&&_.push({language:A.language,scheme:A.scheme,pattern:A.pattern});return _}async function a(l,_){return Ee.map(l,u,_)}function c(l){const _=new Array(l.length);for(let A=0;A<l.length;A++)_[A]=u(l[A]);return _}function u(l){let _=new pa.ProtocolDiagnostic(h(l.range),l.message,j(l.severity),l.data);if(l.code!==void 0){if(typeof l.code=="string"||typeof l.code=="number")fe.CodeDescription.is(l.codeDescription)?_.code={value:l.code,target:o(l.codeDescription.href)}:_.code=l.code;else if(pa.DiagnosticCode.is(l.code)){_.hasDiagnosticCode=!0;const A=l.code;_.code={value:A.value,target:o(A.target)}}}return l.source&&(_.source=l.source),l.relatedInformation&&(_.relatedInformation=p(l.relatedInformation)),Array.isArray(l.tags)&&(_.tags=y(l.tags)),_}function p(l){const _=new Array(l.length);for(let A=0;A<l.length;A++){const J=l[A];_[A]=new Y.DiagnosticRelatedInformation(re(J.location),J.message)}return _}function y(l){if(!l)return;let _=[];for(let A of l){let J=f(A);J!==void 0&&_.push(J)}return _.length>0?_:void 0}function f(l){switch(l){case fe.DiagnosticTag.Unnecessary:return Y.DiagnosticTag.Unnecessary;case fe.DiagnosticTag.Deprecated:return Y.DiagnosticTag.Deprecated;default:return}}function g(l){return l?new Y.Position(l.line,l.character):void 0}function h(l){return l?new Y.Range(l.start.line,l.start.character,l.end.line,l.end.character):void 0}async function N(l,_){return Ee.map(l,A=>new Y.Range(A.start.line,A.start.character,A.end.line,A.end.character),_)}function j(l){if(l==null)return Y.DiagnosticSeverity.Error;switch(l){case fe.DiagnosticSeverity.Error:return Y.DiagnosticSeverity.Error;case fe.DiagnosticSeverity.Warning:return Y.DiagnosticSeverity.Warning;case fe.DiagnosticSeverity.Information:return Y.DiagnosticSeverity.Information;case fe.DiagnosticSeverity.Hint:return Y.DiagnosticSeverity.Hint}return Y.DiagnosticSeverity.Error}function X(l){if(lt.string(l))return S(l);if(vi.is(l))return S().appendCodeblock(l.value,l.language);if(Array.isArray(l)){let _=[];for(let A of l){let J=S();vi.is(A)?J.appendCodeblock(A.value,A.language):J.appendMarkdown(A),_.push(J)}return _}else return S(l)}function G(l){if(lt.string(l))return l;switch(l.kind){case fe.MarkupKind.Markdown:return S(l.value);case fe.MarkupKind.PlainText:return l.value;default:return`Unsupported Markup content received. Kind is: ${l.kind}`}}function S(l){let _;if(l===void 0||typeof l=="string")_=new Y.MarkdownString(l);else switch(l.kind){case fe.MarkupKind.Markdown:_=new Y.MarkdownString(l.value);break;case fe.MarkupKind.PlainText:_=new Y.MarkdownString,_.appendText(l.value);break;default:_=new Y.MarkdownString,_.appendText(`Unsupported Markup content received. Kind is: ${l.kind}`);break}return _.isTrusted=t,_.supportHtml=n,_}function C(l){if(!!l)return new Y.Hover(X(l.contents),h(l.range))}async function M(l,_,A){if(!l)return;if(Array.isArray(l))return Ee.map(l,ct=>V(ct,_),A);const J=l,{defaultRange:be,commitCharacters:Se}=W(J,_),ye=await Ee.map(J.items,ct=>V(ct,Se,be,J.itemDefaults?.insertTextMode,J.itemDefaults?.insertTextFormat,J.itemDefaults?.data),A);return new Y.CompletionList(ye,J.isIncomplete)}function W(l,_){const A=l.itemDefaults?.editRange,J=l.itemDefaults?.commitCharacters??_;return fe.Range.is(A)?{defaultRange:h(A),commitCharacters:J}:A!==void 0?{defaultRange:{inserting:h(A.insert),replacing:h(A.replace)},commitCharacters:J}:{defaultRange:void 0,commitCharacters:J}}function I(l){return fe.CompletionItemKind.Text<=l&&l<=fe.CompletionItemKind.TypeParameter?[l-1,void 0]:[Y.CompletionItemKind.Text,l]}function P(l){switch(l){case fe.CompletionItemTag.Deprecated:return Y.CompletionItemTag.Deprecated}}function L(l){if(l==null)return[];const _=[];for(const A of l){const J=P(A);J!==void 0&&_.push(J)}return _}function V(l,_,A,J,be,Se){const ye=L(l.tags),ct=D(l),qe=new Yu.default(ct);l.detail&&(qe.detail=l.detail),l.documentation&&(qe.documentation=G(l.documentation),qe.documentationFormat=lt.string(l.documentation)?"$string":l.documentation.kind),l.filterText&&(qe.filterText=l.filterText);const Bn=d(l,A,be);if(Bn&&(qe.insertText=Bn.text,qe.range=Bn.range,qe.fromEdit=Bn.fromEdit),lt.number(l.kind)){let[_c,Ss]=I(l.kind);qe.kind=_c,Ss&&(qe.originalItemKind=Ss)}l.sortText&&(qe.sortText=l.sortText),l.additionalTextEdits&&(qe.additionalTextEdits=F(l.additionalTextEdits));const bs=l.commitCharacters!==void 0?lt.stringArray(l.commitCharacters)?l.commitCharacters:void 0:_;bs&&(qe.commitCharacters=bs.slice()),l.command&&(qe.command=b(l.command)),(l.deprecated===!0||l.deprecated===!1)&&(qe.deprecated=l.deprecated,l.deprecated===!0&&ye.push(Y.CompletionItemTag.Deprecated)),(l.preselect===!0||l.preselect===!1)&&(qe.preselect=l.preselect);const Ds=l.data??Se;Ds!==void 0&&(qe.data=Ds),ye.length>0&&(qe.tags=ye);const dr=l.insertTextMode??J;return dr!==void 0&&(qe.insertTextMode=dr,dr===fe.InsertTextMode.asIs&&(qe.keepWhitespace=!0)),qe}function D(l){return fe.CompletionItemLabelDetails.is(l.labelDetails)?{label:l.label,detail:l.labelDetails.detail,description:l.labelDetails.description}:l.label}function d(l,_,A){const J=l.insertTextFormat??A;if(l.textEdit!==void 0||_!==void 0){const[be,Se]=l.textEdit!==void 0?v(l.textEdit):[_,l.textEditText??l.label];return J===fe.InsertTextFormat.Snippet?{text:new Y.SnippetString(Se),range:be,fromEdit:!0}:{text:Se,range:be,fromEdit:!0}}else return l.insertText?J===fe.InsertTextFormat.Snippet?{text:new Y.SnippetString(l.insertText),fromEdit:!1}:{text:l.insertText,fromEdit:!1}:void 0}function v(l){return fe.InsertReplaceEdit.is(l)?[{inserting:h(l.insert),replacing:h(l.replace)},l.newText]:[h(l.range),l.newText]}function R(l){if(!!l)return new Y.TextEdit(h(l.range),l.newText)}async function k(l,_){if(!!l)return Ee.map(l,R,_)}function F(l){if(!l)return;const _=new Array(l.length);for(let A=0;A<l.length;A++)_[A]=R(l[A]);return _}async function q(l,_){if(!l)return;let A=new Y.SignatureHelp;return lt.number(l.activeSignature)?A.activeSignature=l.activeSignature:A.activeSignature=0,lt.number(l.activeParameter)?A.activeParameter=l.activeParameter:A.activeParameter=0,l.signatures&&(A.signatures=await $(l.signatures,_)),A}async function $(l,_){return Ee.mapAsync(l,x,_)}async function x(l,_){let A=new Y.SignatureInformation(l.label);return l.documentation!==void 0&&(A.documentation=G(l.documentation)),l.parameters!==void 0&&(A.parameters=await Z(l.parameters,_)),l.activeParameter!==void 0&&(A.activeParameter=l.activeParameter),A}function Z(l,_){return Ee.map(l,ee,_)}function ee(l){let _=new Y.ParameterInformation(l.label);return l.documentation&&(_.documentation=G(l.documentation)),_}function re(l){return l?new Y.Location(r(l.uri),h(l.range)):void 0}async function ae(l,_){if(!!l)return ce(l,_)}async function ne(l,_){if(!!l)return ce(l,_)}function te(l){if(!l)return;let _={targetUri:r(l.targetUri),targetRange:h(l.targetRange),originSelectionRange:h(l.originSelectionRange),targetSelectionRange:h(l.targetSelectionRange)};if(!_.targetSelectionRange)throw new Error("targetSelectionRange must not be undefined or null");return _}async function ce(l,_){if(!!l)if(lt.array(l)){if(l.length===0)return[];if(fe.LocationLink.is(l[0])){const A=l;return Ee.map(A,te,_)}else{const A=l;return Ee.map(A,re,_)}}else return fe.LocationLink.is(l)?[te(l)]:re(l)}async function se(l,_){if(!!l)return Ee.map(l,re,_)}async function nt(l,_){if(!!l)return Ee.map(l,ze,_)}function ze(l){let _=new Y.DocumentHighlight(h(l.range));return lt.number(l.kind)&&(_.kind=Ce(l.kind)),_}function Ce(l){switch(l){case fe.DocumentHighlightKind.Text:return Y.DocumentHighlightKind.Text;case fe.DocumentHighlightKind.Read:return Y.DocumentHighlightKind.Read;case fe.DocumentHighlightKind.Write:return Y.DocumentHighlightKind.Write}return Y.DocumentHighlightKind.Text}async function Ye(l,_){if(!!l)return Ee.map(l,gt,_)}function ke(l){return l<=fe.SymbolKind.TypeParameter?l-1:Y.SymbolKind.Property}function ue(l){switch(l){case fe.SymbolTag.Deprecated:return Y.SymbolTag.Deprecated;default:return}}function Ve(l){if(l==null)return;const _=[];for(const A of l){const J=ue(A);J!==void 0&&_.push(J)}return _.length===0?void 0:_}function gt(l){const _=l.data,A=l.location,J=A.range===void 0||_!==void 0?new rl.default(l.name,ke(l.kind),l.containerName??"",A.range===void 0?r(A.uri):new Y.Location(r(l.location.uri),h(A.range)),_):new Y.SymbolInformation(l.name,ke(l.kind),l.containerName??"",new Y.Location(r(l.location.uri),h(A.range)));return le(J,l),J}async function mt(l,_){if(l!=null)return Ee.map(l,et,_)}function et(l){let _=new Y.DocumentSymbol(l.name,l.detail||"",ke(l.kind),h(l.range),h(l.selectionRange));if(le(_,l),l.children!==void 0&&l.children.length>0){let A=[];for(let J of l.children)A.push(et(J));_.children=A}return _}function le(l,_){l.tags=Ve(_.tags),_.deprecated&&(l.tags?l.tags.includes(Y.SymbolTag.Deprecated)||(l.tags=l.tags.concat(Y.SymbolTag.Deprecated)):l.tags=[Y.SymbolTag.Deprecated])}function b(l){let _={title:l.title,command:l.command};return l.arguments&&(_.arguments=l.arguments),_}async function E(l,_){if(!!l)return Ee.map(l,b,_)}const T=new Map;T.set(fe.CodeActionKind.Empty,Y.CodeActionKind.Empty),T.set(fe.CodeActionKind.QuickFix,Y.CodeActionKind.QuickFix),T.set(fe.CodeActionKind.Refactor,Y.CodeActionKind.Refactor),T.set(fe.CodeActionKind.RefactorExtract,Y.CodeActionKind.RefactorExtract),T.set(fe.CodeActionKind.RefactorInline,Y.CodeActionKind.RefactorInline),T.set(fe.CodeActionKind.RefactorRewrite,Y.CodeActionKind.RefactorRewrite),T.set(fe.CodeActionKind.Source,Y.CodeActionKind.Source),T.set(fe.CodeActionKind.SourceOrganizeImports,Y.CodeActionKind.SourceOrganizeImports);function z(l){if(l==null)return;let _=T.get(l);if(_)return _;let A=l.split(".");_=Y.CodeActionKind.Empty;for(let J of A)_=_.append(J);return _}function K(l){if(l!=null)return l.map(_=>z(_))}async function B(l,_){if(l==null)return;let A=new tl.default(l.title,l.data);return l.kind!==void 0&&(A.kind=z(l.kind)),l.diagnostics!==void 0&&(A.diagnostics=c(l.diagnostics)),l.edit!==void 0&&(A.edit=await Be(l.edit,_)),l.command!==void 0&&(A.command=b(l.command)),l.isPreferred!==void 0&&(A.isPreferred=l.isPreferred),l.disabled!==void 0&&(A.disabled={reason:l.disabled.reason}),A}function Fe(l,_){return Ee.mapAsync(l,async A=>fe.Command.is(A)?b(A):B(A,_),_)}function de(l){if(!l)return;let _=new Zu.default(h(l.range));return l.command&&(_.command=b(l.command)),l.data!==void 0&&l.data!==null&&(_.data=l.data),_}async function Ge(l,_){if(!!l)return Ee.map(l,de,_)}async function Be(l,_){if(!l)return;const A=new Map;if(l.changeAnnotations!==void 0){const Se=l.changeAnnotations;await Ee.forEach(Object.keys(Se),ye=>{const ct=Ft(Se[ye]);A.set(ye,ct)},_)}const J=Se=>{if(Se!==void 0)return A.get(Se)},be=new Y.WorkspaceEdit;if(l.documentChanges){const Se=l.documentChanges;await Ee.forEach(Se,ye=>{if(fe.CreateFile.is(ye))be.createFile(r(ye.uri),ye.options,J(ye.annotationId));else if(fe.RenameFile.is(ye))be.renameFile(r(ye.oldUri),r(ye.newUri),ye.options,J(ye.annotationId));else if(fe.DeleteFile.is(ye))be.deleteFile(r(ye.uri),ye.options,J(ye.annotationId));else if(fe.TextDocumentEdit.is(ye)){const ct=r(ye.textDocument.uri);for(const qe of ye.edits)fe.AnnotatedTextEdit.is(qe)?be.replace(ct,h(qe.range),qe.newText,J(qe.annotationId)):be.replace(ct,h(qe.range),qe.newText)}else throw new Error(`Unknown workspace edit change received:
${JSON.stringify(ye,void 0,4)}`)},_)}else if(l.changes){const Se=l.changes;await Ee.forEach(Object.keys(Se),ye=>{be.set(r(ye),F(Se[ye]))},_)}return be}function Ft(l){if(l!==void 0)return{label:l.label,needsConfirmation:!!l.needsConfirmation,description:l.description}}function Kt(l){let _=h(l.range),A=l.target?o(l.target):void 0,J=new el.default(_,A);return l.tooltip!==void 0&&(J.tooltip=l.tooltip),l.data!==void 0&&l.data!==null&&(J.data=l.data),J}async function zt(l,_){if(!!l)return Ee.map(l,Kt,_)}function Ot(l){return new Y.Color(l.red,l.green,l.blue,l.alpha)}function Gt(l){return new Y.ColorInformation(h(l.range),Ot(l.color))}async function pn(l,_){if(!!l)return Ee.map(l,Gt,_)}function Bt(l){let _=new Y.ColorPresentation(l.label);return _.additionalTextEdits=F(l.additionalTextEdits),l.textEdit&&(_.textEdit=R(l.textEdit)),_}async function mn(l,_){if(!!l)return Ee.map(l,Bt,_)}function Vt(l){if(l)switch(l){case fe.FoldingRangeKind.Comment:return Y.FoldingRangeKind.Comment;case fe.FoldingRangeKind.Imports:return Y.FoldingRangeKind.Imports;case fe.FoldingRangeKind.Region:return Y.FoldingRangeKind.Region}}function It(l){return new Y.FoldingRange(l.startLine,l.endLine,Vt(l.kind))}async function m(l,_){if(!!l)return Ee.map(l,It,_)}function H(l){return new Y.SelectionRange(h(l.range),l.parent?H(l.parent):void 0)}async function ie(l,_){return Array.isArray(l)?Ee.map(l,H,_):[]}function De(l){return fe.InlineValueText.is(l)?new Y.InlineValueText(h(l.range),l.text):fe.InlineValueVariableLookup.is(l)?new Y.InlineValueVariableLookup(h(l.range),l.variableName,l.caseSensitiveLookup):new Y.InlineValueEvaluatableExpression(h(l.range),l.expression)}async function Oe(l,_){return Array.isArray(l)?Ee.map(l,De,_):[]}async function je(l,_){const A=typeof l.label=="string"?l.label:await Ee.map(l.label,tt,_),J=new ol.default(g(l.position),A);return l.kind!==void 0&&(J.kind=l.kind),l.textEdits!==void 0&&(J.textEdits=await k(l.textEdits,_)),l.tooltip!==void 0&&(J.tooltip=Je(l.tooltip)),l.paddingLeft!==void 0&&(J.paddingLeft=l.paddingLeft),l.paddingRight!==void 0&&(J.paddingRight=l.paddingRight),l.data!==void 0&&(J.data=l.data),J}function tt(l){const _=new Y.InlayHintLabelPart(l.value);return l.location!==void 0&&(_.location=re(l.location)),l.tooltip!==void 0&&(_.tooltip=Je(l.tooltip)),l.command!==void 0&&(_.command=b(l.command)),_}function Je(l){return typeof l=="string"?l:S(l)}async function Nt(l,_){if(!!Array.isArray(l))return Ee.mapAsync(l,je,_)}function Xt(l){if(l===null)return;const _=new nl.default(ke(l.kind),l.name,l.detail||"",o(l.uri),h(l.range),h(l.selectionRange),l.data);return l.tags!==void 0&&(_.tags=Ve(l.tags)),_}async function lr(l,_){if(l!==null)return Ee.map(l,Xt,_)}async function Rt(l,_){return new Y.CallHierarchyIncomingCall(Xt(l.from),await N(l.fromRanges,_))}async function zn(l,_){if(l!==null)return Ee.mapAsync(l,Rt,_)}async function yn(l,_){return new Y.CallHierarchyOutgoingCall(Xt(l.to),await N(l.fromRanges,_))}async function vn(l,_){if(l!==null)return Ee.mapAsync(l,yn,_)}async function Gn(l,_){if(l!=null)return new Y.SemanticTokens(new Uint32Array(l.data),l.resultId)}function yt(l){return new Y.SemanticTokensEdit(l.start,l.deleteCount,l.data!==void 0?new Uint32Array(l.data):void 0)}async function w(l,_){if(l!=null)return new Y.SemanticTokensEdits(l.edits.map(yt),l.resultId)}function U(l){return l}async function Q(l,_){if(l!=null)return new Y.LinkedEditingRanges(await N(l.ranges,_),oe(l.wordPattern))}function oe(l){if(l!=null)return new RegExp(l)}function Ne(l){if(l===null)return;let _=new il.default(ke(l.kind),l.name,l.detail||"",o(l.uri),h(l.range),h(l.selectionRange),l.data);return l.tags!==void 0&&(_.tags=Ve(l.tags)),_}async function Ie(l,_){if(l!==null)return Ee.map(l,Ne,_)}function Le(l){if(lt.string(l))return l;if(fe.RelativePattern.is(l)){if(fe.URI.is(l.baseUri))return new Y.RelativePattern(o(l.baseUri),l.pattern);if(fe.WorkspaceFolder.is(l.baseUri)){const _=Y.workspace.getWorkspaceFolder(o(l.baseUri.uri));return _!==void 0?new Y.RelativePattern(_,l.pattern):void 0}}}return{asUri:o,asDocumentSelector:s,asDiagnostics:a,asDiagnostic:u,asRange:h,asRanges:N,asPosition:g,asDiagnosticSeverity:j,asDiagnosticTag:f,asHover:C,asCompletionResult:M,asCompletionItem:V,asTextEdit:R,asTextEdits:k,asSignatureHelp:q,asSignatureInformations:$,asSignatureInformation:x,asParameterInformations:Z,asParameterInformation:ee,asDeclarationResult:ae,asDefinitionResult:ne,asLocation:re,asReferences:se,asDocumentHighlights:nt,asDocumentHighlight:ze,asDocumentHighlightKind:Ce,asSymbolKind:ke,asSymbolTag:ue,asSymbolTags:Ve,asSymbolInformations:Ye,asSymbolInformation:gt,asDocumentSymbols:mt,asDocumentSymbol:et,asCommand:b,asCommands:E,asCodeAction:B,asCodeActionKind:z,asCodeActionKinds:K,asCodeActionResult:Fe,asCodeLens:de,asCodeLenses:Ge,asWorkspaceEdit:Be,asDocumentLink:Kt,asDocumentLinks:zt,asFoldingRangeKind:Vt,asFoldingRange:It,asFoldingRanges:m,asColor:Ot,asColorInformation:Gt,asColorInformations:pn,asColorPresentation:Bt,asColorPresentations:mn,asSelectionRange:H,asSelectionRanges:ie,asInlineValue:De,asInlineValues:Oe,asInlayHint:je,asInlayHints:Nt,asSemanticTokensLegend:U,asSemanticTokens:Gn,asSemanticTokensEdit:yt,asSemanticTokensEdits:w,asCallHierarchyItem:Xt,asCallHierarchyItems:lr,asCallHierarchyIncomingCall:Rt,asCallHierarchyIncomingCalls:zn,asCallHierarchyOutgoingCall:yn,asCallHierarchyOutgoingCalls:vn,asLinkedEditingRanges:Q,asTypeHierarchyItem:Ne,asTypeHierarchyItems:Ie,asGlobPattern:Le}}yi.createConverter=sl;var Re={};Object.defineProperty(Re,"__esModule",{value:!0}),Re.generateUuid=Re.parse=Re.isUUID=Re.v4=Re.empty=void 0;class Do{constructor(t){this._value=t}asHex(){return this._value}equals(t){return this.asHex()===t.asHex()}}class _e extends Do{constructor(){super([_e._randomHex(),_e._randomHex(),_e._randomHex(),_e._randomHex(),_e._randomHex(),_e._randomHex(),_e._randomHex(),_e._randomHex(),"-",_e._randomHex(),_e._randomHex(),_e._randomHex(),_e._randomHex(),"-","4",_e._randomHex(),_e._randomHex(),_e._randomHex(),"-",_e._oneOf(_e._timeHighBits),_e._randomHex(),_e._randomHex(),_e._randomHex(),"-",_e._randomHex(),_e._randomHex(),_e._randomHex(),_e._randomHex(),_e._randomHex(),_e._randomHex(),_e._randomHex(),_e._randomHex(),_e._randomHex(),_e._randomHex(),_e._randomHex(),_e._randomHex()].join(""))}static _oneOf(t){return t[Math.floor(t.length*Math.random())]}static _randomHex(){return _e._oneOf(_e._chars)}}_e._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"],_e._timeHighBits=["8","9","a","b"],Re.empty=new Do("00000000-0000-0000-0000-000000000000");function ya(){return new _e}Re.v4=ya;const al=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function va(e){return al.test(e)}Re.isUUID=va;function cl(e){if(!va(e))throw new Error("invalid uuid");return new Do(e)}Re.parse=cl;function ul(){return ya().asHex()}Re.generateUuid=ul;var kn={};Object.defineProperty(kn,"__esModule",{value:!0}),kn.ProgressPart=void 0;const Ca=he.default,_a=ge,wa=Pe;class ll{constructor(t,n,i){this._client=t,this._token=n,this._reported=0,this._infinite=!1,this._lspProgressDisposable=this._client.onProgress(_a.WorkDoneProgress.type,this._token,r=>{switch(r.kind){case"begin":this.begin(r);break;case"report":this.report(r);break;case"end":this.done(),i&&i(this);break}})}begin(t){this._infinite=t.percentage===void 0,this._lspProgressDisposable!==void 0&&Ca.window.withProgress({location:Ca.ProgressLocation.Window,cancellable:t.cancellable,title:t.title},async(n,i)=>{if(this._lspProgressDisposable!==void 0)return this._progress=n,this._cancellationToken=i,this._tokenDisposable=this._cancellationToken.onCancellationRequested(()=>{this._client.sendNotification(_a.WorkDoneProgressCancelNotification.type,{token:this._token})}),this.report(t),new Promise((r,o)=>{this._resolve=r,this._reject=o})})}report(t){if(this._infinite&&wa.string(t.message))this._progress!==void 0&&this._progress.report({message:t.message});else if(wa.number(t.percentage)){const n=Math.max(0,Math.min(t.percentage,100)),i=Math.max(0,n-this._reported);this._reported+=i,this._progress!==void 0&&this._progress.report({message:t.message,increment:i})}}cancel(){this.cleanup(),this._reject!==void 0&&(this._reject(),this._resolve=void 0,this._reject=void 0)}done(){this.cleanup(),this._resolve!==void 0&&(this._resolve(),this._resolve=void 0,this._reject=void 0)}cleanup(){this._lspProgressDisposable!==void 0&&(this._lspProgressDisposable.dispose(),this._lspProgressDisposable=void 0),this._tokenDisposable!==void 0&&(this._tokenDisposable.dispose(),this._tokenDisposable=void 0),this._progress=void 0,this._cancellationToken=void 0}}kn.ProgressPart=ll;var Te={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WorkspaceFeature=e.TextDocumentLanguageFeature=e.TextDocumentEventFeature=e.DynamicDocumentFeature=e.DynamicFeature=e.StaticFeature=e.ensure=e.LSPCancellationError=void 0;const t=he.default,n=ge,i=Pe,r=Re;class o extends t.CancellationError{constructor(f){super(),this.data=f}}e.LSPCancellationError=o;function s(y,f){return y[f]===void 0&&(y[f]={}),y[f]}e.ensure=s,function(y){function f(g){const h=g;return h!=null&&i.func(h.fillClientCapabilities)&&i.func(h.initialize)&&i.func(h.getState)&&i.func(h.dispose)&&(h.fillInitializeParams===void 0||i.func(h.fillInitializeParams))}y.is=f}(e.StaticFeature||(e.StaticFeature={})),function(y){function f(g){const h=g;return h!=null&&i.func(h.fillClientCapabilities)&&i.func(h.initialize)&&i.func(h.getState)&&i.func(h.dispose)&&(h.fillInitializeParams===void 0||i.func(h.fillInitializeParams))&&i.func(h.register)&&i.func(h.unregister)&&h.registrationType!==void 0}y.is=f}(e.DynamicFeature||(e.DynamicFeature={}));class a{constructor(f){this._client=f}getState(){const f=this.getDocumentSelectors();let g=0;for(const N of f){g++;for(const j of t.workspace.textDocuments)if(t.languages.match(N,j)>0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}const h=g>0;return{kind:"document",id:this.registrationType.method,registrations:h,matches:!1}}}e.DynamicDocumentFeature=a;class c extends a{constructor(f,g,h,N,j,X,G){super(f),this._event=g,this._type=h,this._middleware=N,this._createParams=j,this._textDocument=X,this._selectorFilter=G,this._selectors=new Map,this._onNotificationSent=new t.EventEmitter}static textDocumentFilter(f,g){for(const h of f)if(t.languages.match(h,g)>0)return!0;return!1}getStateInfo(){return[this._selectors.values(),!1]}getDocumentSelectors(){return this._selectors.values()}register(f){!f.registerOptions.documentSelector||(this._listener||(this._listener=this._event(g=>{this.callback(g).catch(h=>{this._client.error(`Sending document notification ${this._type.method} failed.`,h)})})),this._selectors.set(f.id,this._client.protocol2CodeConverter.asDocumentSelector(f.registerOptions.documentSelector)))}async callback(f){const g=async h=>{const N=this._createParams(h);await this._client.sendNotification(this._type,N),this.notificationSent(this.getTextDocument(h),this._type,N)};if(this.matches(f)){const h=this._middleware();return h?h(f,N=>g(N)):g(f)}}matches(f){return this._client.hasDedicatedTextSynchronizationFeature(this._textDocument(f))?!1:!this._selectorFilter||this._selectorFilter(this._selectors.values(),f)}get onNotificationSent(){return this._onNotificationSent.event}notificationSent(f,g,h){this._onNotificationSent.fire({textDocument:f,type:g,params:h})}unregister(f){this._selectors.delete(f),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._onNotificationSent.dispose(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getProvider(f){for(const g of this._selectors.values())if(t.languages.match(g,f)>0)return{send:h=>this.callback(h)}}}e.TextDocumentEventFeature=c;class u extends a{constructor(f,g){super(f),this._registrationType=g,this._registrations=new Map}*getDocumentSelectors(){for(const f of this._registrations.values()){const g=f.data.registerOptions.documentSelector;g!==null&&(yield this._client.protocol2CodeConverter.asDocumentSelector(g))}}get registrationType(){return this._registrationType}register(f){if(!f.registerOptions.documentSelector)return;let g=this.registerLanguageProvider(f.registerOptions,f.id);this._registrations.set(f.id,{disposable:g[0],data:f,provider:g[1]})}unregister(f){let g=this._registrations.get(f);g!==void 0&&g.disposable.dispose()}dispose(){this._registrations.forEach(f=>{f.disposable.dispose()}),this._registrations.clear()}getRegistration(f,g){if(g){if(n.TextDocumentRegistrationOptions.is(g)){const h=n.StaticRegistrationOptions.hasId(g)?g.id:r.generateUuid(),N=g.documentSelector??f;if(N)return[h,Object.assign({},g,{documentSelector:N})]}else if(i.boolean(g)&&g===!0||n.WorkDoneProgressOptions.is(g)){if(!f)return[void 0,void 0];const h=i.boolean(g)&&g===!0?{documentSelector:f}:Object.assign({},g,{documentSelector:f});return[r.generateUuid(),h]}}else return[void 0,void 0];return[void 0,void 0]}getRegistrationOptions(f,g){if(!(!f||!g))return i.boolean(g)&&g===!0?{documentSelector:f}:Object.assign({},g,{documentSelector:f})}getProvider(f){for(const g of this._registrations.values()){let h=g.data.registerOptions.documentSelector;if(h!==null&&t.languages.match(this._client.protocol2CodeConverter.asDocumentSelector(h),f)>0)return g.provider}}getAllProviders(){const f=[];for(const g of this._registrations.values())f.push(g.provider);return f}}e.TextDocumentLanguageFeature=u;class p{constructor(f,g){this._client=f,this._registrationType=g,this._registrations=new Map}getState(){const f=this._registrations.size>0;return{kind:"workspace",id:this._registrationType.method,registrations:f}}get registrationType(){return this._registrationType}register(f){const g=this.registerLanguageProvider(f.registerOptions);this._registrations.set(f.id,{disposable:g[0],provider:g[1]})}unregister(f){let g=this._registrations.get(f);g!==void 0&&g.disposable.dispose()}dispose(){this._registrations.forEach(f=>{f.disposable.dispose()}),this._registrations.clear()}getProviders(){const f=[];for(const g of this._registrations.values())f.push(g.provider);return f}}e.WorkspaceFeature=p})(Te);var So={};const dl=typeof process=="object"&&process&&process.platform==="win32";var fl=dl?{sep:"\\"}:{sep:"/"},hl=ba;function ba(e,t,n){e instanceof RegExp&&(e=Da(e,n)),t instanceof RegExp&&(t=Da(t,n));var i=Sa(e,t,n);return i&&{start:i[0],end:i[1],pre:n.slice(0,i[0]),body:n.slice(i[0]+e.length,i[1]),post:n.slice(i[1]+t.length)}}function Da(e,t){var n=t.match(e);return n?n[0]:null}ba.range=Sa;function Sa(e,t,n){var i,r,o,s,a,c=n.indexOf(e),u=n.indexOf(t,c+1),p=c;if(c>=0&&u>0){if(e===t)return[c,u];for(i=[],o=n.length;p>=0&&!a;)p==c?(i.push(p),c=n.indexOf(e,p+1)):i.length==1?a=[i.pop(),u]:(r=i.pop(),r<o&&(o=r,s=u),u=n.indexOf(t,p+1)),p=c<u&&c>=0?c:u;i.length&&(a=[o,s])}return a}var Ra=hl,gl=yl,Ta="\0SLASH"+Math.random()+"\0",Pa="\0OPEN"+Math.random()+"\0",Ro="\0CLOSE"+Math.random()+"\0",Ea="\0COMMA"+Math.random()+"\0",ka="\0PERIOD"+Math.random()+"\0";function To(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function pl(e){return e.split("\\\\").join(Ta).split("\\{").join(Pa).split("\\}").join(Ro).split("\\,").join(Ea).split("\\.").join(ka)}function ml(e){return e.split(Ta).join("\\").split(Pa).join("{").split(Ro).join("}").split(Ea).join(",").split(ka).join(".")}function Fa(e){if(!e)return[""];var t=[],n=Ra("{","}",e);if(!n)return e.split(",");var i=n.pre,r=n.body,o=n.post,s=i.split(",");s[s.length-1]+="{"+r+"}";var a=Fa(o);return o.length&&(s[s.length-1]+=a.shift(),s.push.apply(s,a)),t.push.apply(t,s),t}function yl(e){return e?(e.substr(0,2)==="{}"&&(e="\\{\\}"+e.substr(2)),Fn(pl(e),!0).map(ml)):[]}function vl(e){return"{"+e+"}"}function Cl(e){return/^-?0\d/.test(e)}function _l(e,t){return e<=t}function wl(e,t){return e>=t}function Fn(e,t){var n=[],i=Ra("{","}",e);if(!i)return[e];var r=i.pre,o=i.post.length?Fn(i.post,!1):[""];if(/\$$/.test(i.pre))for(var s=0;s<o.length;s++){var a=r+"{"+i.body+"}"+o[s];n.push(a)}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),p=c||u,y=i.body.indexOf(",")>=0;if(!p&&!y)return i.post.match(/,.*\}/)?(e=i.pre+"{"+i.body+Ro+i.post,Fn(e)):[e];var f;if(p)f=i.body.split(/\.\./);else if(f=Fa(i.body),f.length===1&&(f=Fn(f[0],!1).map(vl),f.length===1))return o.map(function(V){return i.pre+f[0]+V});var g;if(p){var h=To(f[0]),N=To(f[1]),j=Math.max(f[0].length,f[1].length),X=f.length==3?Math.abs(To(f[2])):1,G=_l,S=N<h;S&&(X*=-1,G=wl);var C=f.some(Cl);g=[];for(var M=h;G(M,N);M+=X){var W;if(u)W=String.fromCharCode(M),W==="\\"&&(W="");else if(W=String(M),C){var I=j-W.length;if(I>0){var P=new Array(I+1).join("0");M<0?W="-"+P+W.slice(1):W=P+W}}g.push(W)}}else{g=[];for(var L=0;L<f.length;L++)g.push.apply(g,Fn(f[L],!1))}for(var L=0;L<g.length;L++)for(var s=0;s<o.length;s++){var a=r+g[L]+o[s];(!t||p||a)&&n.push(a)}}return n}const ot=Ci=(e,t,n={})=>(_i(t),!n.nocomment&&t.charAt(0)==="#"?!1:new wi(t,n).match(e));var Ci=ot;const Po=fl;ot.sep=Po.sep;const ft=Symbol("globstar **");ot.GLOBSTAR=ft;const bl=gl,Oa={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}},Eo="[^/]",ko=Eo+"*?",Dl="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Sl="(?:(?!(?:\\/|^)\\.).)*?",Ia=e=>e.split("").reduce((t,n)=>(t[n]=!0,t),{}),Na=Ia("().*{}+?[]^$\\!"),Rl=Ia("[.("),qa=/\/+/;ot.filter=(e,t={})=>(n,i,r)=>ot(n,e,t);const Pt=(e,t={})=>{const n={};return Object.keys(e).forEach(i=>n[i]=e[i]),Object.keys(t).forEach(i=>n[i]=t[i]),n};ot.defaults=e=>{if(!e||typeof e!="object"||!Object.keys(e).length)return ot;const t=ot,n=(i,r,o)=>t(i,r,Pt(e,o));return n.Minimatch=class extends t.Minimatch{constructor(r,o){super(r,Pt(e,o))}},n.Minimatch.defaults=i=>t.defaults(Pt(e,i)).Minimatch,n.filter=(i,r)=>t.filter(i,Pt(e,r)),n.defaults=i=>t.defaults(Pt(e,i)),n.makeRe=(i,r)=>t.makeRe(i,Pt(e,r)),n.braceExpand=(i,r)=>t.braceExpand(i,Pt(e,r)),n.match=(i,r,o)=>t.match(i,r,Pt(e,o)),n},ot.braceExpand=(e,t)=>Ma(e,t);const Ma=(e,t={})=>(_i(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:bl(e)),Tl=1024*64,_i=e=>{if(typeof e!="string")throw new TypeError("invalid pattern");if(e.length>Tl)throw new TypeError("pattern is too long")},Fo=Symbol("subparse");ot.makeRe=(e,t)=>new wi(e,t||{}).makeRe(),ot.match=(e,t,n={})=>{const i=new wi(t,n);return e=e.filter(r=>i.match(r)),i.options.nonull&&!e.length&&e.push(t),e};const Pl=e=>e.replace(/\\(.)/g,"$1"),El=e=>e.replace(/\\([^-\]])/g,"$1"),kl=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),Fl=e=>e.replace(/[[\]\\]/g,"\\$&");class wi{constructor(t,n){_i(t),n||(n={}),this.options=n,this.set=[],this.pattern=t,this.windowsPathsNoEscape=!!n.windowsPathsNoEscape||n.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.regexp=null,this.negate=!1,this.comment=!1,this.empty=!1,this.partial=!!n.partial,this.make()}debug(){}make(){const t=this.pattern,n=this.options;if(!n.nocomment&&t.charAt(0)==="#"){this.comment=!0;return}if(!t){this.empty=!0;return}this.parseNegate();let i=this.globSet=this.braceExpand();n.debug&&(this.debug=(...r)=>console.error(...r)),this.debug(this.pattern,i),i=this.globParts=i.map(r=>r.split(qa)),this.debug(this.pattern,i),i=i.map((r,o,s)=>r.map(this.parse,this)),this.debug(this.pattern,i),i=i.filter(r=>r.indexOf(!1)===-1),this.debug(this.pattern,i),this.set=i}parseNegate(){if(this.options.nonegate)return;const t=this.pattern;let n=!1,i=0;for(let r=0;r<t.length&&t.charAt(r)==="!";r++)n=!n,i++;i&&(this.pattern=t.slice(i)),this.negate=n}matchOne(t,n,i){var r=this.options;this.debug("matchOne",{this:this,file:t,pattern:n}),this.debug("matchOne",t.length,n.length);for(var o=0,s=0,a=t.length,c=n.length;o<a&&s<c;o++,s++){this.debug("matchOne loop");var u=n[s],p=t[o];if(this.debug(n,u,p),u===!1)return!1;if(u===ft){this.debug("GLOBSTAR",[n,u,p]);var y=o,f=s+1;if(f===c){for(this.debug("** at the end");o<a;o++)if(t[o]==="."||t[o]===".."||!r.dot&&t[o].charAt(0)===".")return!1;return!0}for(;y<a;){var g=t[y];if(this.debug(`
globstar while`,t,y,n,f,g),this.matchOne(t.slice(y),n.slice(f),i))return this.debug("globstar found match!",y,a,g),!0;if(g==="."||g===".."||!r.dot&&g.charAt(0)==="."){this.debug("dot detected!",t,y,n,f);break}this.debug("globstar swallow a segment, and continue"),y++}return!!(i&&(this.debug(`
>>> no match, partial?`,t,y,n,f),y===a))}var h;if(typeof u=="string"?(h=p===u,this.debug("string match",u,p,h)):(h=p.match(u),this.debug("pattern match",u,p,h)),!h)return!1}if(o===a&&s===c)return!0;if(o===a)return i;if(s===c)return o===a-1&&t[o]==="";throw new Error("wtf?")}braceExpand(){return Ma(this.pattern,this.options)}parse(t,n){_i(t);const i=this.options;if(t==="**")if(i.noglobstar)t="*";else return ft;if(t==="")return"";let r="",o=!1,s=!1;const a=[],c=[];let u,p=!1,y=-1,f=-1,g,h,N,j=t.charAt(0)===".",X=i.dot||j;const G=()=>j?"":X?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",S=I=>I.charAt(0)==="."?"":i.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)",C=()=>{if(u){switch(u){case"*":r+=ko,o=!0;break;case"?":r+=Eo,o=!0;break;default:r+="\\"+u;break}this.debug("clearStateChar %j %j",u,r),u=!1}};for(let I=0,P;I<t.length&&(P=t.charAt(I));I++){if(this.debug("%s	%s %s %j",t,I,r,P),s){if(P==="/")return!1;Na[P]&&(r+="\\"),r+=P,s=!1;continue}switch(P){case"/":return!1;case"\\":if(p&&t.charAt(I+1)==="-"){r+=P;continue}C(),s=!0;continue;case"?":case"*":case"+":case"@":case"!":if(this.debug("%s	%s %s %j <-- stateChar",t,I,r,P),p){this.debug("  in class"),P==="!"&&I===f+1&&(P="^"),r+=P;continue}this.debug("call clearStateChar %j",u),C(),u=P,i.noext&&C();continue;case"(":{if(p){r+="(";continue}if(!u){r+="\\(";continue}const L={type:u,start:I-1,reStart:r.length,open:Oa[u].open,close:Oa[u].close};this.debug(this.pattern,"	",L),a.push(L),r+=L.open,L.start===0&&L.type!=="!"&&(j=!0,r+=S(t.slice(I+1))),this.debug("plType %j %j",u,r),u=!1;continue}case")":{const L=a[a.length-1];if(p||!L){r+="\\)";continue}a.pop(),C(),o=!0,h=L,r+=h.close,h.type==="!"&&c.push(Object.assign(h,{reEnd:r.length}));continue}case"|":{const L=a[a.length-1];if(p||!L){r+="\\|";continue}C(),r+="|",L.start===0&&L.type!=="!"&&(j=!0,r+=S(t.slice(I+1)));continue}case"[":if(C(),p){r+="\\"+P;continue}p=!0,f=I,y=r.length,r+=P;continue;case"]":if(I===f+1||!p){r+="\\"+P;continue}g=t.substring(f+1,I);try{RegExp("["+Fl(El(g))+"]"),r+=P}catch{r=r.substring(0,y)+"(?:$.)"}o=!0,p=!1;continue;default:C(),Na[P]&&!(P==="^"&&p)&&(r+="\\"),r+=P;break}}for(p&&(g=t.slice(f+1),N=this.parse(g,Fo),r=r.substring(0,y)+"\\["+N[0],o=o||N[1]),h=a.pop();h;h=a.pop()){let I;I=r.slice(h.reStart+h.open.length),this.debug("setting tail",r,h),I=I.replace(/((?:\\{2}){0,64})(\\?)\|/g,(L,V,D)=>(D||(D="\\"),V+V+D+"|")),this.debug(`tail=%j
   %s`,I,I,h,r);const P=h.type==="*"?ko:h.type==="?"?Eo:"\\"+h.type;o=!0,r=r.slice(0,h.reStart)+P+"\\("+I}C(),s&&(r+="\\\\");const M=Rl[r.charAt(0)];for(let I=c.length-1;I>-1;I--){const P=c[I],L=r.slice(0,P.reStart),V=r.slice(P.reStart,P.reEnd-8);let D=r.slice(P.reEnd);const d=r.slice(P.reEnd-8,P.reEnd)+D,v=L.split(")").length,R=L.split("(").length-v;let k=D;for(let q=0;q<R;q++)k=k.replace(/\)[+*?]?/,"");D=k;const F=D===""&&n!==Fo?"(?:$|\\/)":"";r=L+V+D+F+d}if(r!==""&&o&&(r="(?=.)"+r),M&&(r=G()+r),n===Fo)return[r,o];if(i.nocase&&!o&&(o=t.toUpperCase()!==t.toLowerCase()),!o)return Pl(t);const W=i.nocase?"i":"";try{return Object.assign(new RegExp("^"+r+"$",W),{_glob:t,_src:r})}catch{return new RegExp("$.")}}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const t=this.set;if(!t.length)return this.regexp=!1,this.regexp;const n=this.options,i=n.noglobstar?ko:n.dot?Dl:Sl,r=n.nocase?"i":"";let o=t.map(s=>(s=s.map(a=>typeof a=="string"?kl(a):a===ft?ft:a._src).reduce((a,c)=>(a[a.length-1]===ft&&c===ft||a.push(c),a),[]),s.forEach((a,c)=>{a!==ft||s[c-1]===ft||(c===0?s.length>1?s[c+1]="(?:\\/|"+i+"\\/)?"+s[c+1]:s[c]=i:c===s.length-1?s[c-1]+="(?:\\/|"+i+")?":(s[c-1]+="(?:\\/|\\/"+i+"\\/)"+s[c+1],s[c+1]=ft))}),s.filter(a=>a!==ft).join("/"))).join("|");o="^(?:"+o+")$",this.negate&&(o="^(?!"+o+").*$");try{this.regexp=new RegExp(o,r)}catch{this.regexp=!1}return this.regexp}match(t,n=this.partial){if(this.debug("match",t,this.pattern),this.comment)return!1;if(this.empty)return t==="";if(t==="/"&&n)return!0;const i=this.options;Po.sep!=="/"&&(t=t.split(Po.sep).join("/")),t=t.split(qa),this.debug(this.pattern,"split",t);const r=this.set;this.debug(this.pattern,"set",r);let o;for(let s=t.length-1;s>=0&&(o=t[s],!o);s--);for(let s=0;s<r.length;s++){const a=r[s];let c=t;if(i.matchBase&&a.length===1&&(c=[o]),this.matchOne(c,a,n))return i.flipNegate?!0:!this.negate}return i.flipNegate?!1:this.negate}static defaults(t){return ot.defaults(t).Minimatch}}ot.Minimatch=wi,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DiagnosticFeature=e.DiagnosticPullMode=e.vsdiag=void 0;const t=Ci,n=he.default,i=ge,r=Re,o=Te;function s(G,S){return G[S]===void 0&&(G[S]={}),G[S]}var a;(function(G){(function(S){S.full="full",S.unChanged="unChanged"})(G.DocumentDiagnosticReportKind||(G.DocumentDiagnosticReportKind={}))})(a=e.vsdiag||(e.vsdiag={}));var c;(function(G){G.onType="onType",G.onSave="onSave"})(c=e.DiagnosticPullMode||(e.DiagnosticPullMode={}));var u;(function(G){G.active="open",G.reschedule="reschedule",G.outDated="drop"})(u||(u={}));class p{constructor(){this.open=new Set,this._onOpen=new n.EventEmitter,this._onClose=new n.EventEmitter,p.fillTabResources(this.open);const S=C=>{if(C.closed.length===0&&C.opened.length===0)return;const M=this.open,W=new Set;p.fillTabResources(W);const I=new Set,P=new Set(W);for(const L of M.values())W.has(L)?P.delete(L):I.add(L);if(this.open=W,I.size>0){const L=new Set;for(const V of I)L.add(n.Uri.parse(V));this._onClose.fire(L)}if(P.size>0){const L=new Set;for(const V of P)L.add(n.Uri.parse(V));this._onOpen.fire(L)}};n.window.tabGroups.onDidChangeTabs!==void 0?this.disposable=n.window.tabGroups.onDidChangeTabs(S):this.disposable={dispose:()=>{}}}get onClose(){return this._onClose.event}get onOpen(){return this._onOpen.event}dispose(){this.disposable.dispose()}isActive(S){return S instanceof n.Uri?n.window.activeTextEditor?.document.uri===S:n.window.activeTextEditor?.document===S}isVisible(S){const C=S instanceof n.Uri?S:S.uri;return this.open.has(C.toString())}getTabResources(){const S=new Set;return p.fillTabResources(new Set,S),S}static fillTabResources(S,C){const M=S??new Set;for(const W of n.window.tabGroups.all)for(const I of W.tabs){const P=I.input;let L;P instanceof n.TabInputText?L=P.uri:P instanceof n.TabInputTextDiff&&(L=P.modified),L!==void 0&&!M.has(L.toString())&&(M.add(L.toString()),C!==void 0&&C.add(L))}}}var y;(function(G){G[G.document=1]="document",G[G.workspace=2]="workspace"})(y||(y={}));var f;(function(G){function S(C){return C instanceof n.Uri?C.toString():C.uri.toString()}G.asKey=S})(f||(f={}));class g{constructor(){this.documentPullStates=new Map,this.workspacePullStates=new Map}track(S,C,M){const W=S===y.document?this.documentPullStates:this.workspacePullStates,[I,P,L]=C instanceof n.Uri?[C.toString(),C,M]:[C.uri.toString(),C.uri,C.version];let V=W.get(I);return V===void 0&&(V={document:P,pulledVersion:L,resultId:void 0},W.set(I,V)),V}update(S,C,M,W){const I=S===y.document?this.documentPullStates:this.workspacePullStates,[P,L,V,D]=C instanceof n.Uri?[C.toString(),C,M,W]:[C.uri.toString(),C.uri,C.version,M];let d=I.get(P);d===void 0?(d={document:L,pulledVersion:V,resultId:D},I.set(P,d)):(d.pulledVersion=V,d.resultId=D)}unTrack(S,C){const M=f.asKey(C);(S===y.document?this.documentPullStates:this.workspacePullStates).delete(M)}tracks(S,C){const M=f.asKey(C);return(S===y.document?this.documentPullStates:this.workspacePullStates).has(M)}getResultId(S,C){const M=f.asKey(C);return(S===y.document?this.documentPullStates:this.workspacePullStates).get(M)?.resultId}getAllResultIds(){const S=[];for(let[C,M]of this.workspacePullStates)this.documentPullStates.has(C)&&(M=this.documentPullStates.get(C)),M.resultId!==void 0&&S.push({uri:C,value:M.resultId});return S}}class h{constructor(S,C,M){this.client=S,this.tabs=C,this.options=M,this.isDisposed=!1,this.onDidChangeDiagnosticsEmitter=new n.EventEmitter,this.provider=this.createProvider(),this.diagnostics=n.languages.createDiagnosticCollection(M.identifier),this.openRequests=new Map,this.documentStates=new g,this.workspaceErrorCounter=0}knows(S,C){const M=C instanceof n.Uri?C:C.uri;return this.documentStates.tracks(S,C)||this.openRequests.has(M.toString())}forget(S,C){this.documentStates.unTrack(S,C)}pull(S,C){if(this.isDisposed)return;const M=S instanceof n.Uri?S:S.uri;this.pullAsync(S).then(()=>{C&&C()},W=>{this.client.error(`Document pull failed for text document ${M.toString()}`,W,!1)})}async pullAsync(S,C){if(this.isDisposed)return;const M=S instanceof n.Uri,W=M?S:S.uri,I=W.toString();C=M?C:S.version;const P=this.openRequests.get(I),L=M?this.documentStates.track(y.document,S,C):this.documentStates.track(y.document,S);if(P===void 0){const V=new n.CancellationTokenSource;this.openRequests.set(I,{state:u.active,document:S,version:C,tokenSource:V});let D,d;try{D=await this.provider.provideDiagnostics(S,L.resultId,V.token)??{kind:a.DocumentDiagnosticReportKind.full,items:[]}}catch(v){if(v instanceof o.LSPCancellationError&&i.DiagnosticServerCancellationData.is(v.data)&&v.data.retriggerRequest===!1&&(d={state:u.outDated,document:S}),d===void 0&&v instanceof n.CancellationError)d={state:u.reschedule,document:S};else throw v}if(d=d??this.openRequests.get(I),d===void 0){this.client.error(`Lost request state in diagnostic pull model. Clearing diagnostics for ${I}`),this.diagnostics.delete(W);return}if(this.openRequests.delete(I),!this.tabs.isVisible(S)){this.documentStates.unTrack(y.document,S);return}if(d.state===u.outDated)return;D!==void 0&&(D.kind===a.DocumentDiagnosticReportKind.full&&this.diagnostics.set(W,D.items),L.pulledVersion=C,L.resultId=D.resultId),d.state===u.reschedule&&this.pull(S)}else P.state===u.active?(P.tokenSource.cancel(),this.openRequests.set(I,{state:u.reschedule,document:P.document})):P.state===u.outDated&&this.openRequests.set(I,{state:u.reschedule,document:P.document})}forgetDocument(S){const C=S instanceof n.Uri?S:S.uri,M=C.toString(),W=this.openRequests.get(M);this.options.workspaceDiagnostics?W!==void 0?this.openRequests.set(M,{state:u.reschedule,document:S}):this.pull(S,()=>{this.forget(y.document,S)}):(W!==void 0&&(W.state===u.active&&W.tokenSource.cancel(),this.openRequests.set(M,{state:u.outDated,document:S})),this.diagnostics.delete(C),this.forget(y.document,S))}pullWorkspace(){this.isDisposed||this.pullWorkspaceAsync().then(()=>{this.workspaceTimeout=(0,i.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3)},S=>{!(S instanceof o.LSPCancellationError)&&!i.DiagnosticServerCancellationData.is(S.data)&&(this.client.error("Workspace diagnostic pull failed.",S,!1),this.workspaceErrorCounter++),this.workspaceErrorCounter<=5&&(this.workspaceTimeout=(0,i.RAL)().timer.setTimeout(()=>{this.pullWorkspace()},2e3))})}async pullWorkspaceAsync(){if(!this.provider.provideWorkspaceDiagnostics||this.isDisposed)return;this.workspaceCancellation!==void 0&&(this.workspaceCancellation.cancel(),this.workspaceCancellation=void 0),this.workspaceCancellation=new n.CancellationTokenSource;const S=this.documentStates.getAllResultIds().map(C=>({uri:this.client.protocol2CodeConverter.asUri(C.uri),value:C.value}));await this.provider.provideWorkspaceDiagnostics(S,this.workspaceCancellation.token,C=>{if(!(!C||this.isDisposed))for(const M of C.items)M.kind===a.DocumentDiagnosticReportKind.full&&(this.documentStates.tracks(y.document,M.uri)||this.diagnostics.set(M.uri,M.items)),this.documentStates.update(y.workspace,M.uri,M.version??void 0,M.resultId)})}createProvider(){const S={onDidChangeDiagnostics:this.onDidChangeDiagnosticsEmitter.event,provideDiagnostics:(C,M,W)=>{const I=(L,V,D)=>{const d={identifier:this.options.identifier,textDocument:{uri:this.client.code2ProtocolConverter.asUri(L instanceof n.Uri?L:L.uri)},previousResultId:V};return this.isDisposed===!0||!this.client.isRunning()?{kind:a.DocumentDiagnosticReportKind.full,items:[]}:this.client.sendRequest(i.DocumentDiagnosticRequest.type,d,D).then(async v=>v==null||this.isDisposed||D.isCancellationRequested?{kind:a.DocumentDiagnosticReportKind.full,items:[]}:v.kind===i.DocumentDiagnosticReportKind.Full?{kind:a.DocumentDiagnosticReportKind.full,resultId:v.resultId,items:await this.client.protocol2CodeConverter.asDiagnostics(v.items,D)}:{kind:a.DocumentDiagnosticReportKind.unChanged,resultId:v.resultId},v=>this.client.handleFailedRequest(i.DocumentDiagnosticRequest.type,D,v,{kind:a.DocumentDiagnosticReportKind.full,items:[]}))},P=this.client.middleware;return P.provideDiagnostics?P.provideDiagnostics(C,M,W,I):I(C,M,W)}};return this.options.workspaceDiagnostics&&(S.provideWorkspaceDiagnostics=(C,M,W)=>{const I=async D=>D.kind===i.DocumentDiagnosticReportKind.Full?{kind:a.DocumentDiagnosticReportKind.full,uri:this.client.protocol2CodeConverter.asUri(D.uri),resultId:D.resultId,version:D.version,items:await this.client.protocol2CodeConverter.asDiagnostics(D.items,M)}:{kind:a.DocumentDiagnosticReportKind.unChanged,uri:this.client.protocol2CodeConverter.asUri(D.uri),resultId:D.resultId,version:D.version},P=D=>{const d=[];for(const v of D)d.push({uri:this.client.code2ProtocolConverter.asUri(v.uri),value:v.value});return d},L=(D,d)=>{const v=(0,r.generateUuid)(),R=this.client.onProgress(i.WorkspaceDiagnosticRequest.partialResult,v,async F=>{if(F==null){W(null);return}const q={items:[]};for(const $ of F.items)try{q.items.push(await I($))}catch(x){this.client.error("Converting workspace diagnostics failed.",x)}W(q)}),k={identifier:this.options.identifier,previousResultIds:P(D),partialResultToken:v};return this.isDisposed===!0||!this.client.isRunning()?{items:[]}:this.client.sendRequest(i.WorkspaceDiagnosticRequest.type,k,d).then(async F=>{if(d.isCancellationRequested)return{items:[]};const q={items:[]};for(const $ of F.items)q.items.push(await I($));return R.dispose(),W(q),{items:[]}},F=>(R.dispose(),this.client.handleFailedRequest(i.DocumentDiagnosticRequest.type,d,F,{items:[]})))},V=this.client.middleware;return V.provideWorkspaceDiagnostics?V.provideWorkspaceDiagnostics(C,M,W,L):L(C,M)}),S}dispose(){this.isDisposed=!0,this.workspaceCancellation?.cancel(),this.workspaceTimeout?.dispose();for(const[S,C]of this.openRequests)C.state===u.active&&C.tokenSource.cancel(),this.openRequests.set(S,{state:u.outDated,document:C.document});this.diagnostics.dispose()}}class N{constructor(S){this.diagnosticRequestor=S,this.documents=new i.LinkedMap,this.isDisposed=!1}add(S){if(this.isDisposed===!0)return;const C=f.asKey(S);this.documents.has(C)||(this.documents.set(C,S,i.Touch.Last),this.trigger())}remove(S){const C=f.asKey(S);this.documents.delete(C),this.documents.size===0?this.stop():C===this.endDocumentKey()&&(this.endDocument=this.documents.last)}trigger(){if(this.isDisposed!==!0){if(this.intervalHandle!==void 0){this.endDocument=this.documents.last;return}this.endDocument=this.documents.last,this.intervalHandle=(0,i.RAL)().timer.setInterval(()=>{const S=this.documents.first;if(S!==void 0){const C=f.asKey(S);this.diagnosticRequestor.pull(S),this.documents.set(C,S,i.Touch.Last),C===this.endDocumentKey()&&this.stop()}},200)}}dispose(){this.isDisposed=!0,this.stop(),this.documents.clear()}stop(){this.intervalHandle?.dispose(),this.intervalHandle=void 0,this.endDocument=void 0}endDocumentKey(){return this.endDocument!==void 0?f.asKey(this.endDocument):void 0}}class j{constructor(S,C,M){const W=S.clientOptions.diagnosticPullOptions??{onChange:!0,onSave:!1},I=S.protocol2CodeConverter.asDocumentSelector(M.documentSelector),P=[],L=F=>{const q=M.documentSelector;if(W.match!==void 0)return W.match(q,F);for(const $ of q)if(!!i.TextDocumentFilter.is($)){if(typeof $=="string"||$.language!==void 0&&$.language!=="*"||$.scheme!==void 0&&$.scheme!=="*"&&$.scheme!==F.scheme)return!1;if($.pattern!==void 0){const x=new t.Minimatch($.pattern,{noext:!0});if(!x.makeRe()||!x.match(F.fsPath))return!1}}return!0},V=F=>F instanceof n.Uri?L(F):n.languages.match(I,F)>0&&C.isVisible(F),D=F=>F instanceof n.Uri?this.activeTextDocument?.uri.toString()===F.toString():this.activeTextDocument===F;this.diagnosticRequestor=new h(S,C,M),this.backgroundScheduler=new N(this.diagnosticRequestor);const d=F=>{!V(F)||!M.interFileDependencies||D(F)||this.backgroundScheduler.add(F)};this.activeTextDocument=n.window.activeTextEditor?.document,n.window.onDidChangeActiveTextEditor(F=>{const q=this.activeTextDocument;this.activeTextDocument=F?.document,q!==void 0&&d(q),this.activeTextDocument!==void 0&&this.backgroundScheduler.remove(this.activeTextDocument)});const v=S.getFeature(i.DidOpenTextDocumentNotification.method);P.push(v.onNotificationSent(F=>{const q=F.textDocument;this.diagnosticRequestor.knows(y.document,q)||V(q)&&this.diagnosticRequestor.pull(q,()=>{d(q)})})),C.onOpen(F=>{for(const q of F){if(this.diagnosticRequestor.knows(y.document,q))continue;const $=q.toString();let x;for(const Z of n.workspace.textDocuments)if($===Z.uri.toString()){x=Z;break}x!==void 0&&V(x)?this.diagnosticRequestor.pull(x,()=>{d(x)}):V(q)&&this.diagnosticRequestor.pull(q,()=>{d(q)})}});const R=new Set;for(const F of n.workspace.textDocuments)V(F)&&(this.diagnosticRequestor.pull(F,()=>{d(F)}),R.add(F.uri.toString()));if(W.onTabs===!0)for(const F of C.getTabResources())!R.has(F.toString())&&V(F)&&this.diagnosticRequestor.pull(F,()=>{d(F)});if(W.onChange===!0){const F=S.getFeature(i.DidChangeTextDocumentNotification.method);P.push(F.onNotificationSent(async q=>{const $=q.textDocument;(W.filter===void 0||!W.filter($,c.onType))&&this.diagnosticRequestor.knows(y.document,$)&&this.diagnosticRequestor.pull($,()=>{this.backgroundScheduler.trigger()})}))}if(W.onSave===!0){const F=S.getFeature(i.DidSaveTextDocumentNotification.method);P.push(F.onNotificationSent(q=>{const $=q.textDocument;(W.filter===void 0||!W.filter($,c.onSave))&&this.diagnosticRequestor.knows(y.document,$)&&this.diagnosticRequestor.pull(q.textDocument,()=>{this.backgroundScheduler.trigger()})}))}const k=S.getFeature(i.DidCloseTextDocumentNotification.method);P.push(k.onNotificationSent(F=>{this.cleanUpDocument(F.textDocument)})),C.onClose(F=>{for(const q of F)this.cleanUpDocument(q)}),this.diagnosticRequestor.onDidChangeDiagnosticsEmitter.event(()=>{for(const F of n.workspace.textDocuments)V(F)&&this.diagnosticRequestor.pull(F)}),M.workspaceDiagnostics===!0&&M.identifier!=="da348dc5-c30a-4515-9d98-31ff3be38d14"&&this.diagnosticRequestor.pullWorkspace(),this.disposable=n.Disposable.from(...P,this.backgroundScheduler,this.diagnosticRequestor)}get onDidChangeDiagnosticsEmitter(){return this.diagnosticRequestor.onDidChangeDiagnosticsEmitter}get diagnostics(){return this.diagnosticRequestor.provider}cleanUpDocument(S){this.diagnosticRequestor.knows(y.document,S)&&(this.diagnosticRequestor.forgetDocument(S),this.backgroundScheduler.remove(S))}}class X extends o.TextDocumentLanguageFeature{constructor(S){super(S,i.DocumentDiagnosticRequest.type)}fillClientCapabilities(S){let C=s(s(S,"textDocument"),"diagnostic");C.dynamicRegistration=!0,C.relatedDocumentSupport=!1,s(s(S,"workspace"),"diagnostics").refreshSupport=!0}initialize(S,C){this._client.onRequest(i.DiagnosticRefreshRequest.type,async()=>{for(const P of this.getAllProviders())P.onDidChangeDiagnosticsEmitter.fire()});let[W,I]=this.getRegistration(C,S.diagnosticProvider);!W||!I||this.register({id:W,registerOptions:I})}dispose(){this.tabs!==void 0&&(this.tabs.dispose(),this.tabs=void 0),super.dispose()}registerLanguageProvider(S){this.tabs===void 0&&(this.tabs=new p);const C=new j(this._client,this.tabs,S);return[C.disposable,C]}}e.DiagnosticFeature=X}(So);var bi={};Object.defineProperty(bi,"__esModule",{value:!0}),bi.NotebookDocumentSyncFeature=void 0;const Ze=he.default,Ol=Ci,wt=ge,Il=Re,La=Pe;function $a(e,t){return e[t]===void 0&&(e[t]={}),e[t]}var on;(function(e){(function(t){function n(y,f){return{version:y.version,uri:f.asUri(y.uri)}}t.asVersionedNotebookDocumentIdentifier=n;function i(y,f,g){const h=wt.NotebookDocument.create(g.asUri(y.uri),y.notebookType,y.version,r(f,g));return Object.keys(y.metadata).length>0&&(h.metadata=o(y.metadata)),h}t.asNotebookDocument=i;function r(y,f){return y.map(g=>s(g,f))}t.asNotebookCells=r;function o(y){return c(new Set,y)}t.asMetadata=o;function s(y,f){const g=wt.NotebookCell.create(a(y.kind),f.asUri(y.document.uri));return Object.keys(y.metadata).length>0&&(g.metadata=o(y.metadata)),y.executionSummary!==void 0&&La.number(y.executionSummary.executionOrder)&&La.boolean(y.executionSummary.success)&&(g.executionSummary={executionOrder:y.executionSummary.executionOrder,success:y.executionSummary.success}),g}t.asNotebookCell=s;function a(y){switch(y){case Ze.NotebookCellKind.Markup:return wt.NotebookCellKind.Markup;case Ze.NotebookCellKind.Code:return wt.NotebookCellKind.Code}}function c(y,f){if(y.has(f))throw new Error("Can't deep copy cyclic structures.");if(Array.isArray(f)){const g=[];for(const h of f)if(h!==null&&typeof h=="object"||Array.isArray(h))g.push(c(y,h));else{if(h instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");g.push(h)}return g}else{const g=Object.keys(f),h=Object.create(null);for(const N of g){const j=f[N];if(j!==null&&typeof j=="object"||Array.isArray(j))h[N]=c(y,j);else{if(j instanceof RegExp)throw new Error("Can't transfer regular expressions to the server");h[N]=j}}return h}}function u(y,f){const g=f.asChangeTextDocumentParams(y,y.document.uri,y.document.version);return{document:g.textDocument,changes:g.contentChanges}}t.asTextContentChange=u;function p(y,f){const g=Object.create(null);if(y.metadata&&(g.metadata=e.c2p.asMetadata(y.metadata)),y.cells!==void 0){const h=Object.create(null),N=y.cells;N.structure&&(h.structure={array:{start:N.structure.array.start,deleteCount:N.structure.array.deleteCount,cells:N.structure.array.cells!==void 0?N.structure.array.cells.map(j=>e.c2p.asNotebookCell(j,f)):void 0},didOpen:N.structure.didOpen!==void 0?N.structure.didOpen.map(j=>f.asOpenTextDocumentParams(j.document).textDocument):void 0,didClose:N.structure.didClose!==void 0?N.structure.didClose.map(j=>f.asCloseTextDocumentParams(j.document).textDocument):void 0}),N.data!==void 0&&(h.data=N.data.map(j=>e.c2p.asNotebookCell(j,f))),N.textContent!==void 0&&(h.textContent=N.textContent.map(j=>e.c2p.asTextContentChange(j,f))),Object.keys(h).length>0&&(g.cells=h)}return g}t.asNotebookDocumentChangeEvent=p})(e.c2p||(e.c2p={}))})(on||(on={}));var Oo;(function(e){function t(a,c,u){const p=a.length,y=c.length;let f=0;for(;f<y&&f<p&&n(a[f],c[f],u);)f++;if(f<y&&f<p){let g=p-1,h=y-1;for(;g>=0&&h>=0&&n(a[g],c[h],u);)g--,h--;const N=g+1-f,j=f===h+1?void 0:c.slice(f,h+1);return j!==void 0?{start:f,deleteCount:N,cells:j}:{start:f,deleteCount:N}}else return f<y?{start:f,deleteCount:0,cells:c.slice(f)}:f<p?{start:f,deleteCount:p-f}:void 0}e.computeDiff=t;function n(a,c,u=!0){return a.kind!==c.kind||a.document.uri.toString()!==c.document.uri.toString()||a.document.languageId!==c.document.languageId||!i(a.executionSummary,c.executionSummary)?!1:!u||u&&o(a.metadata,c.metadata)}function i(a,c){return a===c?!0:a===void 0||c===void 0?!1:a.executionOrder===c.executionOrder&&a.success===c.success&&r(a.timing,c.timing)}function r(a,c){return a===c?!0:a===void 0||c===void 0?!1:a.startTime===c.startTime&&a.endTime===c.endTime}function o(a,c){if(a===c)return!0;if(a==null||c===null||c===void 0||typeof a!=typeof c||typeof a!="object")return!1;const u=Array.isArray(a),p=Array.isArray(c);if(u!==p)return!1;if(u&&p){if(a.length!==c.length)return!1;for(let y=0;y<a.length;y++)if(!o(a[y],c[y]))return!1}if(s(a)&&s(c)){const y=Object.keys(a),f=Object.keys(c);if(y.length!==f.length||(y.sort(),f.sort(),!o(y,f)))return!1;for(let g=0;g<y.length;g++){const h=y[g];if(!o(a[h],c[h]))return!1}return!0}return!1}function s(a){return a!==null&&typeof a=="object"}e.isObjectLiteral=s})(Oo||(Oo={}));var Io;(function(e){function t(n,i){if(typeof n=="string")return n==="*"||i.notebookType===n;if(n.notebookType!==void 0&&n.notebookType!=="*"&&i.notebookType!==n.notebookType)return!1;const r=i.uri;if(n.scheme!==void 0&&n.scheme!=="*"&&r.scheme!==n.scheme)return!1;if(n.pattern!==void 0){const o=new Ol.Minimatch(n.pattern,{noext:!0});if(!o.makeRe()||!o.match(r.fsPath))return!1}return!0}e.matchNotebook=t})(Io||(Io={}));var Di;(function(e){function t(i){const r=i.notebookSelector,o=[];for(const s of r){const a=(typeof s.notebook=="string"?s.notebook:s.notebook?.notebookType)??"*",c=typeof s.notebook=="string"?void 0:s.notebook?.scheme,u=typeof s.notebook=="string"?void 0:s.notebook?.pattern;if(s.cells!==void 0)for(const p of s.cells)o.push(n(a,c,u,p.language));else o.push(n(a,c,u,void 0))}return o}e.asDocumentSelector=t;function n(i,r,o,s){return r===void 0&&o===void 0?{notebook:i,language:s}:{notebook:{notebookType:i,scheme:r,pattern:o},language:s}}})(Di||(Di={}));var Si;(function(e){function t(n){return{cells:n,uris:new Set(n.map(i=>i.document.uri.toString()))}}e.create=t})(Si||(Si={}));class Ri{constructor(t,n){this.client=t,this.options=n,this.notebookSyncInfo=new Map,this.notebookDidOpen=new Set,this.disposables=[],this.selector=t.protocol2CodeConverter.asDocumentSelector(Di.asDocumentSelector(n)),Ze.workspace.onDidOpenNotebookDocument(i=>{this.notebookDidOpen.add(i.uri.toString()),this.didOpen(i)},void 0,this.disposables);for(const i of Ze.workspace.notebookDocuments)this.notebookDidOpen.add(i.uri.toString()),this.didOpen(i);Ze.workspace.onDidChangeNotebookDocument(i=>this.didChangeNotebookDocument(i),void 0,this.disposables),this.options.save===!0&&Ze.workspace.onDidSaveNotebookDocument(i=>this.didSave(i),void 0,this.disposables),Ze.workspace.onDidCloseNotebookDocument(i=>{this.didClose(i),this.notebookDidOpen.delete(i.uri.toString())},void 0,this.disposables)}getState(){for(const t of Ze.workspace.notebookDocuments)if(this.getMatchingCells(t)!==void 0)return{kind:"document",id:"$internal",registrations:!0,matches:!0};return{kind:"document",id:"$internal",registrations:!0,matches:!1}}get mode(){return"notebook"}handles(t){return Ze.languages.match(this.selector,t)>0}didOpenNotebookCellTextDocument(t,n){if(Ze.languages.match(this.selector,n.document)===0||!this.notebookDidOpen.has(t.uri.toString()))return;const i=this.notebookSyncInfo.get(t.uri.toString()),r=this.cellMatches(t,n);if(i!==void 0){const o=i.uris.has(n.document.uri.toString());if(r&&o||!r&&!o)return;if(r){const s=this.getMatchingCells(t);if(s!==void 0){const a=this.asNotebookDocumentChangeEvent(t,void 0,i,s);a!==void 0&&this.doSendChange(a,s).catch(()=>{})}}}else r&&this.doSendOpen(t,[n]).catch(()=>{})}didChangeNotebookCellTextDocument(t,n){Ze.languages.match(this.selector,n.document)!==0&&this.doSendChange({notebook:t,cells:{textContent:[n]}},void 0).catch(()=>{})}didCloseNotebookCellTextDocument(t,n){const i=this.notebookSyncInfo.get(t.uri.toString());if(i===void 0)return;const r=n.document.uri,o=i.cells.findIndex(s=>s.document.uri.toString()===r.toString());if(o!==-1)if(o===0&&i.cells.length===1)this.doSendClose(t,i.cells).catch(()=>{});else{const s=i.cells.slice(),a=s.splice(o,1);this.doSendChange({notebook:t,cells:{structure:{array:{start:o,deleteCount:1},didClose:a}}},s).catch(()=>{})}}dispose(){for(const t of this.disposables)t.dispose()}didOpen(t,n=this.getMatchingCells(t),i=this.notebookSyncInfo.get(t.uri.toString())){if(i!==void 0)if(n!==void 0){const r=this.asNotebookDocumentChangeEvent(t,void 0,i,n);r!==void 0&&this.doSendChange(r,n).catch(()=>{})}else this.doSendClose(t,[]).catch(()=>{});else{if(n===void 0)return;this.doSendOpen(t,n).catch(()=>{})}}didChangeNotebookDocument(t){const n=t.notebook,i=this.notebookSyncInfo.get(n.uri.toString());if(i===void 0){if(t.contentChanges.length===0)return;const r=this.getMatchingCells(n);if(r===void 0)return;this.didOpen(n,r,i)}else{const r=this.getMatchingCells(n);if(r===void 0){this.didClose(n,i);return}const o=this.asNotebookDocumentChangeEvent(t.notebook,t,i,r);o!==void 0&&this.doSendChange(o,r).catch(()=>{})}}didSave(t){this.notebookSyncInfo.get(t.uri.toString())!==void 0&&this.doSendSave(t).catch(()=>{})}didClose(t,n=this.notebookSyncInfo.get(t.uri.toString())){if(n===void 0)return;const i=t.getCells().filter(r=>n.uris.has(r.document.uri.toString()));this.doSendClose(t,i).catch(()=>{})}async sendDidOpenNotebookDocument(t){const n=this.getMatchingCells(t);if(n!==void 0)return this.doSendOpen(t,n)}async doSendOpen(t,n){const i=async(o,s)=>{const a=on.c2p.asNotebookDocument(o,s,this.client.code2ProtocolConverter),c=s.map(u=>this.client.code2ProtocolConverter.asTextDocumentItem(u.document));try{await this.client.sendNotification(wt.DidOpenNotebookDocumentNotification.type,{notebookDocument:a,cellTextDocuments:c})}catch(u){throw this.client.error("Sending DidOpenNotebookDocumentNotification failed",u),u}},r=this.client.middleware?.notebooks;return this.notebookSyncInfo.set(t.uri.toString(),Si.create(n)),r?.didOpen!==void 0?r.didOpen(t,n,i):i(t,n)}async sendDidChangeNotebookDocument(t){return this.doSendChange(t,void 0)}async doSendChange(t,n=this.getMatchingCells(t.notebook)){const i=async o=>{try{await this.client.sendNotification(wt.DidChangeNotebookDocumentNotification.type,{notebookDocument:on.c2p.asVersionedNotebookDocumentIdentifier(o.notebook,this.client.code2ProtocolConverter),change:on.c2p.asNotebookDocumentChangeEvent(o,this.client.code2ProtocolConverter)})}catch(s){throw this.client.error("Sending DidChangeNotebookDocumentNotification failed",s),s}},r=this.client.middleware?.notebooks;return t.cells?.structure!==void 0&&this.notebookSyncInfo.set(t.notebook.uri.toString(),Si.create(n??[])),r?.didChange!==void 0?r?.didChange(t,i):i(t)}async sendDidSaveNotebookDocument(t){return this.doSendSave(t)}async doSendSave(t){const n=async r=>{try{await this.client.sendNotification(wt.DidSaveNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(r.uri)}})}catch(o){throw this.client.error("Sending DidSaveNotebookDocumentNotification failed",o),o}},i=this.client.middleware?.notebooks;return i?.didSave!==void 0?i.didSave(t,n):n(t)}async sendDidCloseNotebookDocument(t){return this.doSendClose(t,this.getMatchingCells(t)??[])}async doSendClose(t,n){const i=async(o,s)=>{try{await this.client.sendNotification(wt.DidCloseNotebookDocumentNotification.type,{notebookDocument:{uri:this.client.code2ProtocolConverter.asUri(o.uri)},cellTextDocuments:s.map(a=>this.client.code2ProtocolConverter.asTextDocumentIdentifier(a.document))})}catch(a){throw this.client.error("Sending DidCloseNotebookDocumentNotification failed",a),a}},r=this.client.middleware?.notebooks;return this.notebookSyncInfo.delete(t.uri.toString()),r?.didClose!==void 0?r.didClose(t,n,i):i(t,n)}asNotebookDocumentChangeEvent(t,n,i,r){if(n!==void 0&&n.notebook!==t)throw new Error("Notebook must be identical");const o={notebook:t};n?.metadata!==void 0&&(o.metadata=on.c2p.asMetadata(n.metadata));let s;if(n?.cellChanges!==void 0&&n.cellChanges.length>0){const a=[];s=new Set(r.map(c=>c.document.uri.toString()));for(const c of n.cellChanges)s.has(c.cell.document.uri.toString())&&(c.executionSummary!==void 0||c.metadata!==void 0)&&a.push(c.cell);a.length>0&&(o.cells=o.cells??{},o.cells.data=a)}if((n?.contentChanges!==void 0&&n.contentChanges.length>0||n===void 0)&&i!==void 0&&r!==void 0){const a=i.cells,c=r,u=Oo.computeDiff(a,c,!1);let p,y;if(u!==void 0){p=u.cells===void 0?new Map:new Map(u.cells.map(h=>[h.document.uri.toString(),h])),y=u.deleteCount===0?new Map:new Map(a.slice(u.start,u.start+u.deleteCount).map(h=>[h.document.uri.toString(),h]));for(const h of Array.from(y.keys()))p.has(h)&&(y.delete(h),p.delete(h));o.cells=o.cells??{};const f=[],g=[];if(p.size>0||y.size>0){for(const h of p.values())f.push(h);for(const h of y.values())g.push(h)}o.cells.structure={array:u,didOpen:f,didClose:g}}}return Object.keys(o).length>1?o:void 0}getMatchingCells(t,n=t.getCells()){if(this.options.notebookSelector!==void 0){for(const i of this.options.notebookSelector)if(i.notebook===void 0||Io.matchNotebook(i.notebook,t)){const r=this.filterCells(t,n,i.cells);return r.length===0?void 0:r}}}cellMatches(t,n){const i=this.getMatchingCells(t,[n]);return i!==void 0&&i[0]===n}filterCells(t,n,i){const r=i!==void 0?n.filter(o=>{const s=o.document.languageId;return i.some(a=>a.language==="*"||s===a.language)}):n;return typeof this.client.clientOptions.notebookDocumentOptions?.filterCells=="function"?this.client.clientOptions.notebookDocumentOptions.filterCells(t,r):r}}class Ut{constructor(t){this.client=t,this.registrations=new Map,this.registrationType=wt.NotebookDocumentSyncRegistrationType.type,Ze.workspace.onDidOpenTextDocument(n=>{if(n.uri.scheme!==Ut.CellScheme)return;const[i,r]=this.findNotebookDocumentAndCell(n);if(!(i===void 0||r===void 0))for(const o of this.registrations.values())o instanceof Ri&&o.didOpenNotebookCellTextDocument(i,r)}),Ze.workspace.onDidChangeTextDocument(n=>{if(n.contentChanges.length===0)return;const i=n.document;if(i.uri.scheme!==Ut.CellScheme)return;const[r]=this.findNotebookDocumentAndCell(i);if(r!==void 0)for(const o of this.registrations.values())o instanceof Ri&&o.didChangeNotebookCellTextDocument(r,n)}),Ze.workspace.onDidCloseTextDocument(n=>{if(n.uri.scheme!==Ut.CellScheme)return;const[i,r]=this.findNotebookDocumentAndCell(n);if(!(i===void 0||r===void 0))for(const o of this.registrations.values())o instanceof Ri&&o.didCloseNotebookCellTextDocument(i,r)})}getState(){if(this.registrations.size===0)return{kind:"document",id:this.registrationType.method,registrations:!1,matches:!1};for(const t of this.registrations.values()){const n=t.getState();if(n.kind==="document"&&n.registrations===!0&&n.matches===!0)return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!0}}return{kind:"document",id:this.registrationType.method,registrations:!0,matches:!1}}fillClientCapabilities(t){const n=$a($a(t,"notebookDocument"),"synchronization");n.dynamicRegistration=!0,n.executionSummarySupport=!0}preInitialize(t){const n=t.notebookDocumentSync;n!==void 0&&(this.dedicatedChannel=this.client.protocol2CodeConverter.asDocumentSelector(Di.asDocumentSelector(n)))}initialize(t){const n=t.notebookDocumentSync;if(n===void 0)return;const i=n.id??Il.generateUuid();this.register({id:i,registerOptions:n})}register(t){const n=new Ri(this.client,t.registerOptions);this.registrations.set(t.id,n)}unregister(t){const n=this.registrations.get(t);n&&n.dispose()}dispose(){for(const t of this.registrations.values())t.dispose();this.registrations.clear()}handles(t){if(t.uri.scheme!==Ut.CellScheme)return!1;if(this.dedicatedChannel!==void 0&&Ze.languages.match(this.dedicatedChannel,t)>0)return!0;for(const n of this.registrations.values())if(n.handles(t))return!0;return!1}getProvider(t){for(const n of this.registrations.values())if(n.handles(t.document))return n}findNotebookDocumentAndCell(t){const n=t.uri.toString();for(const i of Ze.workspace.notebookDocuments)for(const r of i.getCells())if(r.document.uri.toString()===n)return[i,r];return[void 0,void 0]}}bi.NotebookDocumentSyncFeature=Ut,Ut.CellScheme="vscode-notebook-cell";var Et={};Object.defineProperty(Et,"__esModule",{value:!0}),Et.SyncConfigurationFeature=Et.toJSONObject=Et.ConfigurationFeature=void 0;const sn=he.default,On=ge,Nl=Pe,ql=Re,Aa=Te;class Ml{constructor(t){this._client=t}getState(){return{kind:"static"}}fillClientCapabilities(t){t.workspace=t.workspace||{},t.workspace.configuration=!0}initialize(){let t=this._client;t.onRequest(On.ConfigurationRequest.type,(n,i)=>{let r=s=>{let a=[];for(let c of s.items){let u=c.scopeUri!==void 0&&c.scopeUri!==null?this._client.protocol2CodeConverter.asUri(c.scopeUri):void 0;a.push(this.getConfiguration(u,c.section!==null?c.section:void 0))}return a},o=t.middleware.workspace;return o&&o.configuration?o.configuration(n,i,r):r(n)})}getConfiguration(t,n){let i=null;if(n){let r=n.lastIndexOf(".");if(r===-1)i=$t(sn.workspace.getConfiguration(void 0,t).get(n));else{let o=sn.workspace.getConfiguration(n.substr(0,r),t);o&&(i=$t(o.get(n.substr(r+1))))}}else{let r=sn.workspace.getConfiguration(void 0,t);i={};for(let o of Object.keys(r))r.has(o)&&(i[o]=$t(r.get(o)))}return i===void 0&&(i=null),i}dispose(){}}Et.ConfigurationFeature=Ml;function $t(e){if(e){if(Array.isArray(e))return e.map($t);if(typeof e=="object"){const t=Object.create(null);for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=$t(e[n]));return t}}return e}Et.toJSONObject=$t;class Ll{constructor(t){this._client=t,this.isDisposed=!1,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return On.DidChangeConfigurationNotification.type}fillClientCapabilities(t){(0,Aa.ensure)((0,Aa.ensure)(t,"workspace"),"didChangeConfiguration").dynamicRegistration=!0}initialize(){let t=this._client.clientOptions.synchronize?.configurationSection;t!==void 0&&this.register({id:ql.generateUuid(),registerOptions:{section:t}})}register(t){let n=sn.workspace.onDidChangeConfiguration(i=>{this.onDidChangeConfiguration(t.registerOptions.section,i)});this._listeners.set(t.id,n),t.registerOptions.section!==void 0&&this.onDidChangeConfiguration(t.registerOptions.section,void 0)}unregister(t){let n=this._listeners.get(t);n&&(this._listeners.delete(t),n.dispose())}dispose(){for(const t of this._listeners.values())t.dispose();this._listeners.clear(),this.isDisposed=!0}onDidChangeConfiguration(t,n){if(this.isDisposed)return;let i;if(Nl.string(t)?i=[t]:i=t,i!==void 0&&n!==void 0&&!i.some(a=>n.affectsConfiguration(a)))return;const r=async s=>s===void 0?this._client.sendNotification(On.DidChangeConfigurationNotification.type,{settings:null}):this._client.sendNotification(On.DidChangeConfigurationNotification.type,{settings:this.extractSettingsInformation(s)});let o=this._client.middleware.workspace?.didChangeConfiguration;(o?o(i,r):r(i)).catch(s=>{this._client.error(`Sending notification ${On.DidChangeConfigurationNotification.type.method} failed`,s)})}extractSettingsInformation(t){function n(o,s){let a=o;for(let c=0;c<s.length-1;c++){let u=a[s[c]];u||(u=Object.create(null),a[s[c]]=u),a=u}return a}let i=this._client.clientOptions.workspaceFolder?this._client.clientOptions.workspaceFolder.uri:void 0,r=Object.create(null);for(let o=0;o<t.length;o++){let s=t[o],a=s.indexOf("."),c=null;if(a>=0?c=sn.workspace.getConfiguration(s.substr(0,a),i).get(s.substr(a+1)):c=sn.workspace.getConfiguration(void 0,i).get(s),c){let u=t[o].split(".");n(r,u)[u[u.length-1]]=$t(c)}}return r}}Et.SyncConfigurationFeature=Ll;var it={};Object.defineProperty(it,"__esModule",{value:!0}),it.DidSaveTextDocumentFeature=it.WillSaveWaitUntilFeature=it.WillSaveFeature=it.DidChangeTextDocumentFeature=it.DidCloseTextDocumentFeature=it.DidOpenTextDocumentFeature=void 0;const st=he.default,Me=ge,Ae=Te,an=Re;class $l extends Ae.TextDocumentEventFeature{constructor(t,n){super(t,st.workspace.onDidOpenTextDocument,Me.DidOpenTextDocumentNotification.type,()=>t.middleware.didOpen,i=>t.code2ProtocolConverter.asOpenTextDocumentParams(i),i=>i,Ae.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=n}get openDocuments(){return this._syncedDocuments.values()}fillClientCapabilities(t){(0,Ae.ensure)((0,Ae.ensure)(t,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(t,n){const i=t.resolvedTextDocumentSync;n&&i&&i.openClose&&this.register({id:an.generateUuid(),registerOptions:{documentSelector:n}})}get registrationType(){return Me.DidOpenTextDocumentNotification.type}register(t){if(super.register(t),!t.registerOptions.documentSelector)return;const n=this._client.protocol2CodeConverter.asDocumentSelector(t.registerOptions.documentSelector);st.workspace.textDocuments.forEach(i=>{const r=i.uri.toString();if(!this._syncedDocuments.has(r)&&st.languages.match(n,i)>0&&!this._client.hasDedicatedTextSynchronizationFeature(i)){const o=this._client.middleware,s=a=>this._client.sendNotification(this._type,this._createParams(a));(o.didOpen?o.didOpen(i,s):s(i)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)}),this._syncedDocuments.set(r,i)}})}getTextDocument(t){return t}notificationSent(t,n,i){this._syncedDocuments.set(t.uri.toString(),t),super.notificationSent(t,n,i)}}it.DidOpenTextDocumentFeature=$l;class Al extends Ae.TextDocumentEventFeature{constructor(t,n,i){super(t,st.workspace.onDidCloseTextDocument,Me.DidCloseTextDocumentNotification.type,()=>t.middleware.didClose,r=>t.code2ProtocolConverter.asCloseTextDocumentParams(r),r=>r,Ae.TextDocumentEventFeature.textDocumentFilter),this._syncedDocuments=n,this._pendingTextDocumentChanges=i}get registrationType(){return Me.DidCloseTextDocumentNotification.type}fillClientCapabilities(t){(0,Ae.ensure)((0,Ae.ensure)(t,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(t,n){let i=t.resolvedTextDocumentSync;n&&i&&i.openClose&&this.register({id:an.generateUuid(),registerOptions:{documentSelector:n}})}async callback(t){await super.callback(t),this._pendingTextDocumentChanges.delete(t.uri.toString())}getTextDocument(t){return t}notificationSent(t,n,i){this._syncedDocuments.delete(t.uri.toString()),super.notificationSent(t,n,i)}unregister(t){const n=this._selectors.get(t);super.unregister(t);const i=this._selectors.values();this._syncedDocuments.forEach(r=>{if(st.languages.match(n,r)>0&&!this._selectorFilter(i,r)&&!this._client.hasDedicatedTextSynchronizationFeature(r)){let o=this._client.middleware,s=a=>this._client.sendNotification(this._type,this._createParams(a));this._syncedDocuments.delete(r.uri.toString()),(o.didClose?o.didClose(r,s):s(r)).catch(a=>{this._client.error(`Sending document notification ${this._type.method} failed`,a)})}})}}it.DidCloseTextDocumentFeature=Al;class jl extends Ae.DynamicDocumentFeature{constructor(t,n){super(t),this._changeData=new Map,this._onNotificationSent=new st.EventEmitter,this._onPendingChangeAdded=new st.EventEmitter,this._pendingTextDocumentChanges=n,this._syncKind=Me.TextDocumentSyncKind.None}get onNotificationSent(){return this._onNotificationSent.event}get onPendingChangeAdded(){return this._onPendingChangeAdded.event}get syncKind(){return this._syncKind}get registrationType(){return Me.DidChangeTextDocumentNotification.type}fillClientCapabilities(t){(0,Ae.ensure)((0,Ae.ensure)(t,"textDocument"),"synchronization").dynamicRegistration=!0}initialize(t,n){let i=t.resolvedTextDocumentSync;n&&i&&i.change!==void 0&&i.change!==Me.TextDocumentSyncKind.None&&this.register({id:an.generateUuid(),registerOptions:Object.assign({},{documentSelector:n},{syncKind:i.change})})}register(t){!t.registerOptions.documentSelector||(this._listener||(this._listener=st.workspace.onDidChangeTextDocument(this.callback,this)),this._changeData.set(t.id,{syncKind:t.registerOptions.syncKind,documentSelector:this._client.protocol2CodeConverter.asDocumentSelector(t.registerOptions.documentSelector)}),this.updateSyncKind(t.registerOptions.syncKind))}*getDocumentSelectors(){for(const t of this._changeData.values())yield t.documentSelector}async callback(t){if(t.contentChanges.length===0)return;const n=t.document.uri,i=t.document.version,r=[];for(const o of this._changeData.values())if(st.languages.match(o.documentSelector,t.document)>0&&!this._client.hasDedicatedTextSynchronizationFeature(t.document)){const s=this._client.middleware;if(o.syncKind===Me.TextDocumentSyncKind.Incremental){const a=async c=>{const u=this._client.code2ProtocolConverter.asChangeTextDocumentParams(c,n,i);await this._client.sendNotification(Me.DidChangeTextDocumentNotification.type,u),this.notificationSent(c.document,Me.DidChangeTextDocumentNotification.type,u)};r.push(s.didChange?s.didChange(t,c=>a(c)):a(t))}else if(o.syncKind===Me.TextDocumentSyncKind.Full){const a=async c=>{const u=c.document.uri.toString();this._pendingTextDocumentChanges.set(u,c.document),this._onPendingChangeAdded.fire()};r.push(s.didChange?s.didChange(t,c=>a(c)):a(t))}}return Promise.all(r).then(void 0,o=>{throw this._client.error(`Sending document notification ${Me.DidChangeTextDocumentNotification.type.method} failed`,o),o})}notificationSent(t,n,i){this._onNotificationSent.fire({textDocument:t,type:n,params:i})}unregister(t){if(this._changeData.delete(t),this._changeData.size===0)this._listener&&(this._listener.dispose(),this._listener=void 0),this._syncKind=Me.TextDocumentSyncKind.None;else{this._syncKind=Me.TextDocumentSyncKind.None;for(const n of this._changeData.values())if(this.updateSyncKind(n.syncKind),this._syncKind===Me.TextDocumentSyncKind.Full)break}}dispose(){this._pendingTextDocumentChanges.clear(),this._changeData.clear(),this._syncKind=Me.TextDocumentSyncKind.None,this._listener&&(this._listener.dispose(),this._listener=void 0)}getPendingDocumentChanges(t){if(this._pendingTextDocumentChanges.size===0)return[];let n;if(t.size===0)n=Array.from(this._pendingTextDocumentChanges.values()),this._pendingTextDocumentChanges.clear();else{n=[];for(const i of this._pendingTextDocumentChanges)t.has(i[0])||(n.push(i[1]),this._pendingTextDocumentChanges.delete(i[0]))}return n}getProvider(t){for(const n of this._changeData.values())if(st.languages.match(n.documentSelector,t)>0)return{send:i=>this.callback(i)}}updateSyncKind(t){if(this._syncKind!==Me.TextDocumentSyncKind.Full)switch(t){case Me.TextDocumentSyncKind.Full:this._syncKind=t;break;case Me.TextDocumentSyncKind.Incremental:this._syncKind===Me.TextDocumentSyncKind.None&&(this._syncKind=Me.TextDocumentSyncKind.Incremental);break}}}it.DidChangeTextDocumentFeature=jl;class Hl extends Ae.TextDocumentEventFeature{constructor(t){super(t,st.workspace.onWillSaveTextDocument,Me.WillSaveTextDocumentNotification.type,()=>t.middleware.willSave,n=>t.code2ProtocolConverter.asWillSaveTextDocumentParams(n),n=>n.document,(n,i)=>Ae.TextDocumentEventFeature.textDocumentFilter(n,i.document))}get registrationType(){return Me.WillSaveTextDocumentNotification.type}fillClientCapabilities(t){let n=(0,Ae.ensure)((0,Ae.ensure)(t,"textDocument"),"synchronization");n.willSave=!0}initialize(t,n){let i=t.resolvedTextDocumentSync;n&&i&&i.willSave&&this.register({id:an.generateUuid(),registerOptions:{documentSelector:n}})}getTextDocument(t){return t.document}}it.WillSaveFeature=Hl;class Wl extends Ae.DynamicDocumentFeature{constructor(t){super(t),this._selectors=new Map}getDocumentSelectors(){return this._selectors.values()}get registrationType(){return Me.WillSaveTextDocumentWaitUntilRequest.type}fillClientCapabilities(t){let n=(0,Ae.ensure)((0,Ae.ensure)(t,"textDocument"),"synchronization");n.willSaveWaitUntil=!0}initialize(t,n){let i=t.resolvedTextDocumentSync;n&&i&&i.willSaveWaitUntil&&this.register({id:an.generateUuid(),registerOptions:{documentSelector:n}})}register(t){!t.registerOptions.documentSelector||(this._listener||(this._listener=st.workspace.onWillSaveTextDocument(this.callback,this)),this._selectors.set(t.id,this._client.protocol2CodeConverter.asDocumentSelector(t.registerOptions.documentSelector)))}callback(t){if(Ae.TextDocumentEventFeature.textDocumentFilter(this._selectors.values(),t.document)&&!this._client.hasDedicatedTextSynchronizationFeature(t.document)){let n=this._client.middleware,i=r=>this._client.sendRequest(Me.WillSaveTextDocumentWaitUntilRequest.type,this._client.code2ProtocolConverter.asWillSaveTextDocumentParams(r)).then(async o=>{let s=await this._client.protocol2CodeConverter.asTextEdits(o);return s===void 0?[]:s});t.waitUntil(n.willSaveWaitUntil?n.willSaveWaitUntil(t,i):i(t))}}unregister(t){this._selectors.delete(t),this._selectors.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._selectors.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}}it.WillSaveWaitUntilFeature=Wl;class Ul extends Ae.TextDocumentEventFeature{constructor(t){super(t,st.workspace.onDidSaveTextDocument,Me.DidSaveTextDocumentNotification.type,()=>t.middleware.didSave,n=>t.code2ProtocolConverter.asSaveTextDocumentParams(n,this._includeText),n=>n,Ae.TextDocumentEventFeature.textDocumentFilter),this._includeText=!1}get registrationType(){return Me.DidSaveTextDocumentNotification.type}fillClientCapabilities(t){(0,Ae.ensure)((0,Ae.ensure)(t,"textDocument"),"synchronization").didSave=!0}initialize(t,n){const i=t.resolvedTextDocumentSync;if(n&&i&&i.save){const r=typeof i.save=="boolean"?{includeText:!1}:{includeText:!!i.save.includeText};this.register({id:an.generateUuid(),registerOptions:Object.assign({},{documentSelector:n},r)})}}register(t){this._includeText=!!t.registerOptions.includeText,super.register(t)}getTextDocument(t){return t}}it.DidSaveTextDocumentFeature=Ul;var Ti={};Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.CompletionItemFeature=void 0;const xl=he.default,we=ge,No=Te,Kl=Re,zl=[we.CompletionItemKind.Text,we.CompletionItemKind.Method,we.CompletionItemKind.Function,we.CompletionItemKind.Constructor,we.CompletionItemKind.Field,we.CompletionItemKind.Variable,we.CompletionItemKind.Class,we.CompletionItemKind.Interface,we.CompletionItemKind.Module,we.CompletionItemKind.Property,we.CompletionItemKind.Unit,we.CompletionItemKind.Value,we.CompletionItemKind.Enum,we.CompletionItemKind.Keyword,we.CompletionItemKind.Snippet,we.CompletionItemKind.Color,we.CompletionItemKind.File,we.CompletionItemKind.Reference,we.CompletionItemKind.Folder,we.CompletionItemKind.EnumMember,we.CompletionItemKind.Constant,we.CompletionItemKind.Struct,we.CompletionItemKind.Event,we.CompletionItemKind.Operator,we.CompletionItemKind.TypeParameter];class Gl extends No.TextDocumentLanguageFeature{constructor(t){super(t,we.CompletionRequest.type),this.labelDetailsSupport=new Map}fillClientCapabilities(t){let n=(0,No.ensure)((0,No.ensure)(t,"textDocument"),"completion");n.dynamicRegistration=!0,n.contextSupport=!0,n.completionItem={snippetSupport:!0,commitCharactersSupport:!0,documentationFormat:[we.MarkupKind.Markdown,we.MarkupKind.PlainText],deprecatedSupport:!0,preselectSupport:!0,tagSupport:{valueSet:[we.CompletionItemTag.Deprecated]},insertReplaceSupport:!0,resolveSupport:{properties:["documentation","detail","additionalTextEdits"]},insertTextModeSupport:{valueSet:[we.InsertTextMode.asIs,we.InsertTextMode.adjustIndentation]},labelDetailsSupport:!0},n.insertTextMode=we.InsertTextMode.adjustIndentation,n.completionItemKind={valueSet:zl},n.completionList={itemDefaults:["commitCharacters","editRange","insertTextFormat","insertTextMode"]}}initialize(t,n){const i=this.getRegistrationOptions(n,t.completionProvider);!i||this.register({id:Kl.generateUuid(),registerOptions:i})}registerLanguageProvider(t,n){this.labelDetailsSupport.set(n,!!t.completionItem?.labelDetailsSupport);const i=t.triggerCharacters??[],r=t.allCommitCharacters,o=t.documentSelector,s={provideCompletionItems:(a,c,u,p)=>{const y=this._client,f=this._client.middleware,g=(h,N,j,X)=>y.sendRequest(we.CompletionRequest.type,y.code2ProtocolConverter.asCompletionParams(h,N,j),X).then(G=>X.isCancellationRequested?null:y.protocol2CodeConverter.asCompletionResult(G,r,X),G=>y.handleFailedRequest(we.CompletionRequest.type,X,G,null));return f.provideCompletionItem?f.provideCompletionItem(a,c,p,u,g):g(a,c,p,u)},resolveCompletionItem:t.resolveProvider?(a,c)=>{const u=this._client,p=this._client.middleware,y=(f,g)=>u.sendRequest(we.CompletionResolveRequest.type,u.code2ProtocolConverter.asCompletionItem(f,!!this.labelDetailsSupport.get(n)),g).then(h=>g.isCancellationRequested?null:u.protocol2CodeConverter.asCompletionItem(h),h=>u.handleFailedRequest(we.CompletionResolveRequest.type,g,h,f));return p.resolveCompletionItem?p.resolveCompletionItem(a,c,y):y(a,c)}:void 0};return[xl.languages.registerCompletionItemProvider(this._client.protocol2CodeConverter.asDocumentSelector(o),s,...i),s]}}Ti.CompletionItemFeature=Gl;var Pi={};Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.HoverFeature=void 0;const Bl=he.default,In=ge,qo=Te,Vl=Re;class Xl extends qo.TextDocumentLanguageFeature{constructor(t){super(t,In.HoverRequest.type)}fillClientCapabilities(t){const n=(0,qo.ensure)((0,qo.ensure)(t,"textDocument"),"hover");n.dynamicRegistration=!0,n.contentFormat=[In.MarkupKind.Markdown,In.MarkupKind.PlainText]}initialize(t,n){const i=this.getRegistrationOptions(n,t.hoverProvider);!i||this.register({id:Vl.generateUuid(),registerOptions:i})}registerLanguageProvider(t){const n=t.documentSelector,i={provideHover:(r,o,s)=>{const a=this._client,c=(p,y,f)=>a.sendRequest(In.HoverRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(p,y),f).then(g=>f.isCancellationRequested?null:a.protocol2CodeConverter.asHover(g),g=>a.handleFailedRequest(In.HoverRequest.type,f,g,null)),u=a.middleware;return u.provideHover?u.provideHover(r,o,s,c):c(r,o,s)}};return[this.registerProvider(n,i),i]}registerProvider(t,n){return Bl.languages.registerHoverProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n)}}Pi.HoverFeature=Xl;var Ei={};Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.DefinitionFeature=void 0;const Jl=he.default,Mo=ge,Lo=Te,Ql=Re;class Yl extends Lo.TextDocumentLanguageFeature{constructor(t){super(t,Mo.DefinitionRequest.type)}fillClientCapabilities(t){let n=(0,Lo.ensure)((0,Lo.ensure)(t,"textDocument"),"definition");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(t,n){const i=this.getRegistrationOptions(n,t.definitionProvider);!i||this.register({id:Ql.generateUuid(),registerOptions:i})}registerLanguageProvider(t){const n=t.documentSelector,i={provideDefinition:(r,o,s)=>{const a=this._client,c=(p,y,f)=>a.sendRequest(Mo.DefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(p,y),f).then(g=>f.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(g,f),g=>a.handleFailedRequest(Mo.DefinitionRequest.type,f,g,null)),u=a.middleware;return u.provideDefinition?u.provideDefinition(r,o,s,c):c(r,o,s)}};return[this.registerProvider(n,i),i]}registerProvider(t,n){return Jl.languages.registerDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n)}}Ei.DefinitionFeature=Yl;var ki={};Object.defineProperty(ki,"__esModule",{value:!0}),ki.SignatureHelpFeature=void 0;const ja=he.default,Nn=ge,$o=Te,Zl=Re;class ed extends $o.TextDocumentLanguageFeature{constructor(t){super(t,Nn.SignatureHelpRequest.type)}fillClientCapabilities(t){let n=(0,$o.ensure)((0,$o.ensure)(t,"textDocument"),"signatureHelp");n.dynamicRegistration=!0,n.signatureInformation={documentationFormat:[Nn.MarkupKind.Markdown,Nn.MarkupKind.PlainText]},n.signatureInformation.parameterInformation={labelOffsetSupport:!0},n.signatureInformation.activeParameterSupport=!0,n.contextSupport=!0}initialize(t,n){const i=this.getRegistrationOptions(n,t.signatureHelpProvider);!i||this.register({id:Zl.generateUuid(),registerOptions:i})}registerLanguageProvider(t){const n={provideSignatureHelp:(i,r,o,s)=>{const a=this._client,c=(p,y,f,g)=>a.sendRequest(Nn.SignatureHelpRequest.type,a.code2ProtocolConverter.asSignatureHelpParams(p,y,f),g).then(h=>g.isCancellationRequested?null:a.protocol2CodeConverter.asSignatureHelp(h,g),h=>a.handleFailedRequest(Nn.SignatureHelpRequest.type,g,h,null)),u=a.middleware;return u.provideSignatureHelp?u.provideSignatureHelp(i,r,s,o,c):c(i,r,s,o)}};return[this.registerProvider(t,n),n]}registerProvider(t,n){const i=this._client.protocol2CodeConverter.asDocumentSelector(t.documentSelector);if(t.retriggerCharacters===void 0){const r=t.triggerCharacters||[];return ja.languages.registerSignatureHelpProvider(i,n,...r)}else{const r={triggerCharacters:t.triggerCharacters||[],retriggerCharacters:t.retriggerCharacters||[]};return ja.languages.registerSignatureHelpProvider(i,n,r)}}}ki.SignatureHelpFeature=ed;var Fi={};Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.DocumentHighlightFeature=void 0;const td=he.default,Ao=ge,jo=Te,nd=Re;class id extends jo.TextDocumentLanguageFeature{constructor(t){super(t,Ao.DocumentHighlightRequest.type)}fillClientCapabilities(t){(0,jo.ensure)((0,jo.ensure)(t,"textDocument"),"documentHighlight").dynamicRegistration=!0}initialize(t,n){const i=this.getRegistrationOptions(n,t.documentHighlightProvider);!i||this.register({id:nd.generateUuid(),registerOptions:i})}registerLanguageProvider(t){const n=t.documentSelector,i={provideDocumentHighlights:(r,o,s)=>{const a=this._client,c=(p,y,f)=>a.sendRequest(Ao.DocumentHighlightRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(p,y),f).then(g=>f.isCancellationRequested?null:a.protocol2CodeConverter.asDocumentHighlights(g,f),g=>a.handleFailedRequest(Ao.DocumentHighlightRequest.type,f,g,null)),u=a.middleware;return u.provideDocumentHighlights?u.provideDocumentHighlights(r,o,s,c):c(r,o,s)}};return[td.languages.registerDocumentHighlightProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),i),i]}}Fi.DocumentHighlightFeature=id;var Ho={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DocumentSymbolFeature=e.SupportedSymbolTags=e.SupportedSymbolKinds=void 0;const t=he.default,n=ge,i=Te,r=Re;e.SupportedSymbolKinds=[n.SymbolKind.File,n.SymbolKind.Module,n.SymbolKind.Namespace,n.SymbolKind.Package,n.SymbolKind.Class,n.SymbolKind.Method,n.SymbolKind.Property,n.SymbolKind.Field,n.SymbolKind.Constructor,n.SymbolKind.Enum,n.SymbolKind.Interface,n.SymbolKind.Function,n.SymbolKind.Variable,n.SymbolKind.Constant,n.SymbolKind.String,n.SymbolKind.Number,n.SymbolKind.Boolean,n.SymbolKind.Array,n.SymbolKind.Object,n.SymbolKind.Key,n.SymbolKind.Null,n.SymbolKind.EnumMember,n.SymbolKind.Struct,n.SymbolKind.Event,n.SymbolKind.Operator,n.SymbolKind.TypeParameter],e.SupportedSymbolTags=[n.SymbolTag.Deprecated];class o extends i.TextDocumentLanguageFeature{constructor(a){super(a,n.DocumentSymbolRequest.type)}fillClientCapabilities(a){let c=(0,i.ensure)((0,i.ensure)(a,"textDocument"),"documentSymbol");c.dynamicRegistration=!0,c.symbolKind={valueSet:e.SupportedSymbolKinds},c.hierarchicalDocumentSymbolSupport=!0,c.tagSupport={valueSet:e.SupportedSymbolTags},c.labelSupport=!0}initialize(a,c){const u=this.getRegistrationOptions(c,a.documentSymbolProvider);!u||this.register({id:r.generateUuid(),registerOptions:u})}registerLanguageProvider(a){const c=a.documentSelector,u={provideDocumentSymbols:(y,f)=>{const g=this._client,h=async(j,X)=>{try{const G=await g.sendRequest(n.DocumentSymbolRequest.type,g.code2ProtocolConverter.asDocumentSymbolParams(j),X);if(X.isCancellationRequested||G===void 0||G===null)return null;if(G.length===0)return[];{const S=G[0];return n.DocumentSymbol.is(S)?await g.protocol2CodeConverter.asDocumentSymbols(G,X):await g.protocol2CodeConverter.asSymbolInformations(G,X)}}catch(G){return g.handleFailedRequest(n.DocumentSymbolRequest.type,X,G,null)}},N=g.middleware;return N.provideDocumentSymbols?N.provideDocumentSymbols(y,f,h):h(y,f)}},p=a.label!==void 0?{label:a.label}:void 0;return[t.languages.registerDocumentSymbolProvider(this._client.protocol2CodeConverter.asDocumentSelector(c),u,p),u]}}e.DocumentSymbolFeature=o})(Ho);var Oi={};Object.defineProperty(Oi,"__esModule",{value:!0}),Oi.WorkspaceSymbolFeature=void 0;const rd=he.default,qn=ge,Wo=Te,Ha=Ho,od=Re;class sd extends Wo.WorkspaceFeature{constructor(t){super(t,qn.WorkspaceSymbolRequest.type)}fillClientCapabilities(t){let n=(0,Wo.ensure)((0,Wo.ensure)(t,"workspace"),"symbol");n.dynamicRegistration=!0,n.symbolKind={valueSet:Ha.SupportedSymbolKinds},n.tagSupport={valueSet:Ha.SupportedSymbolTags},n.resolveSupport={properties:["location.range"]}}initialize(t){!t.workspaceSymbolProvider||this.register({id:od.generateUuid(),registerOptions:t.workspaceSymbolProvider===!0?{workDoneProgress:!1}:t.workspaceSymbolProvider})}registerLanguageProvider(t){const n={provideWorkspaceSymbols:(i,r)=>{const o=this._client,s=(c,u)=>o.sendRequest(qn.WorkspaceSymbolRequest.type,{query:c},u).then(p=>u.isCancellationRequested?null:o.protocol2CodeConverter.asSymbolInformations(p,u),p=>o.handleFailedRequest(qn.WorkspaceSymbolRequest.type,u,p,null)),a=o.middleware;return a.provideWorkspaceSymbols?a.provideWorkspaceSymbols(i,r,s):s(i,r)},resolveWorkspaceSymbol:t.resolveProvider===!0?(i,r)=>{const o=this._client,s=(c,u)=>o.sendRequest(qn.WorkspaceSymbolResolveRequest.type,o.code2ProtocolConverter.asWorkspaceSymbol(c),u).then(p=>u.isCancellationRequested?null:o.protocol2CodeConverter.asSymbolInformation(p),p=>o.handleFailedRequest(qn.WorkspaceSymbolResolveRequest.type,u,p,null)),a=o.middleware;return a.resolveWorkspaceSymbol?a.resolveWorkspaceSymbol(i,r,s):s(i,r)}:void 0};return[rd.languages.registerWorkspaceSymbolProvider(n),n]}}Oi.WorkspaceSymbolFeature=sd;var Ii={};Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.ReferencesFeature=void 0;const ad=he.default,Uo=ge,xo=Te,cd=Re;class ud extends xo.TextDocumentLanguageFeature{constructor(t){super(t,Uo.ReferencesRequest.type)}fillClientCapabilities(t){(0,xo.ensure)((0,xo.ensure)(t,"textDocument"),"references").dynamicRegistration=!0}initialize(t,n){const i=this.getRegistrationOptions(n,t.referencesProvider);!i||this.register({id:cd.generateUuid(),registerOptions:i})}registerLanguageProvider(t){const n=t.documentSelector,i={provideReferences:(r,o,s,a)=>{const c=this._client,u=(y,f,g,h)=>c.sendRequest(Uo.ReferencesRequest.type,c.code2ProtocolConverter.asReferenceParams(y,f,g),h).then(N=>h.isCancellationRequested?null:c.protocol2CodeConverter.asReferences(N,h),N=>c.handleFailedRequest(Uo.ReferencesRequest.type,h,N,null)),p=c.middleware;return p.provideReferences?p.provideReferences(r,o,s,a,u):u(r,o,s,a)}};return[this.registerProvider(n,i),i]}registerProvider(t,n){return ad.languages.registerReferenceProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n)}}Ii.ReferencesFeature=ud;var Ni={};Object.defineProperty(Ni,"__esModule",{value:!0}),Ni.CodeActionFeature=void 0;const ld=he.default,at=ge,dd=Re,Ko=Te;class fd extends Ko.TextDocumentLanguageFeature{constructor(t){super(t,at.CodeActionRequest.type)}fillClientCapabilities(t){const n=(0,Ko.ensure)((0,Ko.ensure)(t,"textDocument"),"codeAction");n.dynamicRegistration=!0,n.isPreferredSupport=!0,n.disabledSupport=!0,n.dataSupport=!0,n.resolveSupport={properties:["edit"]},n.codeActionLiteralSupport={codeActionKind:{valueSet:[at.CodeActionKind.Empty,at.CodeActionKind.QuickFix,at.CodeActionKind.Refactor,at.CodeActionKind.RefactorExtract,at.CodeActionKind.RefactorInline,at.CodeActionKind.RefactorRewrite,at.CodeActionKind.Source,at.CodeActionKind.SourceOrganizeImports]}},n.honorsChangeAnnotations=!1}initialize(t,n){const i=this.getRegistrationOptions(n,t.codeActionProvider);!i||this.register({id:dd.generateUuid(),registerOptions:i})}registerLanguageProvider(t){const n=t.documentSelector,i={provideCodeActions:(r,o,s,a)=>{const c=this._client,u=async(y,f,g,h)=>{const N={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(y),range:c.code2ProtocolConverter.asRange(f),context:await c.code2ProtocolConverter.asCodeActionContext(g,h)};return c.sendRequest(at.CodeActionRequest.type,N,h).then(j=>h.isCancellationRequested||j===null||j===void 0?null:c.protocol2CodeConverter.asCodeActionResult(j,h),j=>c.handleFailedRequest(at.CodeActionRequest.type,h,j,null))},p=c.middleware;return p.provideCodeActions?p.provideCodeActions(r,o,s,a,u):u(r,o,s,a)},resolveCodeAction:t.resolveProvider?(r,o)=>{const s=this._client,a=this._client.middleware,c=async(u,p)=>s.sendRequest(at.CodeActionResolveRequest.type,await s.code2ProtocolConverter.asCodeAction(u,p),p).then(y=>p.isCancellationRequested?u:s.protocol2CodeConverter.asCodeAction(y,p),y=>s.handleFailedRequest(at.CodeActionResolveRequest.type,p,y,u));return a.resolveCodeAction?a.resolveCodeAction(r,o,c):c(r,o)}:void 0};return[ld.languages.registerCodeActionsProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),i,t.codeActionKinds?{providedCodeActionKinds:this._client.protocol2CodeConverter.asCodeActionKinds(t.codeActionKinds)}:void 0),i]}}Ni.CodeActionFeature=fd;var qi={};Object.defineProperty(qi,"__esModule",{value:!0}),qi.CodeLensFeature=void 0;const Wa=he.default,cn=ge,hd=Re,Mn=Te;class gd extends Mn.TextDocumentLanguageFeature{constructor(t){super(t,cn.CodeLensRequest.type)}fillClientCapabilities(t){(0,Mn.ensure)((0,Mn.ensure)(t,"textDocument"),"codeLens").dynamicRegistration=!0,(0,Mn.ensure)((0,Mn.ensure)(t,"workspace"),"codeLens").refreshSupport=!0}initialize(t,n){this._client.onRequest(cn.CodeLensRefreshRequest.type,async()=>{for(const o of this.getAllProviders())o.onDidChangeCodeLensEmitter.fire()});const r=this.getRegistrationOptions(n,t.codeLensProvider);!r||this.register({id:hd.generateUuid(),registerOptions:r})}registerLanguageProvider(t){const n=t.documentSelector,i=new Wa.EventEmitter,r={onDidChangeCodeLenses:i.event,provideCodeLenses:(o,s)=>{const a=this._client,c=(p,y)=>a.sendRequest(cn.CodeLensRequest.type,a.code2ProtocolConverter.asCodeLensParams(p),y).then(f=>y.isCancellationRequested?null:a.protocol2CodeConverter.asCodeLenses(f,y),f=>a.handleFailedRequest(cn.CodeLensRequest.type,y,f,null)),u=a.middleware;return u.provideCodeLenses?u.provideCodeLenses(o,s,c):c(o,s)},resolveCodeLens:t.resolveProvider?(o,s)=>{const a=this._client,c=(p,y)=>a.sendRequest(cn.CodeLensResolveRequest.type,a.code2ProtocolConverter.asCodeLens(p),y).then(f=>y.isCancellationRequested?p:a.protocol2CodeConverter.asCodeLens(f),f=>a.handleFailedRequest(cn.CodeLensResolveRequest.type,y,f,p)),u=a.middleware;return u.resolveCodeLens?u.resolveCodeLens(o,s,c):c(o,s)}:void 0};return[Wa.languages.registerCodeLensProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),r),{provider:r,onDidChangeCodeLensEmitter:i}]}}qi.CodeLensFeature=gd;var kt={};Object.defineProperty(kt,"__esModule",{value:!0}),kt.DocumentOnTypeFormattingFeature=kt.DocumentRangeFormattingFeature=kt.DocumentFormattingFeature=void 0;const Mi=he.default,bt=ge,zo=Re,Dt=Te;var Ln;(function(e){function t(n){const i=Mi.workspace.getConfiguration("files",n);return{trimTrailingWhitespace:i.get("trimTrailingWhitespace"),trimFinalNewlines:i.get("trimFinalNewlines"),insertFinalNewline:i.get("insertFinalNewline")}}e.fromConfiguration=t})(Ln||(Ln={}));class pd extends Dt.TextDocumentLanguageFeature{constructor(t){super(t,bt.DocumentFormattingRequest.type)}fillClientCapabilities(t){(0,Dt.ensure)((0,Dt.ensure)(t,"textDocument"),"formatting").dynamicRegistration=!0}initialize(t,n){const i=this.getRegistrationOptions(n,t.documentFormattingProvider);!i||this.register({id:zo.generateUuid(),registerOptions:i})}registerLanguageProvider(t){const n=t.documentSelector,i={provideDocumentFormattingEdits:(r,o,s)=>{const a=this._client,c=(p,y,f)=>{const g={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(p),options:a.code2ProtocolConverter.asFormattingOptions(y,Ln.fromConfiguration(p))};return a.sendRequest(bt.DocumentFormattingRequest.type,g,f).then(h=>f.isCancellationRequested?null:a.protocol2CodeConverter.asTextEdits(h,f),h=>a.handleFailedRequest(bt.DocumentFormattingRequest.type,f,h,null))},u=a.middleware;return u.provideDocumentFormattingEdits?u.provideDocumentFormattingEdits(r,o,s,c):c(r,o,s)}};return[Mi.languages.registerDocumentFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),i),i]}}kt.DocumentFormattingFeature=pd;class md extends Dt.TextDocumentLanguageFeature{constructor(t){super(t,bt.DocumentRangeFormattingRequest.type)}fillClientCapabilities(t){(0,Dt.ensure)((0,Dt.ensure)(t,"textDocument"),"rangeFormatting").dynamicRegistration=!0}initialize(t,n){const i=this.getRegistrationOptions(n,t.documentRangeFormattingProvider);!i||this.register({id:zo.generateUuid(),registerOptions:i})}registerLanguageProvider(t){const n=t.documentSelector,i={provideDocumentRangeFormattingEdits:(r,o,s,a)=>{const c=this._client,u=(y,f,g,h)=>{const N={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(y),range:c.code2ProtocolConverter.asRange(f),options:c.code2ProtocolConverter.asFormattingOptions(g,Ln.fromConfiguration(y))};return c.sendRequest(bt.DocumentRangeFormattingRequest.type,N,h).then(j=>h.isCancellationRequested?null:c.protocol2CodeConverter.asTextEdits(j,h),j=>c.handleFailedRequest(bt.DocumentRangeFormattingRequest.type,h,j,null))},p=c.middleware;return p.provideDocumentRangeFormattingEdits?p.provideDocumentRangeFormattingEdits(r,o,s,a,u):u(r,o,s,a)}};return[Mi.languages.registerDocumentRangeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),i),i]}}kt.DocumentRangeFormattingFeature=md;class yd extends Dt.TextDocumentLanguageFeature{constructor(t){super(t,bt.DocumentOnTypeFormattingRequest.type)}fillClientCapabilities(t){(0,Dt.ensure)((0,Dt.ensure)(t,"textDocument"),"onTypeFormatting").dynamicRegistration=!0}initialize(t,n){const i=this.getRegistrationOptions(n,t.documentOnTypeFormattingProvider);!i||this.register({id:zo.generateUuid(),registerOptions:i})}registerLanguageProvider(t){const n=t.documentSelector,i={provideOnTypeFormattingEdits:(o,s,a,c,u)=>{const p=this._client,y=(g,h,N,j,X)=>{let G={textDocument:p.code2ProtocolConverter.asTextDocumentIdentifier(g),position:p.code2ProtocolConverter.asPosition(h),ch:N,options:p.code2ProtocolConverter.asFormattingOptions(j,Ln.fromConfiguration(g))};return p.sendRequest(bt.DocumentOnTypeFormattingRequest.type,G,X).then(S=>X.isCancellationRequested?null:p.protocol2CodeConverter.asTextEdits(S,X),S=>p.handleFailedRequest(bt.DocumentOnTypeFormattingRequest.type,X,S,null))},f=p.middleware;return f.provideOnTypeFormattingEdits?f.provideOnTypeFormattingEdits(o,s,a,c,u,y):y(o,s,a,c,u)}},r=t.moreTriggerCharacter||[];return[Mi.languages.registerOnTypeFormattingEditProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),i,t.firstTriggerCharacter,...r),i]}}kt.DocumentOnTypeFormattingFeature=yd;var Li={};Object.defineProperty(Li,"__esModule",{value:!0}),Li.RenameFeature=void 0;const vd=he.default,At=ge,Cd=Re,Ua=Pe,Go=Te;class _d extends Go.TextDocumentLanguageFeature{constructor(t){super(t,At.RenameRequest.type)}fillClientCapabilities(t){let n=(0,Go.ensure)((0,Go.ensure)(t,"textDocument"),"rename");n.dynamicRegistration=!0,n.prepareSupport=!0,n.prepareSupportDefaultBehavior=At.PrepareSupportDefaultBehavior.Identifier,n.honorsChangeAnnotations=!0}initialize(t,n){const i=this.getRegistrationOptions(n,t.renameProvider);!i||(Ua.boolean(t.renameProvider)&&(i.prepareProvider=!1),this.register({id:Cd.generateUuid(),registerOptions:i}))}registerLanguageProvider(t){const n=t.documentSelector,i={provideRenameEdits:(r,o,s,a)=>{const c=this._client,u=(y,f,g,h)=>{let N={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(y),position:c.code2ProtocolConverter.asPosition(f),newName:g};return c.sendRequest(At.RenameRequest.type,N,h).then(j=>h.isCancellationRequested?null:c.protocol2CodeConverter.asWorkspaceEdit(j,h),j=>c.handleFailedRequest(At.RenameRequest.type,h,j,null,!1))},p=c.middleware;return p.provideRenameEdits?p.provideRenameEdits(r,o,s,a,u):u(r,o,s,a)},prepareRename:t.prepareProvider?(r,o,s)=>{const a=this._client,c=(p,y,f)=>{let g={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(p),position:a.code2ProtocolConverter.asPosition(y)};return a.sendRequest(At.PrepareRenameRequest.type,g,f).then(h=>f.isCancellationRequested?null:At.Range.is(h)?a.protocol2CodeConverter.asRange(h):this.isDefaultBehavior(h)?h.defaultBehavior===!0?null:Promise.reject(new Error("The element can't be renamed.")):h&&At.Range.is(h.range)?{range:a.protocol2CodeConverter.asRange(h.range),placeholder:h.placeholder}:Promise.reject(new Error("The element can't be renamed.")),h=>{throw typeof h.message=="string"?new Error(h.message):new Error("The element can't be renamed.")})},u=a.middleware;return u.prepareRename?u.prepareRename(r,o,s,c):c(r,o,s)}:void 0};return[this.registerProvider(n,i),i]}registerProvider(t,n){return vd.languages.registerRenameProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n)}isDefaultBehavior(t){const n=t;return n&&Ua.boolean(n.defaultBehavior)}}Li.RenameFeature=_d;var $i={};Object.defineProperty($i,"__esModule",{value:!0}),$i.DocumentLinkFeature=void 0;const wd=he.default,$n=ge,Bo=Te,bd=Re;class Dd extends Bo.TextDocumentLanguageFeature{constructor(t){super(t,$n.DocumentLinkRequest.type)}fillClientCapabilities(t){const n=(0,Bo.ensure)((0,Bo.ensure)(t,"textDocument"),"documentLink");n.dynamicRegistration=!0,n.tooltipSupport=!0}initialize(t,n){const i=this.getRegistrationOptions(n,t.documentLinkProvider);!i||this.register({id:bd.generateUuid(),registerOptions:i})}registerLanguageProvider(t){const n=t.documentSelector,i={provideDocumentLinks:(r,o)=>{const s=this._client,a=(u,p)=>s.sendRequest($n.DocumentLinkRequest.type,s.code2ProtocolConverter.asDocumentLinkParams(u),p).then(y=>p.isCancellationRequested?null:s.protocol2CodeConverter.asDocumentLinks(y,p),y=>s.handleFailedRequest($n.DocumentLinkRequest.type,p,y,null)),c=s.middleware;return c.provideDocumentLinks?c.provideDocumentLinks(r,o,a):a(r,o)},resolveDocumentLink:t.resolveProvider?(r,o)=>{const s=this._client;let a=(u,p)=>s.sendRequest($n.DocumentLinkResolveRequest.type,s.code2ProtocolConverter.asDocumentLink(u),p).then(y=>p.isCancellationRequested?u:s.protocol2CodeConverter.asDocumentLink(y),y=>s.handleFailedRequest($n.DocumentLinkResolveRequest.type,p,y,u));const c=s.middleware;return c.resolveDocumentLink?c.resolveDocumentLink(r,o,a):a(r,o)}:void 0};return[wd.languages.registerDocumentLinkProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),i),i]}}$i.DocumentLinkFeature=Dd;var Ai={};Object.defineProperty(Ai,"__esModule",{value:!0}),Ai.ExecuteCommandFeature=void 0;const Sd=he.default,Vo=ge,Rd=Re,xa=Te;class Td{constructor(t){this._client=t,this._commands=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._commands.size>0}}get registrationType(){return Vo.ExecuteCommandRequest.type}fillClientCapabilities(t){(0,xa.ensure)((0,xa.ensure)(t,"workspace"),"executeCommand").dynamicRegistration=!0}initialize(t){!t.executeCommandProvider||this.register({id:Rd.generateUuid(),registerOptions:Object.assign({},t.executeCommandProvider)})}register(t){const n=this._client,i=n.middleware,r=(o,s)=>{let a={command:o,arguments:s};return n.sendRequest(Vo.ExecuteCommandRequest.type,a).then(void 0,c=>n.handleFailedRequest(Vo.ExecuteCommandRequest.type,void 0,c,void 0))};if(t.registerOptions.commands){const o=[];for(const s of t.registerOptions.commands)o.push(Sd.commands.registerCommand(s,(...a)=>i.executeCommand?i.executeCommand(s,a,r):r(s,a)));this._commands.set(t.id,o)}}unregister(t){let n=this._commands.get(t);n&&n.forEach(i=>i.dispose())}dispose(){this._commands.forEach(t=>{t.forEach(n=>n.dispose())}),this._commands.clear()}}Ai.ExecuteCommandFeature=Td;var ji={};Object.defineProperty(ji,"__esModule",{value:!0}),ji.FileSystemWatcherFeature=void 0;const Pd=he.default,jt=ge,Hi=Te;class Ed{constructor(t,n){this._client=t,this._notifyFileEvent=n,this._watchers=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._watchers.size>0}}get registrationType(){return jt.DidChangeWatchedFilesNotification.type}fillClientCapabilities(t){(0,Hi.ensure)((0,Hi.ensure)(t,"workspace"),"didChangeWatchedFiles").dynamicRegistration=!0,(0,Hi.ensure)((0,Hi.ensure)(t,"workspace"),"didChangeWatchedFiles").relativePatternSupport=!0}initialize(t,n){}register(t){if(!Array.isArray(t.registerOptions.watchers))return;const n=[];for(const i of t.registerOptions.watchers){const r=this._client.protocol2CodeConverter.asGlobPattern(i.globPattern);if(r===void 0)continue;let o=!0,s=!0,a=!0;i.kind!==void 0&&i.kind!==null&&(o=(i.kind&jt.WatchKind.Create)!==0,s=(i.kind&jt.WatchKind.Change)!==0,a=(i.kind&jt.WatchKind.Delete)!==0);const c=Pd.workspace.createFileSystemWatcher(r,!o,!s,!a);this.hookListeners(c,o,s,a,n),n.push(c)}this._watchers.set(t.id,n)}registerRaw(t,n){let i=[];for(let r of n)this.hookListeners(r,!0,!0,!0,i);this._watchers.set(t,i)}hookListeners(t,n,i,r,o){n&&t.onDidCreate(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:jt.FileChangeType.Created}),null,o),i&&t.onDidChange(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:jt.FileChangeType.Changed}),null,o),r&&t.onDidDelete(s=>this._notifyFileEvent({uri:this._client.code2ProtocolConverter.asUri(s),type:jt.FileChangeType.Deleted}),null,o)}unregister(t){let n=this._watchers.get(t);if(n)for(let i of n)i.dispose()}dispose(){this._watchers.forEach(t=>{for(let n of t)n.dispose()}),this._watchers.clear()}}ji.FileSystemWatcherFeature=Ed;var Wi={};Object.defineProperty(Wi,"__esModule",{value:!0}),Wi.ColorProviderFeature=void 0;const kd=he.default,An=ge,Xo=Te;class Fd extends Xo.TextDocumentLanguageFeature{constructor(t){super(t,An.DocumentColorRequest.type)}fillClientCapabilities(t){(0,Xo.ensure)((0,Xo.ensure)(t,"textDocument"),"colorProvider").dynamicRegistration=!0}initialize(t,n){let[i,r]=this.getRegistration(n,t.colorProvider);!i||!r||this.register({id:i,registerOptions:r})}registerLanguageProvider(t){const n=t.documentSelector,i={provideColorPresentations:(r,o,s)=>{const a=this._client,c=(p,y,f)=>{const g={color:p,textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(y.document),range:a.code2ProtocolConverter.asRange(y.range)};return a.sendRequest(An.ColorPresentationRequest.type,g,f).then(h=>f.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorPresentations(h,f),h=>a.handleFailedRequest(An.ColorPresentationRequest.type,f,h,null))},u=a.middleware;return u.provideColorPresentations?u.provideColorPresentations(r,o,s,c):c(r,o,s)},provideDocumentColors:(r,o)=>{const s=this._client,a=(u,p)=>{const y={textDocument:s.code2ProtocolConverter.asTextDocumentIdentifier(u)};return s.sendRequest(An.DocumentColorRequest.type,y,p).then(f=>p.isCancellationRequested?null:this._client.protocol2CodeConverter.asColorInformations(f,p),f=>s.handleFailedRequest(An.DocumentColorRequest.type,p,f,null))},c=s.middleware;return c.provideDocumentColors?c.provideDocumentColors(r,o,a):a(r,o)}};return[kd.languages.registerColorProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),i),i]}}Wi.ColorProviderFeature=Fd;var Ui={};Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.ImplementationFeature=void 0;const Od=he.default,Jo=ge,Qo=Te;class Id extends Qo.TextDocumentLanguageFeature{constructor(t){super(t,Jo.ImplementationRequest.type)}fillClientCapabilities(t){let n=(0,Qo.ensure)((0,Qo.ensure)(t,"textDocument"),"implementation");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(t,n){let[i,r]=this.getRegistration(n,t.implementationProvider);!i||!r||this.register({id:i,registerOptions:r})}registerLanguageProvider(t){const n=t.documentSelector,i={provideImplementation:(r,o,s)=>{const a=this._client,c=(p,y,f)=>a.sendRequest(Jo.ImplementationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(p,y),f).then(g=>f.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(g,f),g=>a.handleFailedRequest(Jo.ImplementationRequest.type,f,g,null)),u=a.middleware;return u.provideImplementation?u.provideImplementation(r,o,s,c):c(r,o,s)}};return[this.registerProvider(n,i),i]}registerProvider(t,n){return Od.languages.registerImplementationProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n)}}Ui.ImplementationFeature=Id;var xi={};Object.defineProperty(xi,"__esModule",{value:!0}),xi.TypeDefinitionFeature=void 0;const Nd=he.default,Yo=ge,jn=Te;class qd extends jn.TextDocumentLanguageFeature{constructor(t){super(t,Yo.TypeDefinitionRequest.type)}fillClientCapabilities(t){(0,jn.ensure)((0,jn.ensure)(t,"textDocument"),"typeDefinition").dynamicRegistration=!0;let n=(0,jn.ensure)((0,jn.ensure)(t,"textDocument"),"typeDefinition");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(t,n){let[i,r]=this.getRegistration(n,t.typeDefinitionProvider);!i||!r||this.register({id:i,registerOptions:r})}registerLanguageProvider(t){const n=t.documentSelector,i={provideTypeDefinition:(r,o,s)=>{const a=this._client,c=(p,y,f)=>a.sendRequest(Yo.TypeDefinitionRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(p,y),f).then(g=>f.isCancellationRequested?null:a.protocol2CodeConverter.asDefinitionResult(g,f),g=>a.handleFailedRequest(Yo.TypeDefinitionRequest.type,f,g,null)),u=a.middleware;return u.provideTypeDefinition?u.provideTypeDefinition(r,o,s,c):c(r,o,s)}};return[this.registerProvider(n,i),i]}registerProvider(t,n){return Nd.languages.registerTypeDefinitionProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n)}}xi.TypeDefinitionFeature=qd;var un={};Object.defineProperty(un,"__esModule",{value:!0}),un.WorkspaceFoldersFeature=un.arrayDiff=void 0;const Md=Re,Ki=he.default,Hn=ge;function Zo(e,t){if(e!=null)return e[t]}function es(e,t){return e.filter(n=>t.indexOf(n)<0)}un.arrayDiff=es;class Ld{constructor(t){this._client=t,this._listeners=new Map}getState(){return{kind:"workspace",id:this.registrationType.method,registrations:this._listeners.size>0}}get registrationType(){return Hn.DidChangeWorkspaceFoldersNotification.type}fillInitializeParams(t){const n=Ki.workspace.workspaceFolders;this.initializeWithFolders(n),n===void 0?t.workspaceFolders=null:t.workspaceFolders=n.map(i=>this.asProtocol(i))}initializeWithFolders(t){this._initialFolders=t}fillClientCapabilities(t){t.workspace=t.workspace||{},t.workspace.workspaceFolders=!0}initialize(t){const n=this._client;n.onRequest(Hn.WorkspaceFoldersRequest.type,o=>{const s=()=>{const c=Ki.workspace.workspaceFolders;return c===void 0?null:c.map(p=>this.asProtocol(p))},a=n.middleware.workspace;return a&&a.workspaceFolders?a.workspaceFolders(o,s):s()});const i=Zo(Zo(Zo(t,"workspace"),"workspaceFolders"),"changeNotifications");let r;typeof i=="string"?r=i:i===!0&&(r=Md.generateUuid()),r&&this.register({id:r,registerOptions:void 0})}sendInitialEvent(t){let n;if(this._initialFolders&&t){const i=es(this._initialFolders,t),r=es(t,this._initialFolders);(r.length>0||i.length>0)&&(n=this.doSendEvent(r,i))}else this._initialFolders?n=this.doSendEvent([],this._initialFolders):t&&(n=this.doSendEvent(t,[]));n!==void 0&&n.catch(i=>{this._client.error(`Sending notification ${Hn.DidChangeWorkspaceFoldersNotification.type.method} failed`,i)})}doSendEvent(t,n){let i={event:{added:t.map(r=>this.asProtocol(r)),removed:n.map(r=>this.asProtocol(r))}};return this._client.sendNotification(Hn.DidChangeWorkspaceFoldersNotification.type,i)}register(t){let n=t.id,i=this._client,r=Ki.workspace.onDidChangeWorkspaceFolders(o=>{let s=u=>this.doSendEvent(u.added,u.removed),a=i.middleware.workspace;(a&&a.didChangeWorkspaceFolders?a.didChangeWorkspaceFolders(o,s):s(o)).catch(u=>{this._client.error(`Sending notification ${Hn.DidChangeWorkspaceFoldersNotification.type.method} failed`,u)})});this._listeners.set(n,r),this.sendInitialEvent(Ki.workspace.workspaceFolders)}unregister(t){let n=this._listeners.get(t);n!==void 0&&(this._listeners.delete(t),n.dispose())}dispose(){for(let t of this._listeners.values())t.dispose();this._listeners.clear()}asProtocol(t){return t===void 0?null:{uri:this._client.code2ProtocolConverter.asUri(t.uri),name:t.name}}}un.WorkspaceFoldersFeature=Ld;var zi={};Object.defineProperty(zi,"__esModule",{value:!0}),zi.FoldingRangeFeature=void 0;const $d=he.default,ln=ge,ts=Te;class Ad extends ts.TextDocumentLanguageFeature{constructor(t){super(t,ln.FoldingRangeRequest.type)}fillClientCapabilities(t){let n=(0,ts.ensure)((0,ts.ensure)(t,"textDocument"),"foldingRange");n.dynamicRegistration=!0,n.rangeLimit=5e3,n.lineFoldingOnly=!0,n.foldingRangeKind={valueSet:[ln.FoldingRangeKind.Comment,ln.FoldingRangeKind.Imports,ln.FoldingRangeKind.Region]},n.foldingRange={collapsedText:!1}}initialize(t,n){let[i,r]=this.getRegistration(n,t.foldingRangeProvider);!i||!r||this.register({id:i,registerOptions:r})}registerLanguageProvider(t){const n=t.documentSelector,i={provideFoldingRanges:(r,o,s)=>{const a=this._client,c=(p,y,f)=>{const g={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(p)};return a.sendRequest(ln.FoldingRangeRequest.type,g,f).then(h=>f.isCancellationRequested?null:a.protocol2CodeConverter.asFoldingRanges(h,f),h=>a.handleFailedRequest(ln.FoldingRangeRequest.type,f,h,null))},u=a.middleware;return u.provideFoldingRanges?u.provideFoldingRanges(r,o,s,c):c(r,o,s)}};return[$d.languages.registerFoldingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(n),i),i]}}zi.FoldingRangeFeature=Ad;var Gi={};Object.defineProperty(Gi,"__esModule",{value:!0}),Gi.DeclarationFeature=void 0;const jd=he.default,ns=ge,is=Te;class Hd extends is.TextDocumentLanguageFeature{constructor(t){super(t,ns.DeclarationRequest.type)}fillClientCapabilities(t){const n=(0,is.ensure)((0,is.ensure)(t,"textDocument"),"declaration");n.dynamicRegistration=!0,n.linkSupport=!0}initialize(t,n){const[i,r]=this.getRegistration(n,t.declarationProvider);!i||!r||this.register({id:i,registerOptions:r})}registerLanguageProvider(t){const n=t.documentSelector,i={provideDeclaration:(r,o,s)=>{const a=this._client,c=(p,y,f)=>a.sendRequest(ns.DeclarationRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(p,y),f).then(g=>f.isCancellationRequested?null:a.protocol2CodeConverter.asDeclarationResult(g,f),g=>a.handleFailedRequest(ns.DeclarationRequest.type,f,g,null)),u=a.middleware;return u.provideDeclaration?u.provideDeclaration(r,o,s,c):c(r,o,s)}};return[this.registerProvider(n,i),i]}registerProvider(t,n){return jd.languages.registerDeclarationProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n)}}Gi.DeclarationFeature=Hd;var Bi={};Object.defineProperty(Bi,"__esModule",{value:!0}),Bi.SelectionRangeFeature=void 0;const Wd=he.default,rs=ge,os=Te;class Ud extends os.TextDocumentLanguageFeature{constructor(t){super(t,rs.SelectionRangeRequest.type)}fillClientCapabilities(t){const n=(0,os.ensure)((0,os.ensure)(t,"textDocument"),"selectionRange");n.dynamicRegistration=!0}initialize(t,n){const[i,r]=this.getRegistration(n,t.selectionRangeProvider);!i||!r||this.register({id:i,registerOptions:r})}registerLanguageProvider(t){const n=t.documentSelector,i={provideSelectionRanges:(r,o,s)=>{const a=this._client,c=async(p,y,f)=>{const g={textDocument:a.code2ProtocolConverter.asTextDocumentIdentifier(p),positions:await a.code2ProtocolConverter.asPositions(y,f)};return a.sendRequest(rs.SelectionRangeRequest.type,g,f).then(h=>f.isCancellationRequested?null:a.protocol2CodeConverter.asSelectionRanges(h,f),h=>a.handleFailedRequest(rs.SelectionRangeRequest.type,f,h,null))},u=a.middleware;return u.provideSelectionRanges?u.provideSelectionRanges(r,o,s,c):c(r,o,s)}};return[this.registerProvider(n,i),i]}registerProvider(t,n){return Wd.languages.registerSelectionRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n)}}Bi.SelectionRangeFeature=Ud;var Vi={};Object.defineProperty(Vi,"__esModule",{value:!0}),Vi.ProgressFeature=void 0;const Ka=ge,xd=kn;function Kd(e,t){return e[t]===void 0&&(e[t]=Object.create(null)),e[t]}class zd{constructor(t){this._client=t,this.activeParts=new Set}getState(){return{kind:"window",id:Ka.WorkDoneProgressCreateRequest.method,registrations:this.activeParts.size>0}}fillClientCapabilities(t){Kd(t,"window").workDoneProgress=!0}initialize(){const t=this._client,n=r=>{this.activeParts.delete(r)},i=r=>{this.activeParts.add(new xd.ProgressPart(this._client,r.token,n))};t.onRequest(Ka.WorkDoneProgressCreateRequest.type,i)}dispose(){for(const t of this.activeParts)t.done();this.activeParts.clear()}}Vi.ProgressFeature=zd;var Xi={};Object.defineProperty(Xi,"__esModule",{value:!0}),Xi.CallHierarchyFeature=void 0;const Gd=he.default,Ht=ge,ss=Te;class Bd{constructor(t){this.client=t,this.middleware=t.middleware}prepareCallHierarchy(t,n,i){const r=this.client,o=this.middleware,s=(a,c,u)=>{const p=r.code2ProtocolConverter.asTextDocumentPositionParams(a,c);return r.sendRequest(Ht.CallHierarchyPrepareRequest.type,p,u).then(y=>u.isCancellationRequested?null:r.protocol2CodeConverter.asCallHierarchyItems(y,u),y=>r.handleFailedRequest(Ht.CallHierarchyPrepareRequest.type,u,y,null))};return o.prepareCallHierarchy?o.prepareCallHierarchy(t,n,i,s):s(t,n,i)}provideCallHierarchyIncomingCalls(t,n){const i=this.client,r=this.middleware,o=(s,a)=>{const c={item:i.code2ProtocolConverter.asCallHierarchyItem(s)};return i.sendRequest(Ht.CallHierarchyIncomingCallsRequest.type,c,a).then(u=>a.isCancellationRequested?null:i.protocol2CodeConverter.asCallHierarchyIncomingCalls(u,a),u=>i.handleFailedRequest(Ht.CallHierarchyIncomingCallsRequest.type,a,u,null))};return r.provideCallHierarchyIncomingCalls?r.provideCallHierarchyIncomingCalls(t,n,o):o(t,n)}provideCallHierarchyOutgoingCalls(t,n){const i=this.client,r=this.middleware,o=(s,a)=>{const c={item:i.code2ProtocolConverter.asCallHierarchyItem(s)};return i.sendRequest(Ht.CallHierarchyOutgoingCallsRequest.type,c,a).then(u=>a.isCancellationRequested?null:i.protocol2CodeConverter.asCallHierarchyOutgoingCalls(u,a),u=>i.handleFailedRequest(Ht.CallHierarchyOutgoingCallsRequest.type,a,u,null))};return r.provideCallHierarchyOutgoingCalls?r.provideCallHierarchyOutgoingCalls(t,n,o):o(t,n)}}class Vd extends ss.TextDocumentLanguageFeature{constructor(t){super(t,Ht.CallHierarchyPrepareRequest.type)}fillClientCapabilities(t){const n=t,i=(0,ss.ensure)((0,ss.ensure)(n,"textDocument"),"callHierarchy");i.dynamicRegistration=!0}initialize(t,n){const[i,r]=this.getRegistration(n,t.callHierarchyProvider);!i||!r||this.register({id:i,registerOptions:r})}registerLanguageProvider(t){const n=this._client,i=new Bd(n);return[Gd.languages.registerCallHierarchyProvider(this._client.protocol2CodeConverter.asDocumentSelector(t.documentSelector),i),i]}}Xi.CallHierarchyFeature=Vd;var Ji={};Object.defineProperty(Ji,"__esModule",{value:!0}),Ji.SemanticTokensFeature=void 0;const Qi=he.default,pe=ge,Wn=Te,Xd=Pe;class Jd extends Wn.TextDocumentLanguageFeature{constructor(t){super(t,pe.SemanticTokensRegistrationType.type)}fillClientCapabilities(t){const n=(0,Wn.ensure)((0,Wn.ensure)(t,"textDocument"),"semanticTokens");n.dynamicRegistration=!0,n.tokenTypes=[pe.SemanticTokenTypes.namespace,pe.SemanticTokenTypes.type,pe.SemanticTokenTypes.class,pe.SemanticTokenTypes.enum,pe.SemanticTokenTypes.interface,pe.SemanticTokenTypes.struct,pe.SemanticTokenTypes.typeParameter,pe.SemanticTokenTypes.parameter,pe.SemanticTokenTypes.variable,pe.SemanticTokenTypes.property,pe.SemanticTokenTypes.enumMember,pe.SemanticTokenTypes.event,pe.SemanticTokenTypes.function,pe.SemanticTokenTypes.method,pe.SemanticTokenTypes.macro,pe.SemanticTokenTypes.keyword,pe.SemanticTokenTypes.modifier,pe.SemanticTokenTypes.comment,pe.SemanticTokenTypes.string,pe.SemanticTokenTypes.number,pe.SemanticTokenTypes.regexp,pe.SemanticTokenTypes.operator,pe.SemanticTokenTypes.decorator],n.tokenModifiers=[pe.SemanticTokenModifiers.declaration,pe.SemanticTokenModifiers.definition,pe.SemanticTokenModifiers.readonly,pe.SemanticTokenModifiers.static,pe.SemanticTokenModifiers.deprecated,pe.SemanticTokenModifiers.abstract,pe.SemanticTokenModifiers.async,pe.SemanticTokenModifiers.modification,pe.SemanticTokenModifiers.documentation,pe.SemanticTokenModifiers.defaultLibrary],n.formats=[pe.TokenFormat.Relative],n.requests={range:!0,full:{delta:!0}},n.multilineTokenSupport=!1,n.overlappingTokenSupport=!1,n.serverCancelSupport=!0,n.augmentsSyntaxTokens=!0,(0,Wn.ensure)((0,Wn.ensure)(t,"workspace"),"semanticTokens").refreshSupport=!0}initialize(t,n){this._client.onRequest(pe.SemanticTokensRefreshRequest.type,async()=>{for(const s of this.getAllProviders())s.onDidChangeSemanticTokensEmitter.fire()});const[r,o]=this.getRegistration(n,t.semanticTokensProvider);!r||!o||this.register({id:r,registerOptions:o})}registerLanguageProvider(t){const n=t.documentSelector,i=Xd.boolean(t.full)?t.full:t.full!==void 0,r=t.full!==void 0&&typeof t.full!="boolean"&&t.full.delta===!0,o=new Qi.EventEmitter,s=i?{onDidChangeSemanticTokens:o.event,provideDocumentSemanticTokens:(g,h)=>{const N=this._client,j=N.middleware,X=(G,S)=>{const C={textDocument:N.code2ProtocolConverter.asTextDocumentIdentifier(G)};return N.sendRequest(pe.SemanticTokensRequest.type,C,S).then(M=>S.isCancellationRequested?null:N.protocol2CodeConverter.asSemanticTokens(M,S),M=>N.handleFailedRequest(pe.SemanticTokensRequest.type,S,M,null))};return j.provideDocumentSemanticTokens?j.provideDocumentSemanticTokens(g,h,X):X(g,h)},provideDocumentSemanticTokensEdits:r?(g,h,N)=>{const j=this._client,X=j.middleware,G=(S,C,M)=>{const W={textDocument:j.code2ProtocolConverter.asTextDocumentIdentifier(S),previousResultId:C};return j.sendRequest(pe.SemanticTokensDeltaRequest.type,W,M).then(async I=>M.isCancellationRequested?null:pe.SemanticTokens.is(I)?await j.protocol2CodeConverter.asSemanticTokens(I,M):await j.protocol2CodeConverter.asSemanticTokensEdits(I,M),I=>j.handleFailedRequest(pe.SemanticTokensDeltaRequest.type,M,I,null))};return X.provideDocumentSemanticTokensEdits?X.provideDocumentSemanticTokensEdits(g,h,N,G):G(g,h,N)}:void 0}:void 0,c=t.range===!0?{provideDocumentRangeSemanticTokens:(g,h,N)=>{const j=this._client,X=j.middleware,G=(S,C,M)=>{const W={textDocument:j.code2ProtocolConverter.asTextDocumentIdentifier(S),range:j.code2ProtocolConverter.asRange(C)};return j.sendRequest(pe.SemanticTokensRangeRequest.type,W,M).then(I=>M.isCancellationRequested?null:j.protocol2CodeConverter.asSemanticTokens(I,M),I=>j.handleFailedRequest(pe.SemanticTokensRangeRequest.type,M,I,null))};return X.provideDocumentRangeSemanticTokens?X.provideDocumentRangeSemanticTokens(g,h,N,G):G(g,h,N)}}:void 0,u=[],p=this._client,y=p.protocol2CodeConverter.asSemanticTokensLegend(t.legend),f=p.protocol2CodeConverter.asDocumentSelector(n);return s!==void 0&&u.push(Qi.languages.registerDocumentSemanticTokensProvider(f,s,y)),c!==void 0&&u.push(Qi.languages.registerDocumentRangeSemanticTokensProvider(f,c,y)),[new Qi.Disposable(()=>u.forEach(g=>g.dispose())),{range:c,full:s,onDidChangeSemanticTokensEmitter:o}]}}Ji.SemanticTokensFeature=Jd;var rt={};Object.defineProperty(rt,"__esModule",{value:!0}),rt.WillDeleteFilesFeature=rt.WillRenameFilesFeature=rt.WillCreateFilesFeature=rt.DidDeleteFilesFeature=rt.DidRenameFilesFeature=rt.DidCreateFilesFeature=void 0;const dt=he.default,Qd=Ci,St=ge,Yd=Re;function za(e,t){return e[t]===void 0&&(e[t]={}),e[t]}function Zd(e,t){return e[t]}function Ga(e,t,n){e[t]=n}class xt{constructor(t,n,i,r,o){this._client=t,this._event=n,this._registrationType=i,this._clientCapability=r,this._serverCapability=o,this._filters=new Map}getState(){return{kind:"workspace",id:this._registrationType.method,registrations:this._filters.size>0}}filterSize(){return this._filters.size}get registrationType(){return this._registrationType}fillClientCapabilities(t){const n=za(za(t,"workspace"),"fileOperations");Ga(n,"dynamicRegistration",!0),Ga(n,this._clientCapability,!0)}initialize(t){const n=t.workspace?.fileOperations,i=n!==void 0?Zd(n,this._serverCapability):void 0;if(i?.filters!==void 0)try{this.register({id:Yd.generateUuid(),registerOptions:{filters:i.filters}})}catch(r){this._client.warn(`Ignoring invalid glob pattern for ${this._serverCapability} registration: ${r}`)}}register(t){this._listener||(this._listener=this._event(this.send,this));const n=t.registerOptions.filters.map(i=>{const r=new Qd.Minimatch(i.pattern.glob,xt.asMinimatchOptions(i.pattern.options));if(!r.makeRe())throw new Error(`Invalid pattern ${i.pattern.glob}!`);return{scheme:i.scheme,matcher:r,kind:i.pattern.matches}});this._filters.set(t.id,n)}unregister(t){this._filters.delete(t),this._filters.size===0&&this._listener&&(this._listener.dispose(),this._listener=void 0)}dispose(){this._filters.clear(),this._listener&&(this._listener.dispose(),this._listener=void 0)}getFileType(t){return xt.getFileType(t)}async filter(t,n){const i=await Promise.all(t.files.map(async o=>{const s=n(o),a=s.fsPath.replace(/\\/g,"/");for(const c of this._filters.values())for(const u of c)if(!(u.scheme!==void 0&&u.scheme!==s.scheme)){if(u.matcher.match(a)){if(u.kind===void 0)return!0;const p=await this.getFileType(s);if(p===void 0)return this._client.error(`Failed to determine file type for ${s.toString()}.`),!0;if(p===dt.FileType.File&&u.kind===St.FileOperationPatternKind.file||p===dt.FileType.Directory&&u.kind===St.FileOperationPatternKind.folder)return!0}else if(u.kind===St.FileOperationPatternKind.folder&&await xt.getFileType(s)===dt.FileType.Directory&&u.matcher.match(`${a}/`))return!0}return!1})),r=t.files.filter((o,s)=>i[s]);return{...t,files:r}}static async getFileType(t){try{return(await dt.workspace.fs.stat(t)).type}catch{return}}static asMinimatchOptions(t){if(t!==void 0&&t.ignoreCase===!0)return{nocase:!0}}}class Ba extends xt{constructor(t,n,i,r,o,s,a){super(t,n,i,r,o),this._notificationType=i,this._accessUri=s,this._createParams=a}async send(t){const n=await this.filter(t,this._accessUri);if(n.files.length){const i=async r=>this._client.sendNotification(this._notificationType,this._createParams(r));return this.doSend(n,i)}}}class Va extends Ba{constructor(){super(...arguments),this._fsPathFileTypes=new Map}async getFileType(t){const n=t.fsPath;if(this._fsPathFileTypes.has(n))return this._fsPathFileTypes.get(n);const i=await xt.getFileType(t);return i&&this._fsPathFileTypes.set(n,i),i}async cacheFileTypes(t,n){await this.filter(t,n)}clearFileTypeCache(){this._fsPathFileTypes.clear()}unregister(t){super.unregister(t),this.filterSize()===0&&this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}dispose(){super.dispose(),this._willListener&&(this._willListener.dispose(),this._willListener=void 0)}}class ef extends Ba{constructor(t){super(t,dt.workspace.onDidCreateFiles,St.DidCreateFilesNotification.type,"didCreate","didCreate",n=>n,t.code2ProtocolConverter.asDidCreateFilesParams)}doSend(t,n){const i=this._client.middleware.workspace;return i?.didCreateFiles?i.didCreateFiles(t,n):n(t)}}rt.DidCreateFilesFeature=ef;class tf extends Va{constructor(t){super(t,dt.workspace.onDidRenameFiles,St.DidRenameFilesNotification.type,"didRename","didRename",n=>n.oldUri,t.code2ProtocolConverter.asDidRenameFilesParams)}register(t){this._willListener||(this._willListener=dt.workspace.onWillRenameFiles(this.willRename,this)),super.register(t)}willRename(t){t.waitUntil(this.cacheFileTypes(t,n=>n.oldUri))}doSend(t,n){this.clearFileTypeCache();const i=this._client.middleware.workspace;return i?.didRenameFiles?i.didRenameFiles(t,n):n(t)}}rt.DidRenameFilesFeature=tf;class nf extends Va{constructor(t){super(t,dt.workspace.onDidDeleteFiles,St.DidDeleteFilesNotification.type,"didDelete","didDelete",n=>n,t.code2ProtocolConverter.asDidDeleteFilesParams)}register(t){this._willListener||(this._willListener=dt.workspace.onWillDeleteFiles(this.willDelete,this)),super.register(t)}willDelete(t){t.waitUntil(this.cacheFileTypes(t,n=>n))}doSend(t,n){this.clearFileTypeCache();const i=this._client.middleware.workspace;return i?.didDeleteFiles?i.didDeleteFiles(t,n):n(t)}}rt.DidDeleteFilesFeature=nf;class as extends xt{constructor(t,n,i,r,o,s,a){super(t,n,i,r,o),this._requestType=i,this._accessUri=s,this._createParams=a}async send(t){const n=this.waitUntil(t);t.waitUntil(n)}async waitUntil(t){const n=await this.filter(t,this._accessUri);if(n.files.length){const i=r=>this._client.sendRequest(this._requestType,this._createParams(r),r.token).then(this._client.protocol2CodeConverter.asWorkspaceEdit);return this.doSend(n,i)}else return}}class rf extends as{constructor(t){super(t,dt.workspace.onWillCreateFiles,St.WillCreateFilesRequest.type,"willCreate","willCreate",n=>n,t.code2ProtocolConverter.asWillCreateFilesParams)}doSend(t,n){const i=this._client.middleware.workspace;return i?.willCreateFiles?i.willCreateFiles(t,n):n(t)}}rt.WillCreateFilesFeature=rf;class of extends as{constructor(t){super(t,dt.workspace.onWillRenameFiles,St.WillRenameFilesRequest.type,"willRename","willRename",n=>n.oldUri,t.code2ProtocolConverter.asWillRenameFilesParams)}doSend(t,n){const i=this._client.middleware.workspace;return i?.willRenameFiles?i.willRenameFiles(t,n):n(t)}}rt.WillRenameFilesFeature=of;class sf extends as{constructor(t){super(t,dt.workspace.onWillDeleteFiles,St.WillDeleteFilesRequest.type,"willDelete","willDelete",n=>n,t.code2ProtocolConverter.asWillDeleteFilesParams)}doSend(t,n){const i=this._client.middleware.workspace;return i?.willDeleteFiles?i.willDeleteFiles(t,n):n(t)}}rt.WillDeleteFilesFeature=sf;var Yi={};Object.defineProperty(Yi,"__esModule",{value:!0}),Yi.LinkedEditingFeature=void 0;const af=he.default,cs=ge,us=Te;class cf extends us.TextDocumentLanguageFeature{constructor(t){super(t,cs.LinkedEditingRangeRequest.type)}fillClientCapabilities(t){const n=(0,us.ensure)((0,us.ensure)(t,"textDocument"),"linkedEditingRange");n.dynamicRegistration=!0}initialize(t,n){let[i,r]=this.getRegistration(n,t.linkedEditingRangeProvider);!i||!r||this.register({id:i,registerOptions:r})}registerLanguageProvider(t){const n=t.documentSelector,i={provideLinkedEditingRanges:(r,o,s)=>{const a=this._client,c=(p,y,f)=>a.sendRequest(cs.LinkedEditingRangeRequest.type,a.code2ProtocolConverter.asTextDocumentPositionParams(p,y),f).then(g=>f.isCancellationRequested?null:a.protocol2CodeConverter.asLinkedEditingRanges(g,f),g=>a.handleFailedRequest(cs.LinkedEditingRangeRequest.type,f,g,null)),u=a.middleware;return u.provideLinkedEditingRange?u.provideLinkedEditingRange(r,o,s,c):c(r,o,s)}};return[this.registerProvider(n,i),i]}registerProvider(t,n){return af.languages.registerLinkedEditingRangeProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n)}}Yi.LinkedEditingFeature=cf;var Zi={};Object.defineProperty(Zi,"__esModule",{value:!0}),Zi.TypeHierarchyFeature=void 0;const uf=he.default,Wt=ge,ls=Te;class lf{constructor(t){this.client=t,this.middleware=t.middleware}prepareTypeHierarchy(t,n,i){const r=this.client,o=this.middleware,s=(a,c,u)=>{const p=r.code2ProtocolConverter.asTextDocumentPositionParams(a,c);return r.sendRequest(Wt.TypeHierarchyPrepareRequest.type,p,u).then(y=>u.isCancellationRequested?null:r.protocol2CodeConverter.asTypeHierarchyItems(y,u),y=>r.handleFailedRequest(Wt.TypeHierarchyPrepareRequest.type,u,y,null))};return o.prepareTypeHierarchy?o.prepareTypeHierarchy(t,n,i,s):s(t,n,i)}provideTypeHierarchySupertypes(t,n){const i=this.client,r=this.middleware,o=(s,a)=>{const c={item:i.code2ProtocolConverter.asTypeHierarchyItem(s)};return i.sendRequest(Wt.TypeHierarchySupertypesRequest.type,c,a).then(u=>a.isCancellationRequested?null:i.protocol2CodeConverter.asTypeHierarchyItems(u,a),u=>i.handleFailedRequest(Wt.TypeHierarchySupertypesRequest.type,a,u,null))};return r.provideTypeHierarchySupertypes?r.provideTypeHierarchySupertypes(t,n,o):o(t,n)}provideTypeHierarchySubtypes(t,n){const i=this.client,r=this.middleware,o=(s,a)=>{const c={item:i.code2ProtocolConverter.asTypeHierarchyItem(s)};return i.sendRequest(Wt.TypeHierarchySubtypesRequest.type,c,a).then(u=>a.isCancellationRequested?null:i.protocol2CodeConverter.asTypeHierarchyItems(u,a),u=>i.handleFailedRequest(Wt.TypeHierarchySubtypesRequest.type,a,u,null))};return r.provideTypeHierarchySubtypes?r.provideTypeHierarchySubtypes(t,n,o):o(t,n)}}class df extends ls.TextDocumentLanguageFeature{constructor(t){super(t,Wt.TypeHierarchyPrepareRequest.type)}fillClientCapabilities(t){const n=(0,ls.ensure)((0,ls.ensure)(t,"textDocument"),"typeHierarchy");n.dynamicRegistration=!0}initialize(t,n){const[i,r]=this.getRegistration(n,t.typeHierarchyProvider);!i||!r||this.register({id:i,registerOptions:r})}registerLanguageProvider(t){const n=this._client,i=new lf(n);return[uf.languages.registerTypeHierarchyProvider(n.protocol2CodeConverter.asDocumentSelector(t.documentSelector),i),i]}}Zi.TypeHierarchyFeature=df;var er={};Object.defineProperty(er,"__esModule",{value:!0}),er.InlineValueFeature=void 0;const Xa=he.default,tr=ge,Un=Te;class ff extends Un.TextDocumentLanguageFeature{constructor(t){super(t,tr.InlineValueRequest.type)}fillClientCapabilities(t){(0,Un.ensure)((0,Un.ensure)(t,"textDocument"),"inlineValue").dynamicRegistration=!0,(0,Un.ensure)((0,Un.ensure)(t,"workspace"),"inlineValue").refreshSupport=!0}initialize(t,n){this._client.onRequest(tr.InlineValueRefreshRequest.type,async()=>{for(const o of this.getAllProviders())o.onDidChangeInlineValues.fire()});const[i,r]=this.getRegistration(n,t.inlineValueProvider);!i||!r||this.register({id:i,registerOptions:r})}registerLanguageProvider(t){const n=t.documentSelector,i=new Xa.EventEmitter,r={onDidChangeInlineValues:i.event,provideInlineValues:(o,s,a,c)=>{const u=this._client,p=(f,g,h,N)=>{const j={textDocument:u.code2ProtocolConverter.asTextDocumentIdentifier(f),range:u.code2ProtocolConverter.asRange(g),context:u.code2ProtocolConverter.asInlineValueContext(h)};return u.sendRequest(tr.InlineValueRequest.type,j,N).then(X=>N.isCancellationRequested?null:u.protocol2CodeConverter.asInlineValues(X,N),X=>u.handleFailedRequest(tr.InlineValueRequest.type,N,X,null))},y=u.middleware;return y.provideInlineValues?y.provideInlineValues(o,s,a,c,p):p(o,s,a,c)}};return[this.registerProvider(n,r),{provider:r,onDidChangeInlineValues:i}]}registerProvider(t,n){return Xa.languages.registerInlineValuesProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n)}}er.InlineValueFeature=ff;var nr={};Object.defineProperty(nr,"__esModule",{value:!0}),nr.InlayHintsFeature=void 0;const Ja=he.default,dn=ge,xn=Te;class hf extends xn.TextDocumentLanguageFeature{constructor(t){super(t,dn.InlayHintRequest.type)}fillClientCapabilities(t){const n=(0,xn.ensure)((0,xn.ensure)(t,"textDocument"),"inlayHint");n.dynamicRegistration=!0,n.resolveSupport={properties:["tooltip","textEdits","label.tooltip","label.location","label.command"]},(0,xn.ensure)((0,xn.ensure)(t,"workspace"),"inlayHint").refreshSupport=!0}initialize(t,n){this._client.onRequest(dn.InlayHintRefreshRequest.type,async()=>{for(const o of this.getAllProviders())o.onDidChangeInlayHints.fire()});const[i,r]=this.getRegistration(n,t.inlayHintProvider);!i||!r||this.register({id:i,registerOptions:r})}registerLanguageProvider(t){const n=t.documentSelector,i=new Ja.EventEmitter,r={onDidChangeInlayHints:i.event,provideInlayHints:(o,s,a)=>{const c=this._client,u=async(y,f,g)=>{const h={textDocument:c.code2ProtocolConverter.asTextDocumentIdentifier(y),range:c.code2ProtocolConverter.asRange(f)};try{const N=await c.sendRequest(dn.InlayHintRequest.type,h,g);return g.isCancellationRequested?null:c.protocol2CodeConverter.asInlayHints(N,g)}catch(N){return c.handleFailedRequest(dn.InlayHintRequest.type,g,N,null)}},p=c.middleware;return p.provideInlayHints?p.provideInlayHints(o,s,a,u):u(o,s,a)}};return r.resolveInlayHint=t.resolveProvider===!0?(o,s)=>{const a=this._client,c=async(p,y)=>{try{const f=await a.sendRequest(dn.InlayHintResolveRequest.type,a.code2ProtocolConverter.asInlayHint(p),y);if(y.isCancellationRequested)return null;const g=a.protocol2CodeConverter.asInlayHint(f,y);return y.isCancellationRequested?null:g}catch(f){return a.handleFailedRequest(dn.InlayHintResolveRequest.type,y,f,null)}},u=a.middleware;return u.resolveInlayHint?u.resolveInlayHint(o,s,c):c(o,s)}:void 0,[this.registerProvider(n,r),{provider:r,onDidChangeInlayHints:i}]}registerProvider(t,n){return Ja.languages.registerInlayHintsProvider(this._client.protocol2CodeConverter.asDocumentSelector(t),n)}}nr.InlayHintsFeature=hf,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ProposedFeatures=e.BaseLanguageClient=e.MessageTransports=e.SuspendMode=e.State=e.CloseAction=e.ErrorAction=e.RevealOutputChannelOn=void 0;const t=he.default,n=ge,i=ai,r=yi,o=Pe,s=Xe,a=Re,c=kn,u=Te,p=So,y=bi,f=Et,g=it,h=Ti,N=Pi,j=Ei,X=ki,G=Fi,S=Ho,C=Oi,M=Ii,W=Ni,I=qi,P=kt,L=Li,V=$i,D=Ai,d=ji,v=Wi,R=Ui,k=xi,F=un,q=zi,$=Gi,x=Bi,Z=Vi,ee=Xi,re=Ji,ae=rt,ne=Yi,te=Zi,ce=er,se=nr;var nt;(function(le){le[le.Info=1]="Info",le[le.Warn=2]="Warn",le[le.Error=3]="Error",le[le.Never=4]="Never"})(nt=e.RevealOutputChannelOn||(e.RevealOutputChannelOn={}));var ze;(function(le){le[le.Continue=1]="Continue",le[le.Shutdown=2]="Shutdown"})(ze=e.ErrorAction||(e.ErrorAction={}));var Ce;(function(le){le[le.DoNotRestart=1]="DoNotRestart",le[le.Restart=2]="Restart"})(Ce=e.CloseAction||(e.CloseAction={}));var Ye;(function(le){le[le.Stopped=1]="Stopped",le[le.Starting=3]="Starting",le[le.Running=2]="Running"})(Ye=e.State||(e.State={})),function(le){le.off="off",le.on="on"}(e.SuspendMode||(e.SuspendMode={}));class ke{constructor(b,E){this.client=b,this.maxRestartCount=E,this.restarts=[]}error(b,E,T){return T&&T<=3?{action:ze.Continue}:{action:ze.Shutdown}}closed(){return this.restarts.push(Date.now()),this.restarts.length<=this.maxRestartCount?{action:Ce.Restart}:this.restarts[this.restarts.length-1]-this.restarts[0]<=3*60*1e3?{action:Ce.DoNotRestart,message:`The ${this.client.name} server crashed ${this.maxRestartCount+1} times in the last 3 minutes. The server will not be restarted. See the output for more information.`}:(this.restarts.shift(),{action:Ce.Restart})}}var ue;(function(le){le.Initial="initial",le.Starting="starting",le.StartFailed="startFailed",le.Running="running",le.Stopping="stopping",le.Stopped="stopped"})(ue||(ue={})),function(le){function b(E){return E&&n.MessageReader.is(E.reader)&&n.MessageWriter.is(E.writer)}le.is=b}(e.MessageTransports||(e.MessageTransports={}));class Ve{constructor(b,E,T){this._traceFormat=n.TraceFormat.Text,this._diagnosticQueue=new Map,this._diagnosticQueueState={state:"idle"},this._features=[],this._dynamicFeatures=new Map,this.workspaceEditLock=new s.Semaphore(1),this._id=b,this._name=E,T=T||{};const z={isTrusted:!1,supportHtml:!1};T.markdown!==void 0&&(z.isTrusted=T.markdown.isTrusted===!0,z.supportHtml=T.markdown.supportHtml===!0),this._clientOptions={documentSelector:T.documentSelector??[],synchronize:T.synchronize??{},diagnosticCollectionName:T.diagnosticCollectionName,outputChannelName:T.outputChannelName??this._name,revealOutputChannelOn:T.revealOutputChannelOn??nt.Error,stdioEncoding:T.stdioEncoding??"utf8",initializationOptions:T.initializationOptions,initializationFailedHandler:T.initializationFailedHandler,progressOnInitialization:!!T.progressOnInitialization,errorHandler:T.errorHandler??this.createDefaultErrorHandler(T.connectionOptions?.maxRestartCount),middleware:T.middleware??{},uriConverters:T.uriConverters,workspaceFolder:T.workspaceFolder,connectionOptions:T.connectionOptions,markdown:z,diagnosticPullOptions:T.diagnosticPullOptions??{onChange:!0,onSave:!1},notebookDocumentOptions:T.notebookDocumentOptions??{}},this._clientOptions.synchronize=this._clientOptions.synchronize||{},this._state=ue.Initial,this._ignoredRegistrations=new Set,this._listeners=[],this._notificationHandlers=new Map,this._pendingNotificationHandlers=new Map,this._notificationDisposables=new Map,this._requestHandlers=new Map,this._pendingRequestHandlers=new Map,this._requestDisposables=new Map,this._progressHandlers=new Map,this._pendingProgressHandlers=new Map,this._progressDisposables=new Map,this._connection=void 0,this._initializeResult=void 0,T.outputChannel?(this._outputChannel=T.outputChannel,this._disposeOutputChannel=!1):(this._outputChannel=void 0,this._disposeOutputChannel=!0),this._traceOutputChannel=T.traceOutputChannel,this._diagnostics=void 0,this._pendingOpenNotifications=new Set,this._pendingChangeSemaphore=new s.Semaphore(1),this._pendingChangeDelayer=new s.Delayer(250),this._fileEvents=[],this._fileEventDelayer=new s.Delayer(250),this._onStop=void 0,this._telemetryEmitter=new n.Emitter,this._stateChangeEmitter=new n.Emitter,this._trace=n.Trace.Off,this._tracer={log:(K,B)=>{o.string(K)?this.logTrace(K,B):this.logObjectTrace(K)}},this._c2p=i.createConverter(T.uriConverters?T.uriConverters.code2Protocol:void 0),this._p2c=r.createConverter(T.uriConverters?T.uriConverters.protocol2Code:void 0,this._clientOptions.markdown.isTrusted,this._clientOptions.markdown.supportHtml),this._syncedDocuments=new Map,this.registerBuiltinFeatures()}get name(){return this._name}get middleware(){return this._clientOptions.middleware??Object.create(null)}get clientOptions(){return this._clientOptions}get protocol2CodeConverter(){return this._p2c}get code2ProtocolConverter(){return this._c2p}get onTelemetry(){return this._telemetryEmitter.event}get onDidChangeState(){return this._stateChangeEmitter.event}get outputChannel(){return this._outputChannel||(this._outputChannel=t.window.createOutputChannel(this._clientOptions.outputChannelName?this._clientOptions.outputChannelName:this._name)),this._outputChannel}get traceOutputChannel(){return this._traceOutputChannel?this._traceOutputChannel:this.outputChannel}get diagnostics(){return this._diagnostics}get state(){return this.getPublicState()}get $state(){return this._state}set $state(b){let E=this.getPublicState();this._state=b;let T=this.getPublicState();T!==E&&this._stateChangeEmitter.fire({oldState:E,newState:T})}getPublicState(){switch(this.$state){case ue.Starting:return Ye.Starting;case ue.Running:return Ye.Running;default:return Ye.Stopped}}get initializeResult(){return this._initializeResult}async sendRequest(b,...E){if(this.$state===ue.StartFailed||this.$state===ue.Stopping||this.$state===ue.Stopped)return Promise.reject(new n.ResponseError(n.ErrorCodes.ConnectionInactive,"Client is not running"));const T=await this.$start();return this._didChangeTextDocumentFeature.syncKind===n.TextDocumentSyncKind.Full&&await this.sendPendingFullTextDocumentChanges(T),T.sendRequest(b,...E)}onRequest(b,E){const T=typeof b=="string"?b:b.method;this._requestHandlers.set(T,E);const z=this.activeConnection();let K;return z!==void 0?(this._requestDisposables.set(T,z.onRequest(b,E)),K={dispose:()=>{const B=this._requestDisposables.get(T);B!==void 0&&(B.dispose(),this._requestDisposables.delete(T))}}):(this._pendingRequestHandlers.set(T,E),K={dispose:()=>{this._pendingRequestHandlers.delete(T);const B=this._requestDisposables.get(T);B!==void 0&&(B.dispose(),this._requestDisposables.delete(T))}}),{dispose:()=>{this._requestHandlers.delete(T),K.dispose()}}}async sendNotification(b,E){if(this.$state===ue.StartFailed||this.$state===ue.Stopping||this.$state===ue.Stopped)return Promise.reject(new n.ResponseError(n.ErrorCodes.ConnectionInactive,"Client is not running"));const T=this._didChangeTextDocumentFeature.syncKind===n.TextDocumentSyncKind.Full;let z;T&&typeof b!="string"&&b.method===n.DidOpenTextDocumentNotification.method&&(z=E?.textDocument.uri,this._pendingOpenNotifications.add(z));const K=await this.$start();return T&&await this.sendPendingFullTextDocumentChanges(K),z!==void 0&&this._pendingOpenNotifications.delete(z),K.sendNotification(b,E)}onNotification(b,E){const T=typeof b=="string"?b:b.method;this._notificationHandlers.set(T,E);const z=this.activeConnection();let K;return z!==void 0?(this._notificationDisposables.set(T,z.onNotification(b,E)),K={dispose:()=>{const B=this._notificationDisposables.get(T);B!==void 0&&(B.dispose(),this._notificationDisposables.delete(T))}}):(this._pendingNotificationHandlers.set(T,E),K={dispose:()=>{this._pendingNotificationHandlers.delete(T);const B=this._notificationDisposables.get(T);B!==void 0&&(B.dispose(),this._notificationDisposables.delete(T))}}),{dispose:()=>{this._notificationHandlers.delete(T),K.dispose()}}}async sendProgress(b,E,T){if(this.$state===ue.StartFailed||this.$state===ue.Stopping||this.$state===ue.Stopped)return Promise.reject(new n.ResponseError(n.ErrorCodes.ConnectionInactive,"Client is not running"));try{return(await this.$start()).sendProgress(b,E,T)}catch(z){throw this.error(`Sending progress for token ${E} failed.`,z),z}}onProgress(b,E,T){this._progressHandlers.set(E,{type:b,handler:T});const z=this.activeConnection();let K;const B=this._clientOptions.middleware?.handleWorkDoneProgress,Fe=n.WorkDoneProgress.is(b)&&B!==void 0?de=>{B(E,de,()=>T(de))}:T;return z!==void 0?(this._progressDisposables.set(E,z.onProgress(b,E,Fe)),K={dispose:()=>{const de=this._progressDisposables.get(E);de!==void 0&&(de.dispose(),this._progressDisposables.delete(E))}}):(this._pendingProgressHandlers.set(E,{type:b,handler:T}),K={dispose:()=>{this._pendingProgressHandlers.delete(E);const de=this._progressDisposables.get(E);de!==void 0&&(de.dispose(),this._progressDisposables.delete(E))}}),{dispose:()=>{this._progressHandlers.delete(E),K.dispose()}}}createDefaultErrorHandler(b){if(b!==void 0&&b<0)throw new Error(`Invalid maxRestartCount: ${b}`);return new ke(this,b??4)}async setTrace(b){this._trace=b;const E=this.activeConnection();E!==void 0&&await E.trace(this._trace,this._tracer,{sendNotification:!1,traceFormat:this._traceFormat})}data2String(b){if(b instanceof n.ResponseError){const E=b;return`  Message: ${E.message}
  Code: ${E.code} ${E.data?`
`+E.data.toString():""}`}return b instanceof Error?o.string(b.stack)?b.stack:b.message:o.string(b)?b:b.toString()}info(b,E,T=!0){this.outputChannel.appendLine(`[Info  - ${new Date().toLocaleTimeString()}] ${b}`),E!=null&&this.outputChannel.appendLine(this.data2String(E)),T&&this._clientOptions.revealOutputChannelOn<=nt.Info&&this.showNotificationMessage(n.MessageType.Info,b)}warn(b,E,T=!0){this.outputChannel.appendLine(`[Warn  - ${new Date().toLocaleTimeString()}] ${b}`),E!=null&&this.outputChannel.appendLine(this.data2String(E)),T&&this._clientOptions.revealOutputChannelOn<=nt.Warn&&this.showNotificationMessage(n.MessageType.Warning,b)}error(b,E,T=!0){this.outputChannel.appendLine(`[Error - ${new Date().toLocaleTimeString()}] ${b}`),E!=null&&this.outputChannel.appendLine(this.data2String(E)),(T==="force"||T&&this._clientOptions.revealOutputChannelOn<=nt.Error)&&this.showNotificationMessage(n.MessageType.Error,b)}showNotificationMessage(b,E){E=E??"A request has failed. See the output for more information.",(b===n.MessageType.Error?t.window.showErrorMessage:b===n.MessageType.Warning?t.window.showWarningMessage:t.window.showInformationMessage)(E,"Go to output").then(z=>{z!==void 0&&this.outputChannel.show(!0)})}logTrace(b,E){this.traceOutputChannel.appendLine(`[Trace - ${new Date().toLocaleTimeString()}] ${b}`),E&&this.traceOutputChannel.appendLine(this.data2String(E))}logObjectTrace(b){b.isLSPMessage&&b.type?this.traceOutputChannel.append(`[LSP   - ${new Date().toLocaleTimeString()}] `):this.traceOutputChannel.append(`[Trace - ${new Date().toLocaleTimeString()}] `),b&&this.traceOutputChannel.appendLine(`${JSON.stringify(b)}`)}needsStart(){return this.$state===ue.Initial||this.$state===ue.Stopping||this.$state===ue.Stopped}needsStop(){return this.$state===ue.Starting||this.$state===ue.Running}activeConnection(){return this.$state===ue.Running&&this._connection!==void 0?this._connection:void 0}isRunning(){return this.$state===ue.Running}async start(){if(this._disposed==="disposing"||this._disposed==="disposed")throw new Error("Client got disposed and can't be restarted.");if(this.$state===ue.Stopping)throw new Error("Client is currently stopping. Can only restart a full stopped client");if(this._onStart!==void 0)return this._onStart;const[b,E,T]=this.createOnStartPromise();this._onStart=b,this._diagnostics===void 0&&(this._diagnostics=this._clientOptions.diagnosticCollectionName?t.languages.createDiagnosticCollection(this._clientOptions.diagnosticCollectionName):t.languages.createDiagnosticCollection());for(const[z,K]of this._notificationHandlers)this._pendingNotificationHandlers.has(z)||this._pendingNotificationHandlers.set(z,K);for(const[z,K]of this._requestHandlers)this._pendingRequestHandlers.has(z)||this._pendingRequestHandlers.set(z,K);for(const[z,K]of this._progressHandlers)this._pendingProgressHandlers.has(z)||this._pendingProgressHandlers.set(z,K);this.$state=ue.Starting;try{const z=await this.createConnection();z.onNotification(n.LogMessageNotification.type,K=>{switch(K.type){case n.MessageType.Error:this.error(K.message,void 0,!1);break;case n.MessageType.Warning:this.warn(K.message,void 0,!1);break;case n.MessageType.Info:this.info(K.message,void 0,!1);break;default:this.outputChannel.appendLine(K.message)}}),z.onNotification(n.ShowMessageNotification.type,K=>{switch(K.type){case n.MessageType.Error:t.window.showErrorMessage(K.message);break;case n.MessageType.Warning:t.window.showWarningMessage(K.message);break;case n.MessageType.Info:t.window.showInformationMessage(K.message);break;default:t.window.showInformationMessage(K.message)}}),z.onRequest(n.ShowMessageRequest.type,K=>{let B;switch(K.type){case n.MessageType.Error:B=t.window.showErrorMessage;break;case n.MessageType.Warning:B=t.window.showWarningMessage;break;case n.MessageType.Info:B=t.window.showInformationMessage;break;default:B=t.window.showInformationMessage}let Fe=K.actions||[];return B(K.message,...Fe)}),z.onNotification(n.TelemetryEventNotification.type,K=>{this._telemetryEmitter.fire(K)}),z.onRequest(n.ShowDocumentRequest.type,async K=>{const B=async de=>{const Ge=this.protocol2CodeConverter.asUri(de.uri);try{if(de.external===!0)return{success:await t.env.openExternal(Ge)};{const Be={};return de.selection!==void 0&&(Be.selection=this.protocol2CodeConverter.asRange(de.selection)),de.takeFocus===void 0||de.takeFocus===!1?Be.preserveFocus=!0:de.takeFocus===!0&&(Be.preserveFocus=!1),await t.window.showTextDocument(Ge,Be),{success:!0}}}catch{return{success:!1}}},Fe=this._clientOptions.middleware.window?.showDocument;return Fe!==void 0?Fe(K,B):B(K)}),z.listen(),await this.initialize(z),E()}catch(z){this.$state=ue.StartFailed,this.error(`${this._name} client: couldn't create connection to server.`,z,"force"),T(z)}return this._onStart}createOnStartPromise(){let b,E;return[new Promise((z,K)=>{b=z,E=K}),b,E]}async initialize(b){this.refreshTrace(b,!1);const E=this._clientOptions.initializationOptions,[T,z]=this._clientOptions.workspaceFolder!==void 0?[this._clientOptions.workspaceFolder.uri.fsPath,[{uri:this._c2p.asUri(this._clientOptions.workspaceFolder.uri),name:this._clientOptions.workspaceFolder.name}]]:[this._clientGetRootPath(),null],K={processId:null,clientInfo:{name:t.env.appName,version:t.version},locale:this.getLocale(),rootPath:T||null,rootUri:T?this._c2p.asUri(t.Uri.file(T)):null,capabilities:this.computeClientCapabilities(),initializationOptions:o.func(E)?E():E,trace:n.Trace.toString(this._trace),workspaceFolders:z};if(this.fillInitializeParams(K),this._clientOptions.progressOnInitialization){const B=a.generateUuid(),Fe=new c.ProgressPart(b,B);K.workDoneToken=B;try{const de=await this.doInitialize(b,K);return Fe.done(),de}catch(de){throw Fe.cancel(),de}}else return this.doInitialize(b,K)}async doInitialize(b,E){try{const T=await b.initialize(E);if(T.capabilities.positionEncoding!==void 0&&T.capabilities.positionEncoding!==n.PositionEncodingKind.UTF16)throw new Error(`Unsupported position encoding (${T.capabilities.positionEncoding}) received from server ${this.name}`);this._initializeResult=T,this.$state=ue.Running;let z;o.number(T.capabilities.textDocumentSync)?T.capabilities.textDocumentSync===n.TextDocumentSyncKind.None?z={openClose:!1,change:n.TextDocumentSyncKind.None,save:void 0}:z={openClose:!0,change:T.capabilities.textDocumentSync,save:{includeText:!1}}:T.capabilities.textDocumentSync!==void 0&&T.capabilities.textDocumentSync!==null&&(z=T.capabilities.textDocumentSync),this._capabilities=Object.assign({},T.capabilities,{resolvedTextDocumentSync:z}),b.onNotification(n.PublishDiagnosticsNotification.type,K=>this.handleDiagnostics(K)),b.onRequest(n.RegistrationRequest.type,K=>this.handleRegistrationRequest(K)),b.onRequest("client/registerFeature",K=>this.handleRegistrationRequest(K)),b.onRequest(n.UnregistrationRequest.type,K=>this.handleUnregistrationRequest(K)),b.onRequest("client/unregisterFeature",K=>this.handleUnregistrationRequest(K)),b.onRequest(n.ApplyWorkspaceEditRequest.type,K=>this.handleApplyWorkspaceEdit(K));for(const[K,B]of this._pendingNotificationHandlers)this._notificationDisposables.set(K,b.onNotification(K,B));this._pendingNotificationHandlers.clear();for(const[K,B]of this._pendingRequestHandlers)this._requestDisposables.set(K,b.onRequest(K,B));this._pendingRequestHandlers.clear();for(const[K,B]of this._pendingProgressHandlers)this._progressDisposables.set(K,b.onProgress(B.type,K,B.handler));return this._pendingProgressHandlers.clear(),await b.sendNotification(n.InitializedNotification.type,{}),this.hookFileEvents(b),this.hookConfigurationChanged(b),this.initializeFeatures(b),T}catch(T){throw this._clientOptions.initializationFailedHandler?this._clientOptions.initializationFailedHandler(T)?this.initialize(b):this.stop():T instanceof n.ResponseError&&T.data&&T.data.retry?t.window.showErrorMessage(T.message,{title:"Retry",id:"retry"}).then(z=>{z&&z.id==="retry"?this.initialize(b):this.stop()}):(T&&T.message&&t.window.showErrorMessage(T.message),this.error("Server initialization failed.",T),this.stop()),T}}_clientGetRootPath(){let b=t.workspace.workspaceFolders;if(!b||b.length===0)return;let E=b[0];if(E.uri.scheme==="file")return E.uri.fsPath}stop(b=2e3){return this.shutdown("stop",b)}dispose(b=2e3){try{return this._disposed="disposing",this.stop(b)}finally{this._disposed="disposed"}}async shutdown(b,E){if(this.$state===ue.Stopped||this.$state===ue.Initial)return;if(this.$state===ue.Stopping){if(this._onStop!==void 0)return this._onStop;throw new Error("Client is stopping but no stop promise available.")}const T=this.activeConnection();if(T===void 0||this.$state!==ue.Running)throw new Error(`Client is not running and can't be stopped. It's current state is: ${this.$state}`);this._initializeResult=void 0,this.$state=ue.Stopping,this.cleanUp(b);const z=new Promise(B=>{(0,n.RAL)().timer.setTimeout(B,E)}),K=(async B=>(await B.shutdown(),await B.exit(),B))(T);return this._onStop=Promise.race([z,K]).then(B=>{if(B!==void 0)B.end(),B.dispose();else throw this.error("Stopping server timed out",void 0,!1),new Error("Stopping the server timed out")},B=>{throw this.error("Stopping server failed",B,!1),B}).finally(()=>{this.$state=ue.Stopped,b==="stop"&&this.cleanUpChannel(),this._onStart=void 0,this._onStop=void 0,this._connection=void 0,this._ignoredRegistrations.clear()})}cleanUp(b){this._fileEvents=[],this._fileEventDelayer.cancel();const E=this._listeners.splice(0,this._listeners.length);for(const T of E)T.dispose();this._syncedDocuments&&this._syncedDocuments.clear();for(const T of Array.from(this._features.entries()).map(z=>z[1]).reverse())T.dispose();b==="stop"&&this._diagnostics!==void 0&&(this._diagnostics.dispose(),this._diagnostics=void 0),this._idleInterval!==void 0&&(this._idleInterval.dispose(),this._idleInterval=void 0)}cleanUpChannel(){this._outputChannel!==void 0&&this._disposeOutputChannel&&(this._outputChannel.dispose(),this._outputChannel=void 0)}notifyFileEvent(b){const E=this;async function T(K){return E._fileEvents.push(K),E._fileEventDelayer.trigger(async()=>{await E.sendNotification(n.DidChangeWatchedFilesNotification.type,{changes:E._fileEvents}),E._fileEvents=[]})}const z=this.clientOptions.middleware?.workspace;(z?.didChangeWatchedFile?z.didChangeWatchedFile(b,T):T(b)).catch(K=>{E.error("Notify file events failed.",K)})}async sendPendingFullTextDocumentChanges(b){return this._pendingChangeSemaphore.lock(async()=>{try{const E=this._didChangeTextDocumentFeature.getPendingDocumentChanges(this._pendingOpenNotifications);if(E.length===0)return;for(const T of E){const z=this.code2ProtocolConverter.asChangeTextDocumentParams(T);await b.sendNotification(n.DidChangeTextDocumentNotification.type,z),this._didChangeTextDocumentFeature.notificationSent(T,n.DidChangeTextDocumentNotification.type,z)}}catch(E){throw this.error("Sending pending changes failed",E,!1),E}})}triggerPendingChangeDelivery(){this._pendingChangeDelayer.trigger(async()=>{const b=this.activeConnection();if(b===void 0){this.triggerPendingChangeDelivery();return}await this.sendPendingFullTextDocumentChanges(b)}).catch(b=>this.error("Delivering pending changes failed",b,!1))}handleDiagnostics(b){if(!this._diagnostics)return;const E=b.uri;this._diagnosticQueueState.state==="busy"&&this._diagnosticQueueState.document===E&&this._diagnosticQueueState.tokenSource.cancel(),this._diagnosticQueue.set(b.uri,b.diagnostics),this.triggerDiagnosticQueue()}triggerDiagnosticQueue(){(0,n.RAL)().timer.setImmediate(()=>{this.workDiagnosticQueue()})}workDiagnosticQueue(){if(this._diagnosticQueueState.state==="busy")return;const b=this._diagnosticQueue.entries().next();if(b.done===!0)return;const[E,T]=b.value;this._diagnosticQueue.delete(E);const z=new t.CancellationTokenSource;this._diagnosticQueueState={state:"busy",document:E,tokenSource:z},this._p2c.asDiagnostics(T,z.token).then(K=>{if(!z.token.isCancellationRequested){const B=this._p2c.asUri(E),Fe=this.clientOptions.middleware;Fe.handleDiagnostics?Fe.handleDiagnostics(B,K,(de,Ge)=>this.setDiagnostics(de,Ge)):this.setDiagnostics(B,K)}}).finally(()=>{this._diagnosticQueueState={state:"idle"},this.triggerDiagnosticQueue()})}setDiagnostics(b,E){!this._diagnostics||this._diagnostics.set(b,E)}getLocale(){return t.env.language}async $start(){if(this.$state===ue.StartFailed)throw new Error("Previous start failed. Can't restart server.");await this.start();const b=this.activeConnection();if(b===void 0)throw new Error("Starting server failed");return b}async createConnection(){let b=(z,K,B)=>{this.handleConnectionError(z,K,B).catch(Fe=>this.error("Handling connection error failed",Fe))},E=()=>{this.handleConnectionClosed().catch(z=>this.error("Handling connection close failed",z))};const T=await this.createMessageTransports(this._clientOptions.stdioEncoding||"utf8");return this._connection=mt(T.reader,T.writer,b,E,this._clientOptions.connectionOptions),this._connection}async handleConnectionClosed(){if(this.$state===ue.Stopped)return;try{this._connection!==void 0&&this._connection.dispose()}catch{}let b={action:Ce.DoNotRestart};if(this.$state!==ue.Stopping)try{b=await this._clientOptions.errorHandler.closed()}catch{}this._connection=void 0,b.action===Ce.DoNotRestart?(this.error(b.message??"Connection to server got closed. Server will not be restarted.",void 0,b.handled===!0?!1:"force"),this.cleanUp("stop"),this.$state===ue.Starting?this.$state=ue.StartFailed:this.$state=ue.Stopped,this._onStop=Promise.resolve(),this._onStart=void 0):b.action===Ce.Restart&&(this.info(b.message??"Connection to server got closed. Server will restart.",!b.handled),this.cleanUp("restart"),this.$state=ue.Initial,this._onStop=Promise.resolve(),this._onStart=void 0,this.start().catch(E=>this.error("Restarting server failed",E,"force")))}async handleConnectionError(b,E,T){const z=await this._clientOptions.errorHandler.error(b,E,T);z.action===ze.Shutdown&&(this.error(z.message??`Client ${this._name}: connection to server is erroring. Shutting down server.`,void 0,z.handled===!0?!1:"force"),this.stop().catch(K=>{this.error("Stopping server failed",K,!1)}))}hookConfigurationChanged(b){this._listeners.push(t.workspace.onDidChangeConfiguration(()=>{this.refreshTrace(b,!0)}))}refreshTrace(b,E=!1){const T=t.workspace.getConfiguration(this._id);let z=n.Trace.Off,K=n.TraceFormat.Text;if(T){const B=T.get("trace.server","off");typeof B=="string"?z=n.Trace.fromString(B):(z=n.Trace.fromString(T.get("trace.server.verbosity","off")),K=n.TraceFormat.fromString(T.get("trace.server.format","text")))}this._trace=z,this._traceFormat=K,b.trace(this._trace,this._tracer,{sendNotification:E,traceFormat:this._traceFormat}).catch(B=>{this.error("Updating trace failed with error",B,!1)})}hookFileEvents(b){let E=this._clientOptions.synchronize.fileEvents;if(!E)return;let T;o.array(E)?T=E:T=[E],T&&this._dynamicFeatures.get(n.DidChangeWatchedFilesNotification.type.method).registerRaw(a.generateUuid(),T)}registerFeatures(b){for(let E of b)this.registerFeature(E)}registerFeature(b){if(this._features.push(b),u.DynamicFeature.is(b)){const E=b.registrationType;this._dynamicFeatures.set(E.method,b)}}getFeature(b){return this._dynamicFeatures.get(b)}hasDedicatedTextSynchronizationFeature(b){const E=this.getFeature(n.NotebookDocumentSyncRegistrationType.method);return E===void 0||!(E instanceof y.NotebookDocumentSyncFeature)?!1:E.handles(b)}registerBuiltinFeatures(){const b=new Map;this.registerFeature(new f.ConfigurationFeature(this)),this.registerFeature(new g.DidOpenTextDocumentFeature(this,this._syncedDocuments)),this._didChangeTextDocumentFeature=new g.DidChangeTextDocumentFeature(this,b),this._didChangeTextDocumentFeature.onPendingChangeAdded(()=>{this.triggerPendingChangeDelivery()}),this.registerFeature(this._didChangeTextDocumentFeature),this.registerFeature(new g.WillSaveFeature(this)),this.registerFeature(new g.WillSaveWaitUntilFeature(this)),this.registerFeature(new g.DidSaveTextDocumentFeature(this)),this.registerFeature(new g.DidCloseTextDocumentFeature(this,this._syncedDocuments,b)),this.registerFeature(new d.FileSystemWatcherFeature(this,E=>this.notifyFileEvent(E))),this.registerFeature(new h.CompletionItemFeature(this)),this.registerFeature(new N.HoverFeature(this)),this.registerFeature(new X.SignatureHelpFeature(this)),this.registerFeature(new j.DefinitionFeature(this)),this.registerFeature(new M.ReferencesFeature(this)),this.registerFeature(new G.DocumentHighlightFeature(this)),this.registerFeature(new S.DocumentSymbolFeature(this)),this.registerFeature(new C.WorkspaceSymbolFeature(this)),this.registerFeature(new W.CodeActionFeature(this)),this.registerFeature(new I.CodeLensFeature(this)),this.registerFeature(new P.DocumentFormattingFeature(this)),this.registerFeature(new P.DocumentRangeFormattingFeature(this)),this.registerFeature(new P.DocumentOnTypeFormattingFeature(this)),this.registerFeature(new L.RenameFeature(this)),this.registerFeature(new V.DocumentLinkFeature(this)),this.registerFeature(new D.ExecuteCommandFeature(this)),this.registerFeature(new f.SyncConfigurationFeature(this)),this.registerFeature(new k.TypeDefinitionFeature(this)),this.registerFeature(new R.ImplementationFeature(this)),this.registerFeature(new v.ColorProviderFeature(this)),this.clientOptions.workspaceFolder===void 0&&this.registerFeature(new F.WorkspaceFoldersFeature(this)),this.registerFeature(new q.FoldingRangeFeature(this)),this.registerFeature(new $.DeclarationFeature(this)),this.registerFeature(new x.SelectionRangeFeature(this)),this.registerFeature(new Z.ProgressFeature(this)),this.registerFeature(new ee.CallHierarchyFeature(this)),this.registerFeature(new re.SemanticTokensFeature(this)),this.registerFeature(new ne.LinkedEditingFeature(this)),this.registerFeature(new ae.DidCreateFilesFeature(this)),this.registerFeature(new ae.DidRenameFilesFeature(this)),this.registerFeature(new ae.DidDeleteFilesFeature(this)),this.registerFeature(new ae.WillCreateFilesFeature(this)),this.registerFeature(new ae.WillRenameFilesFeature(this)),this.registerFeature(new ae.WillDeleteFilesFeature(this)),this.registerFeature(new te.TypeHierarchyFeature(this)),this.registerFeature(new ce.InlineValueFeature(this)),this.registerFeature(new se.InlayHintsFeature(this)),this.registerFeature(new p.DiagnosticFeature(this)),this.registerFeature(new y.NotebookDocumentSyncFeature(this))}registerProposedFeatures(){this.registerFeatures(et.createAll(this))}fillInitializeParams(b){for(let E of this._features)o.func(E.fillInitializeParams)&&E.fillInitializeParams(b)}computeClientCapabilities(){const b={};(0,u.ensure)(b,"workspace").applyEdit=!0;const E=(0,u.ensure)((0,u.ensure)(b,"workspace"),"workspaceEdit");E.documentChanges=!0,E.resourceOperations=[n.ResourceOperationKind.Create,n.ResourceOperationKind.Rename,n.ResourceOperationKind.Delete],E.failureHandling=n.FailureHandlingKind.TextOnlyTransactional,E.normalizesLineEndings=!0,E.changeAnnotationSupport={groupsOnLabel:!0};const T=(0,u.ensure)((0,u.ensure)(b,"textDocument"),"publishDiagnostics");T.relatedInformation=!0,T.versionSupport=!1,T.tagSupport={valueSet:[n.DiagnosticTag.Unnecessary,n.DiagnosticTag.Deprecated]},T.codeDescriptionSupport=!0,T.dataSupport=!0;const z=(0,u.ensure)(b,"window"),K=(0,u.ensure)(z,"showMessage");K.messageActionItem={additionalPropertiesSupport:!0};const B=(0,u.ensure)(z,"showDocument");B.support=!0;const Fe=(0,u.ensure)(b,"general");Fe.staleRequestSupport={cancel:!0,retryOnContentModified:Array.from(Ve.RequestsToCancelOnContentModified)},Fe.regularExpressions={engine:"ECMAScript",version:"ES2020"},Fe.markdown={parser:"marked",version:"1.1.0"},Fe.positionEncodings=["utf-16"],this._clientOptions.markdown.supportHtml&&(Fe.markdown.allowedTags=["ul","li","p","code","blockquote","ol","h1","h2","h3","h4","h5","h6","hr","em","pre","table","thead","tbody","tr","th","td","div","del","a","strong","br","img","span"]);for(let de of this._features)de.fillClientCapabilities(b);return b}initializeFeatures(b){const E=this._clientOptions.documentSelector;for(const T of this._features)o.func(T.preInitialize)&&T.preInitialize(this._capabilities,E);for(const T of this._features)T.initialize(this._capabilities,E)}async handleRegistrationRequest(b){if(!this.isRunning()){for(const E of b.registrations)this._ignoredRegistrations.add(E.id);return}for(const E of b.registrations){const T=this._dynamicFeatures.get(E.method);if(T===void 0)return Promise.reject(new Error(`No feature implementation for ${E.method} found. Registration failed.`));const z=E.registerOptions??{};z.documentSelector=z.documentSelector??this._clientOptions.documentSelector;const K={id:E.id,registerOptions:z};try{T.register(K)}catch(B){return Promise.reject(B)}}}async handleUnregistrationRequest(b){for(let E of b.unregisterations){if(this._ignoredRegistrations.has(E.id))continue;const T=this._dynamicFeatures.get(E.method);if(!T)return Promise.reject(new Error(`No feature implementation for ${E.method} found. Unregistration failed.`));T.unregister(E.id)}}async handleApplyWorkspaceEdit(b){const E=b.edit,T=await this.workspaceEditLock.lock(()=>this._p2c.asWorkspaceEdit(E)),z=new Map;t.workspace.textDocuments.forEach(B=>z.set(B.uri.toString(),B));let K=!1;if(E.documentChanges){for(const B of E.documentChanges)if(n.TextDocumentEdit.is(B)&&B.textDocument.version&&B.textDocument.version>=0){const Fe=this._p2c.asUri(B.textDocument.uri).toString(),de=z.get(Fe);if(de&&de.version!==B.textDocument.version){K=!0;break}}}return K?Promise.resolve({applied:!1}):o.asPromise(t.workspace.applyEdit(T).then(B=>({applied:B})))}handleFailedRequest(b,E,T,z,K=!0){if(T instanceof n.ResponseError){if(T.code===n.ErrorCodes.PendingResponseRejected||T.code===n.ErrorCodes.ConnectionInactive)return z;if(T.code===n.LSPErrorCodes.RequestCancelled||T.code===n.LSPErrorCodes.ServerCancelled){if(E!==void 0&&E.isCancellationRequested)return z;throw T.data!==void 0?new u.LSPCancellationError(T.data):new t.CancellationError}else if(T.code===n.LSPErrorCodes.ContentModified){if(Ve.RequestsToCancelOnContentModified.has(b.method)||Ve.CancellableResolveCalls.has(b.method))throw new t.CancellationError;return z}}throw this.error(`Request ${b.method} failed.`,T,K),T}}e.BaseLanguageClient=Ve,Ve.RequestsToCancelOnContentModified=new Set([n.SemanticTokensRequest.method,n.SemanticTokensRangeRequest.method,n.SemanticTokensDeltaRequest.method]),Ve.CancellableResolveCalls=new Set([n.CompletionResolveRequest.method,n.CodeLensResolveRequest.method,n.CodeActionResolveRequest.method,n.InlayHintResolveRequest.method,n.DocumentLinkResolveRequest.method,n.WorkspaceSymbolResolveRequest.method]);class gt{error(b){(0,n.RAL)().console.error(b)}warn(b){(0,n.RAL)().console.warn(b)}info(b){(0,n.RAL)().console.info(b)}log(b){(0,n.RAL)().console.log(b)}}function mt(le,b,E,T,z){const K=new gt,B=(0,n.createProtocolConnection)(le,b,K,z);return B.onError(de=>{E(de[0],de[1],de[2])}),B.onClose(T),{listen:()=>B.listen(),sendRequest:B.sendRequest,onRequest:B.onRequest,hasPendingResponse:B.hasPendingResponse,sendNotification:B.sendNotification,onNotification:B.onNotification,onProgress:B.onProgress,sendProgress:B.sendProgress,trace:(de,Ge,Be)=>{const Ft={sendNotification:!1,traceFormat:n.TraceFormat.Text};return Be===void 0?B.trace(de,Ge,Ft):(o.boolean(Be),B.trace(de,Ge,Be))},initialize:de=>B.sendRequest(n.InitializeRequest.type,de),shutdown:()=>B.sendRequest(n.ShutdownRequest.type,void 0),exit:()=>B.sendNotification(n.ExitNotification.type),end:()=>B.end(),dispose:()=>B.dispose()}}var et;(function(le){function b(E){return[]}le.createAll=b})(et=e.ProposedFeatures||(e.ProposedFeatures={}))}(pr);var ir={};Object.defineProperty(ir,"__esModule",{value:!0}),ir.terminate=void 0;const Qa=Ts.default,gf=Vn.default,pf=process.platform==="win32",mf=process.platform==="darwin",yf=process.platform==="linux";function vf(e,t){if(pf)try{let r={stdio:["pipe","pipe","ignore"]};return t&&(r.cwd=t),Qa.execFileSync("taskkill",["/T","/F","/PID",e.pid.toString()],r),!0}catch{return!1}else if(yf||mf)try{var n=(0,gf.join)(__dirname,"terminateProcess.sh"),i=Qa.spawnSync(n,[e.pid.toString()]);return!i.error}catch{return!1}else return e.kill("SIGKILL"),!0}ir.terminate=vf;var ds={exports:{}};(function(e){e.exports=ge})(ds);const Cf=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var rr=Cf;const _f="2.0.0",Ya=256,wf=Number.MAX_SAFE_INTEGER||9007199254740991,bf=16,Df=Ya-6,Sf=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var fs={MAX_LENGTH:Ya,MAX_SAFE_COMPONENT_LENGTH:bf,MAX_SAFE_BUILD_LENGTH:Df,MAX_SAFE_INTEGER:wf,RELEASE_TYPES:Sf,SEMVER_SPEC_VERSION:_f,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Kn={exports:{}};(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=fs,o=rr;t=e.exports={};const s=t.re=[],a=t.safeRe=[],c=t.src=[],u=t.t={};let p=0;const y="[a-zA-Z0-9-]",f=[["\\s",1],["\\d",r],[y,i]],g=N=>{for(const[j,X]of f)N=N.split(`${j}*`).join(`${j}{0,${X}}`).split(`${j}+`).join(`${j}{1,${X}}`);return N},h=(N,j,X)=>{const G=g(j),S=p++;o(N,S,j),u[N]=S,c[S]=j,s[S]=new RegExp(j,X?"g":void 0),a[S]=new RegExp(G,X?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","\\d+"),h("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${y}*`),h("MAINVERSION",`(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})\\.(${c[u.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})\\.(${c[u.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${c[u.NUMERICIDENTIFIER]}|${c[u.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${c[u.NUMERICIDENTIFIERLOOSE]}|${c[u.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${c[u.PRERELEASEIDENTIFIER]}(?:\\.${c[u.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${c[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[u.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER",`${y}+`),h("BUILD",`(?:\\+(${c[u.BUILDIDENTIFIER]}(?:\\.${c[u.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${c[u.MAINVERSION]}${c[u.PRERELEASE]}?${c[u.BUILD]}?`),h("FULL",`^${c[u.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${c[u.MAINVERSIONLOOSE]}${c[u.PRERELEASELOOSE]}?${c[u.BUILD]}?`),h("LOOSE",`^${c[u.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${c[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${c[u.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:\\.(${c[u.XRANGEIDENTIFIER]})(?:${c[u.PRERELEASE]})?${c[u.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[u.XRANGEIDENTIFIERLOOSE]})(?:${c[u.PRERELEASELOOSE]})?${c[u.BUILD]}?)?)?`),h("XRANGE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${c[u.GTLT]}\\s*${c[u.XRANGEPLAINLOOSE]}$`),h("COERCE",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?(?:$|[^\\d])`),h("COERCERTL",c[u.COERCE],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${c[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${c[u.LONETILDE]}${c[u.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${c[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${c[u.LONECARET]}${c[u.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${c[u.LONECARET]}${c[u.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${c[u.GTLT]}\\s*(${c[u.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${c[u.GTLT]}\\s*(${c[u.LOOSEPLAIN]}|${c[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${c[u.XRANGEPLAIN]})\\s+-\\s+(${c[u.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${c[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[u.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Kn,Kn.exports);const Rf=Object.freeze({loose:!0}),Tf=Object.freeze({}),Pf=e=>e?typeof e!="object"?Rf:e:Tf;var hs=Pf;const Za=/^[0-9]+$/,ec=(e,t)=>{const n=Za.test(e),i=Za.test(t);return n&&i&&(e=+e,t=+t),e===t?0:n&&!i?-1:i&&!n?1:e<t?-1:1},Ef=(e,t)=>ec(t,e);var kf={compareIdentifiers:ec,rcompareIdentifiers:Ef};const or=rr,{MAX_LENGTH:tc,MAX_SAFE_INTEGER:sr}=fs,{safeRe:nc,t:ic}=Kn.exports,Ff=hs,{compareIdentifiers:fn}=kf;class ht{constructor(t,n){if(n=Ff(n),t instanceof ht){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>tc)throw new TypeError(`version is longer than ${tc} characters`);or("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const i=t.trim().match(n.loose?nc[ic.LOOSE]:nc[ic.FULL]);if(!i)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>sr||this.major<0)throw new TypeError("Invalid major version");if(this.minor>sr||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>sr||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(r=>{if(/^[0-9]+$/.test(r)){const o=+r;if(o>=0&&o<sr)return o}return r}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(or("SemVer.compare",this.version,this.options,t),!(t instanceof ht)){if(typeof t=="string"&&t===this.version)return 0;t=new ht(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof ht||(t=new ht(t,this.options)),fn(this.major,t.major)||fn(this.minor,t.minor)||fn(this.patch,t.patch)}comparePre(t){if(t instanceof ht||(t=new ht(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const i=this.prerelease[n],r=t.prerelease[n];if(or("prerelease compare",n,i,r),i===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(i===void 0)return-1;if(i===r)continue;return fn(i,r)}while(++n)}compareBuild(t){t instanceof ht||(t=new ht(t,this.options));let n=0;do{const i=this.build[n],r=t.build[n];if(or("prerelease compare",n,i,r),i===void 0&&r===void 0)return 0;if(r===void 0)return 1;if(i===void 0)return-1;if(i===r)continue;return fn(i,r)}while(++n)}inc(t,n,i){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,i);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,i);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,i),this.inc("pre",n,i);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,i),this.inc("pre",n,i);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const r=Number(i)?1:0;if(!n&&i===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[r];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&i===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(r)}}if(n){let o=[n,r];i===!1&&(o=[n]),fn(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}var ar=ht;const rc=ar,Of=(e,t,n=!1)=>{if(e instanceof rc)return e;try{return new rc(e,t)}catch(i){if(!n)return null;throw i}};var If=Of,gs,oc;function Nf(){return oc||(oc=1,gs=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),gs}var ps,sc;function qf(){if(sc)return ps;sc=1,ps=e,e.Node=r,e.create=e;function e(o){var s=this;if(s instanceof e||(s=new e),s.tail=null,s.head=null,s.length=0,o&&typeof o.forEach=="function")o.forEach(function(u){s.push(u)});else if(arguments.length>0)for(var a=0,c=arguments.length;a<c;a++)s.push(arguments[a]);return s}e.prototype.removeNode=function(o){if(o.list!==this)throw new Error("removing node which does not belong to this list");var s=o.next,a=o.prev;return s&&(s.prev=a),a&&(a.next=s),o===this.head&&(this.head=s),o===this.tail&&(this.tail=a),o.list.length--,o.next=null,o.prev=null,o.list=null,s},e.prototype.unshiftNode=function(o){if(o!==this.head){o.list&&o.list.removeNode(o);var s=this.head;o.list=this,o.next=s,s&&(s.prev=o),this.head=o,this.tail||(this.tail=o),this.length++}},e.prototype.pushNode=function(o){if(o!==this.tail){o.list&&o.list.removeNode(o);var s=this.tail;o.list=this,o.prev=s,s&&(s.next=o),this.tail=o,this.head||(this.head=o),this.length++}},e.prototype.push=function(){for(var o=0,s=arguments.length;o<s;o++)n(this,arguments[o]);return this.length},e.prototype.unshift=function(){for(var o=0,s=arguments.length;o<s;o++)i(this,arguments[o]);return this.length},e.prototype.pop=function(){if(!!this.tail){var o=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,o}},e.prototype.shift=function(){if(!!this.head){var o=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,o}},e.prototype.forEach=function(o,s){s=s||this;for(var a=this.head,c=0;a!==null;c++)o.call(s,a.value,c,this),a=a.next},e.prototype.forEachReverse=function(o,s){s=s||this;for(var a=this.tail,c=this.length-1;a!==null;c--)o.call(s,a.value,c,this),a=a.prev},e.prototype.get=function(o){for(var s=0,a=this.head;a!==null&&s<o;s++)a=a.next;if(s===o&&a!==null)return a.value},e.prototype.getReverse=function(o){for(var s=0,a=this.tail;a!==null&&s<o;s++)a=a.prev;if(s===o&&a!==null)return a.value},e.prototype.map=function(o,s){s=s||this;for(var a=new e,c=this.head;c!==null;)a.push(o.call(s,c.value,this)),c=c.next;return a},e.prototype.mapReverse=function(o,s){s=s||this;for(var a=new e,c=this.tail;c!==null;)a.push(o.call(s,c.value,this)),c=c.prev;return a},e.prototype.reduce=function(o,s){var a,c=this.head;if(arguments.length>1)a=s;else if(this.head)c=this.head.next,a=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var u=0;c!==null;u++)a=o(a,c.value,u),c=c.next;return a},e.prototype.reduceReverse=function(o,s){var a,c=this.tail;if(arguments.length>1)a=s;else if(this.tail)c=this.tail.prev,a=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var u=this.length-1;c!==null;u--)a=o(a,c.value,u),c=c.prev;return a},e.prototype.toArray=function(){for(var o=new Array(this.length),s=0,a=this.head;a!==null;s++)o[s]=a.value,a=a.next;return o},e.prototype.toArrayReverse=function(){for(var o=new Array(this.length),s=0,a=this.tail;a!==null;s++)o[s]=a.value,a=a.prev;return o},e.prototype.slice=function(o,s){s=s||this.length,s<0&&(s+=this.length),o=o||0,o<0&&(o+=this.length);var a=new e;if(s<o||s<0)return a;o<0&&(o=0),s>this.length&&(s=this.length);for(var c=0,u=this.head;u!==null&&c<o;c++)u=u.next;for(;u!==null&&c<s;c++,u=u.next)a.push(u.value);return a},e.prototype.sliceReverse=function(o,s){s=s||this.length,s<0&&(s+=this.length),o=o||0,o<0&&(o+=this.length);var a=new e;if(s<o||s<0)return a;o<0&&(o=0),s>this.length&&(s=this.length);for(var c=this.length,u=this.tail;u!==null&&c>s;c--)u=u.prev;for(;u!==null&&c>o;c--,u=u.prev)a.push(u.value);return a},e.prototype.splice=function(o,s,...a){o>this.length&&(o=this.length-1),o<0&&(o=this.length+o);for(var c=0,u=this.head;u!==null&&c<o;c++)u=u.next;for(var p=[],c=0;u&&c<s;c++)p.push(u.value),u=this.removeNode(u);u===null&&(u=this.tail),u!==this.head&&u!==this.tail&&(u=u.prev);for(var c=0;c<a.length;c++)u=t(this,u,a[c]);return p},e.prototype.reverse=function(){for(var o=this.head,s=this.tail,a=o;a!==null;a=a.prev){var c=a.prev;a.prev=a.next,a.next=c}return this.head=s,this.tail=o,this};function t(o,s,a){var c=s===o.head?new r(a,null,s,o):new r(a,s,s.next,o);return c.next===null&&(o.tail=c),c.prev===null&&(o.head=c),o.length++,c}function n(o,s){o.tail=new r(s,o.tail,null,o),o.head||(o.head=o.tail),o.length++}function i(o,s){o.head=new r(s,null,o.head,o),o.tail||(o.tail=o.head),o.length++}function r(o,s,a,c){if(!(this instanceof r))return new r(o,s,a,c);this.list=c,this.value=o,s?(s.next=this,this.prev=s):this.prev=null,a?(a.prev=this,this.next=a):this.next=null}try{Nf()(e)}catch{}return ps}var ms,ac;function Mf(){if(ac)return ms;ac=1;const e=qf(),t=Symbol("max"),n=Symbol("length"),i=Symbol("lengthCalculator"),r=Symbol("allowStale"),o=Symbol("maxAge"),s=Symbol("dispose"),a=Symbol("noDisposeOnSet"),c=Symbol("lruList"),u=Symbol("cache"),p=Symbol("updateAgeOnGet"),y=()=>1;class f{constructor(C){if(typeof C=="number"&&(C={max:C}),C||(C={}),C.max&&(typeof C.max!="number"||C.max<0))throw new TypeError("max must be a non-negative number");this[t]=C.max||1/0;const M=C.length||y;if(this[i]=typeof M!="function"?y:M,this[r]=C.stale||!1,C.maxAge&&typeof C.maxAge!="number")throw new TypeError("maxAge must be a number");this[o]=C.maxAge||0,this[s]=C.dispose,this[a]=C.noDisposeOnSet||!1,this[p]=C.updateAgeOnGet||!1,this.reset()}set max(C){if(typeof C!="number"||C<0)throw new TypeError("max must be a non-negative number");this[t]=C||1/0,N(this)}get max(){return this[t]}set allowStale(C){this[r]=!!C}get allowStale(){return this[r]}set maxAge(C){if(typeof C!="number")throw new TypeError("maxAge must be a non-negative number");this[o]=C,N(this)}get maxAge(){return this[o]}set lengthCalculator(C){typeof C!="function"&&(C=y),C!==this[i]&&(this[i]=C,this[n]=0,this[c].forEach(M=>{M.length=this[i](M.value,M.key),this[n]+=M.length})),N(this)}get lengthCalculator(){return this[i]}get length(){return this[n]}get itemCount(){return this[c].length}rforEach(C,M){M=M||this;for(let W=this[c].tail;W!==null;){const I=W.prev;G(this,C,W,M),W=I}}forEach(C,M){M=M||this;for(let W=this[c].head;W!==null;){const I=W.next;G(this,C,W,M),W=I}}keys(){return this[c].toArray().map(C=>C.key)}values(){return this[c].toArray().map(C=>C.value)}reset(){this[s]&&this[c]&&this[c].length&&this[c].forEach(C=>this[s](C.key,C.value)),this[u]=new Map,this[c]=new e,this[n]=0}dump(){return this[c].map(C=>h(this,C)?!1:{k:C.key,v:C.value,e:C.now+(C.maxAge||0)}).toArray().filter(C=>C)}dumpLru(){return this[c]}set(C,M,W){if(W=W||this[o],W&&typeof W!="number")throw new TypeError("maxAge must be a number");const I=W?Date.now():0,P=this[i](M,C);if(this[u].has(C)){if(P>this[t])return j(this,this[u].get(C)),!1;const D=this[u].get(C).value;return this[s]&&(this[a]||this[s](C,D.value)),D.now=I,D.maxAge=W,D.value=M,this[n]+=P-D.length,D.length=P,this.get(C),N(this),!0}const L=new X(C,M,P,I,W);return L.length>this[t]?(this[s]&&this[s](C,M),!1):(this[n]+=L.length,this[c].unshift(L),this[u].set(C,this[c].head),N(this),!0)}has(C){if(!this[u].has(C))return!1;const M=this[u].get(C).value;return!h(this,M)}get(C){return g(this,C,!0)}peek(C){return g(this,C,!1)}pop(){const C=this[c].tail;return C?(j(this,C),C.value):null}del(C){j(this,this[u].get(C))}load(C){this.reset();const M=Date.now();for(let W=C.length-1;W>=0;W--){const I=C[W],P=I.e||0;if(P===0)this.set(I.k,I.v);else{const L=P-M;L>0&&this.set(I.k,I.v,L)}}}prune(){this[u].forEach((C,M)=>g(this,M,!1))}}const g=(S,C,M)=>{const W=S[u].get(C);if(W){const I=W.value;if(h(S,I)){if(j(S,W),!S[r])return}else M&&(S[p]&&(W.value.now=Date.now()),S[c].unshiftNode(W));return I.value}},h=(S,C)=>{if(!C||!C.maxAge&&!S[o])return!1;const M=Date.now()-C.now;return C.maxAge?M>C.maxAge:S[o]&&M>S[o]},N=S=>{if(S[n]>S[t])for(let C=S[c].tail;S[n]>S[t]&&C!==null;){const M=C.prev;j(S,C),C=M}},j=(S,C)=>{if(C){const M=C.value;S[s]&&S[s](M.key,M.value),S[n]-=M.length,S[u].delete(M.key),S[c].removeNode(C)}};class X{constructor(C,M,W,I,P){this.key=C,this.value=M,this.length=W,this.now=I,this.maxAge=P||0}}const G=(S,C,M,W)=>{let I=M.value;h(S,I)&&(j(S,M),S[r]||(I=void 0)),I&&C.call(W,I.value,I.key,S)};return ms=f,ms}const cc=ar,Lf=(e,t,n)=>new cc(e,n).compare(new cc(t,n));var hn=Lf;const $f=hn,Af=(e,t,n)=>$f(e,t,n)===0;var jf=Af;const Hf=hn,Wf=(e,t,n)=>Hf(e,t,n)!==0;var Uf=Wf;const xf=hn,Kf=(e,t,n)=>xf(e,t,n)>0;var zf=Kf;const Gf=hn,Bf=(e,t,n)=>Gf(e,t,n)>=0;var Vf=Bf;const Xf=hn,Jf=(e,t,n)=>Xf(e,t,n)<0;var Qf=Jf;const Yf=hn,Zf=(e,t,n)=>Yf(e,t,n)<=0;var eh=Zf;const th=jf,nh=Uf,ih=zf,rh=Vf,oh=Qf,sh=eh,ah=(e,t,n,i)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return th(e,n,i);case"!=":return nh(e,n,i);case">":return ih(e,n,i);case">=":return rh(e,n,i);case"<":return oh(e,n,i);case"<=":return sh(e,n,i);default:throw new TypeError(`Invalid operator: ${t}`)}};var ch=ah,ys,uc;function uh(){if(uc)return ys;uc=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(p,y){if(y=n(y),p instanceof t){if(p.loose===!!y.loose)return p;p=p.value}p=p.trim().split(/\s+/).join(" "),s("comparator",p,y),this.options=y,this.loose=!!y.loose,this.parse(p),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(p){const y=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],f=p.match(y);if(!f)throw new TypeError(`Invalid comparator: ${p}`);this.operator=f[1]!==void 0?f[1]:"",this.operator==="="&&(this.operator=""),f[2]?this.semver=new a(f[2],this.options.loose):this.semver=e}toString(){return this.value}test(p){if(s("Comparator.test",p,this.options.loose),this.semver===e||p===e)return!0;if(typeof p=="string")try{p=new a(p,this.options)}catch{return!1}return o(p,this.operator,this.semver,this.options)}intersects(p,y){if(!(p instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(p.value,y).test(this.value):p.operator===""?p.value===""?!0:new c(this.value,y).test(p.semver):(y=n(y),y.includePrerelease&&(this.value==="<0.0.0-0"||p.value==="<0.0.0-0")||!y.includePrerelease&&(this.value.startsWith("<0.0.0")||p.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&p.operator.startsWith(">")||this.operator.startsWith("<")&&p.operator.startsWith("<")||this.semver.version===p.semver.version&&this.operator.includes("=")&&p.operator.includes("=")||o(this.semver,"<",p.semver,y)&&this.operator.startsWith(">")&&p.operator.startsWith("<")||o(this.semver,">",p.semver,y)&&this.operator.startsWith("<")&&p.operator.startsWith(">")))}}ys=t;const n=hs,{safeRe:i,t:r}=Kn.exports,o=ch,s=rr,a=ar,c=dc();return ys}var vs,lc;function dc(){if(lc)return vs;lc=1;class e{constructor(R,k){if(k=i(k),R instanceof e)return R.loose===!!k.loose&&R.includePrerelease===!!k.includePrerelease?R:new e(R.raw,k);if(R instanceof r)return this.raw=R.value,this.set=[[R]],this.format(),this;if(this.options=k,this.loose=!!k.loose,this.includePrerelease=!!k.includePrerelease,this.raw=R.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(F=>this.parseRange(F.trim())).filter(F=>F.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const F=this.set[0];if(this.set=this.set.filter(q=>!h(q[0])),this.set.length===0)this.set=[F];else if(this.set.length>1){for(const q of this.set)if(q.length===1&&N(q[0])){this.set=[q];break}}}this.format()}format(){return this.range=this.set.map(R=>R.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(R){const F=((this.options.includePrerelease&&f)|(this.options.loose&&g))+":"+R,q=n.get(F);if(q)return q;const $=this.options.loose,x=$?a[c.HYPHENRANGELOOSE]:a[c.HYPHENRANGE];R=R.replace(x,D(this.options.includePrerelease)),o("hyphen replace",R),R=R.replace(a[c.COMPARATORTRIM],u),o("comparator trim",R),R=R.replace(a[c.TILDETRIM],p),o("tilde trim",R),R=R.replace(a[c.CARETTRIM],y),o("caret trim",R);let Z=R.split(" ").map(ne=>X(ne,this.options)).join(" ").split(/\s+/).map(ne=>V(ne,this.options));$&&(Z=Z.filter(ne=>(o("loose invalid filter",ne,this.options),!!ne.match(a[c.COMPARATORLOOSE])))),o("range list",Z);const ee=new Map,re=Z.map(ne=>new r(ne,this.options));for(const ne of re){if(h(ne))return[ne];ee.set(ne.value,ne)}ee.size>1&&ee.has("")&&ee.delete("");const ae=[...ee.values()];return n.set(F,ae),ae}intersects(R,k){if(!(R instanceof e))throw new TypeError("a Range is required");return this.set.some(F=>j(F,k)&&R.set.some(q=>j(q,k)&&F.every($=>q.every(x=>$.intersects(x,k)))))}test(R){if(!R)return!1;if(typeof R=="string")try{R=new s(R,this.options)}catch{return!1}for(let k=0;k<this.set.length;k++)if(d(this.set[k],R,this.options))return!0;return!1}}vs=e;const t=Mf(),n=new t({max:1e3}),i=hs,r=uh(),o=rr,s=ar,{safeRe:a,t:c,comparatorTrimReplace:u,tildeTrimReplace:p,caretTrimReplace:y}=Kn.exports,{FLAG_INCLUDE_PRERELEASE:f,FLAG_LOOSE:g}=fs,h=v=>v.value==="<0.0.0-0",N=v=>v.value==="",j=(v,R)=>{let k=!0;const F=v.slice();let q=F.pop();for(;k&&F.length;)k=F.every($=>q.intersects($,R)),q=F.pop();return k},X=(v,R)=>(o("comp",v,R),v=M(v,R),o("caret",v),v=S(v,R),o("tildes",v),v=I(v,R),o("xrange",v),v=L(v,R),o("stars",v),v),G=v=>!v||v.toLowerCase()==="x"||v==="*",S=(v,R)=>v.trim().split(/\s+/).map(k=>C(k,R)).join(" "),C=(v,R)=>{const k=R.loose?a[c.TILDELOOSE]:a[c.TILDE];return v.replace(k,(F,q,$,x,Z)=>{o("tilde",v,F,q,$,x,Z);let ee;return G(q)?ee="":G($)?ee=`>=${q}.0.0 <${+q+1}.0.0-0`:G(x)?ee=`>=${q}.${$}.0 <${q}.${+$+1}.0-0`:Z?(o("replaceTilde pr",Z),ee=`>=${q}.${$}.${x}-${Z} <${q}.${+$+1}.0-0`):ee=`>=${q}.${$}.${x} <${q}.${+$+1}.0-0`,o("tilde return",ee),ee})},M=(v,R)=>v.trim().split(/\s+/).map(k=>W(k,R)).join(" "),W=(v,R)=>{o("caret",v,R);const k=R.loose?a[c.CARETLOOSE]:a[c.CARET],F=R.includePrerelease?"-0":"";return v.replace(k,(q,$,x,Z,ee)=>{o("caret",v,q,$,x,Z,ee);let re;return G($)?re="":G(x)?re=`>=${$}.0.0${F} <${+$+1}.0.0-0`:G(Z)?$==="0"?re=`>=${$}.${x}.0${F} <${$}.${+x+1}.0-0`:re=`>=${$}.${x}.0${F} <${+$+1}.0.0-0`:ee?(o("replaceCaret pr",ee),$==="0"?x==="0"?re=`>=${$}.${x}.${Z}-${ee} <${$}.${x}.${+Z+1}-0`:re=`>=${$}.${x}.${Z}-${ee} <${$}.${+x+1}.0-0`:re=`>=${$}.${x}.${Z}-${ee} <${+$+1}.0.0-0`):(o("no pr"),$==="0"?x==="0"?re=`>=${$}.${x}.${Z}${F} <${$}.${x}.${+Z+1}-0`:re=`>=${$}.${x}.${Z}${F} <${$}.${+x+1}.0-0`:re=`>=${$}.${x}.${Z} <${+$+1}.0.0-0`),o("caret return",re),re})},I=(v,R)=>(o("replaceXRanges",v,R),v.split(/\s+/).map(k=>P(k,R)).join(" ")),P=(v,R)=>{v=v.trim();const k=R.loose?a[c.XRANGELOOSE]:a[c.XRANGE];return v.replace(k,(F,q,$,x,Z,ee)=>{o("xRange",v,F,q,$,x,Z,ee);const re=G($),ae=re||G(x),ne=ae||G(Z),te=ne;return q==="="&&te&&(q=""),ee=R.includePrerelease?"-0":"",re?q===">"||q==="<"?F="<0.0.0-0":F="*":q&&te?(ae&&(x=0),Z=0,q===">"?(q=">=",ae?($=+$+1,x=0,Z=0):(x=+x+1,Z=0)):q==="<="&&(q="<",ae?$=+$+1:x=+x+1),q==="<"&&(ee="-0"),F=`${q+$}.${x}.${Z}${ee}`):ae?F=`>=${$}.0.0${ee} <${+$+1}.0.0-0`:ne&&(F=`>=${$}.${x}.0${ee} <${$}.${+x+1}.0-0`),o("xRange return",F),F})},L=(v,R)=>(o("replaceStars",v,R),v.trim().replace(a[c.STAR],"")),V=(v,R)=>(o("replaceGTE0",v,R),v.trim().replace(a[R.includePrerelease?c.GTE0PRE:c.GTE0],"")),D=v=>(R,k,F,q,$,x,Z,ee,re,ae,ne,te,ce)=>(G(F)?k="":G(q)?k=`>=${F}.0.0${v?"-0":""}`:G($)?k=`>=${F}.${q}.0${v?"-0":""}`:x?k=`>=${k}`:k=`>=${k}${v?"-0":""}`,G(re)?ee="":G(ae)?ee=`<${+re+1}.0.0-0`:G(ne)?ee=`<${re}.${+ae+1}.0-0`:te?ee=`<=${re}.${ae}.${ne}-${te}`:v?ee=`<${re}.${ae}.${+ne+1}-0`:ee=`<=${ee}`,`${k} ${ee}`.trim()),d=(v,R,k)=>{for(let F=0;F<v.length;F++)if(!v[F].test(R))return!1;if(R.prerelease.length&&!k.includePrerelease){for(let F=0;F<v.length;F++)if(o(v[F].semver),v[F].semver!==r.ANY&&v[F].semver.prerelease.length>0){const q=v[F].semver;if(q.major===R.major&&q.minor===R.minor&&q.patch===R.patch)return!0}return!1}return!0};return vs}const lh=dc(),dh=(e,t,n)=>{try{t=new lh(t,n)}catch{return!1}return t.test(e)};var fh=dh,fc={};(function(e){var t=He.commonjsGlobal&&He.commonjsGlobal.__createBinding||(Object.create?function(r,o,s,a){a===void 0&&(a=s);var c=Object.getOwnPropertyDescriptor(o,s);(!c||("get"in c?!o.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return o[s]}}),Object.defineProperty(r,a,c)}:function(r,o,s,a){a===void 0&&(a=s),r[a]=o[s]}),n=He.commonjsGlobal&&He.commonjsGlobal.__exportStar||function(r,o){for(var s in r)s!=="default"&&!Object.prototype.hasOwnProperty.call(o,s)&&t(o,r,s)};Object.defineProperty(e,"__esModule",{value:!0}),e.DiagnosticPullMode=e.vsdiag=void 0,n(ge,e),n(Te,e);var i=So;Object.defineProperty(e,"vsdiag",{enumerable:!0,get:function(){return i.vsdiag}}),Object.defineProperty(e,"DiagnosticPullMode",{enumerable:!0,get:function(){return i.DiagnosticPullMode}}),n(pr,e)})(fc),function(e){var t=He.commonjsGlobal&&He.commonjsGlobal.__createBinding||(Object.create?function(I,P,L,V){V===void 0&&(V=L);var D=Object.getOwnPropertyDescriptor(P,L);(!D||("get"in D?!P.__esModule:D.writable||D.configurable))&&(D={enumerable:!0,get:function(){return P[L]}}),Object.defineProperty(I,V,D)}:function(I,P,L,V){V===void 0&&(V=L),I[V]=P[L]}),n=He.commonjsGlobal&&He.commonjsGlobal.__exportStar||function(I,P){for(var L in I)L!=="default"&&!Object.prototype.hasOwnProperty.call(P,L)&&t(P,I,L)};Object.defineProperty(e,"__esModule",{value:!0}),e.SettingMonitor=e.LanguageClient=e.TransportKind=void 0;const i=Ts.default,r=fr.default,o=Vn.default,s=he.default,a=Pe,c=pr,u=ir,p=ds.exports,y=If,f=fh;n(ds.exports,e),n(fc,e);const g="^1.67.0";var h;(function(I){I[I.stdio=0]="stdio",I[I.ipc=1]="ipc",I[I.pipe=2]="pipe",I[I.socket=3]="socket"})(h=e.TransportKind||(e.TransportKind={}));var N;(function(I){function P(L){const V=L;return V&&V.kind===h.socket&&a.number(V.port)}I.isSocket=P})(N||(N={}));var j;(function(I){function P(L){return a.string(L.command)}I.is=P})(j||(j={}));var X;(function(I){function P(L){return a.string(L.module)}I.is=P})(X||(X={}));var G;(function(I){function P(L){let V=L;return V&&V.writer!==void 0&&V.reader!==void 0}I.is=P})(G||(G={}));var S;(function(I){function P(L){let V=L;return V&&V.process!==void 0&&typeof V.detached=="boolean"}I.is=P})(S||(S={}));class C extends c.BaseLanguageClient{constructor(P,L,V,D,d){let v,R,k,F,q;a.string(L)?(v=P,R=L,k=V,F=D,q=!!d):(v=P.toLowerCase(),R=P,k=L,F=V,q=D),q===void 0&&(q=!1),super(v,R,F),this._serverOptions=k,this._forceDebug=q,this._isInDebugMode=q;try{this.checkVersion()}catch($){throw a.string($.message)&&this.outputChannel.appendLine($.message),$}}checkVersion(){const P=y(s.version);if(!P)throw new Error(`No valid VS Code version detected. Version string is: ${s.version}`);if(P.prerelease&&P.prerelease.length>0&&(P.prerelease=[]),!f(P,g))throw new Error(`The language client requires VS Code version ${g} but received version ${s.version}`)}get isInDebugMode(){return this._isInDebugMode}async restart(){await this.stop(),this.isInDebugMode?(await new Promise(P=>setTimeout(P,1e3)),await this.start()):await this.start()}stop(P=2e3){return super.stop(P).finally(()=>{if(this._serverProcess){const L=this._serverProcess;this._serverProcess=void 0,(this._isDetached===void 0||!this._isDetached)&&this.checkProcessDied(L),this._isDetached=void 0}})}checkProcessDied(P){!P||P.pid===void 0||setTimeout(()=>{try{P.pid!==void 0&&(process.kill(P.pid,0),(0,u.terminate)(P))}catch{}},2e3)}handleConnectionClosed(){return this._serverProcess=void 0,super.handleConnectionClosed()}fillInitializeParams(P){super.fillInitializeParams(P),P.processId===null&&(P.processId=process.pid)}createMessageTransports(P){function L(q,$){if(!q&&!$)return;const x=Object.create(null);return Object.keys(process.env).forEach(Z=>x[Z]=process.env[Z]),$&&(x.ELECTRON_RUN_AS_NODE="1",x.ELECTRON_NO_ASAR="1"),q&&Object.keys(q).forEach(Z=>x[Z]=q[Z]),x}const V=["--debug=","--debug-brk=","--inspect=","--inspect-brk="],D=["--debug","--debug-brk","--inspect","--inspect-brk"];function d(){let q=process.execArgv;return q?q.some($=>V.some(x=>$.startsWith(x))||D.some(x=>$===x)):!1}function v(q){if(q.stdin===null||q.stdout===null||q.stderr===null)throw new Error("Process created without stdio streams")}const R=this._serverOptions;if(a.func(R))return R().then(q=>{if(c.MessageTransports.is(q))return this._isDetached=!!q.detached,q;if(G.is(q))return this._isDetached=!!q.detached,{reader:new p.StreamMessageReader(q.reader),writer:new p.StreamMessageWriter(q.writer)};{let $;return S.is(q)?($=q.process,this._isDetached=q.detached):($=q,this._isDetached=!1),$.stderr.on("data",x=>this.outputChannel.append(a.string(x)?x:x.toString(P))),{reader:new p.StreamMessageReader($.stdout),writer:new p.StreamMessageWriter($.stdin)}}});let k,F=R;return F.run||F.debug?this._forceDebug||d()?(k=F.debug,this._isInDebugMode=!0):(k=F.run,this._isInDebugMode=!1):k=R,this._getServerWorkingDir(k.options).then(q=>{if(X.is(k)&&k.module){let $=k,x=$.transport||h.stdio;if($.runtime){const Z=[],ee=$.options??Object.create(null);ee.execArgv&&ee.execArgv.forEach(te=>Z.push(te)),Z.push($.module),$.args&&$.args.forEach(te=>Z.push(te));const re=Object.create(null);re.cwd=q,re.env=L(ee.env,!1);const ae=this._getRuntimePath($.runtime,q);let ne;if(x===h.ipc?(re.stdio=[null,null,null,"ipc"],Z.push("--node-ipc")):x===h.stdio?Z.push("--stdio"):x===h.pipe?(ne=(0,p.generateRandomPipeName)(),Z.push(`--pipe=${ne}`)):N.isSocket(x)&&Z.push(`--socket=${x.port}`),Z.push(`--clientProcessId=${process.pid.toString()}`),x===h.ipc||x===h.stdio){const te=i.spawn(ae,Z,re);return!te||!te.pid?W(te,`Launching server using runtime ${ae} failed.`):(this._serverProcess=te,te.stderr.on("data",ce=>this.outputChannel.append(a.string(ce)?ce:ce.toString(P))),x===h.ipc?(te.stdout.on("data",ce=>this.outputChannel.append(a.string(ce)?ce:ce.toString(P))),Promise.resolve({reader:new p.IPCMessageReader(te),writer:new p.IPCMessageWriter(te)})):Promise.resolve({reader:new p.StreamMessageReader(te.stdout),writer:new p.StreamMessageWriter(te.stdin)}))}else{if(x===h.pipe)return(0,p.createClientPipeTransport)(ne).then(te=>{const ce=i.spawn(ae,Z,re);return!ce||!ce.pid?W(ce,`Launching server using runtime ${ae} failed.`):(this._serverProcess=ce,ce.stderr.on("data",se=>this.outputChannel.append(a.string(se)?se:se.toString(P))),ce.stdout.on("data",se=>this.outputChannel.append(a.string(se)?se:se.toString(P))),te.onConnected().then(se=>({reader:se[0],writer:se[1]})))});if(N.isSocket(x))return(0,p.createClientSocketTransport)(x.port).then(te=>{const ce=i.spawn(ae,Z,re);return!ce||!ce.pid?W(ce,`Launching server using runtime ${ae} failed.`):(this._serverProcess=ce,ce.stderr.on("data",se=>this.outputChannel.append(a.string(se)?se:se.toString(P))),ce.stdout.on("data",se=>this.outputChannel.append(a.string(se)?se:se.toString(P))),te.onConnected().then(se=>({reader:se[0],writer:se[1]})))})}}else{let Z;return new Promise((ee,re)=>{const ae=($.args&&$.args.slice())??[];x===h.ipc?ae.push("--node-ipc"):x===h.stdio?ae.push("--stdio"):x===h.pipe?(Z=(0,p.generateRandomPipeName)(),ae.push(`--pipe=${Z}`)):N.isSocket(x)&&ae.push(`--socket=${x.port}`),ae.push(`--clientProcessId=${process.pid.toString()}`);const ne=$.options??Object.create(null);if(ne.env=L(ne.env,!0),ne.execArgv=ne.execArgv||[],ne.cwd=q,ne.silent=!0,x===h.ipc||x===h.stdio){const te=i.fork($.module,ae||[],ne);v(te),this._serverProcess=te,te.stderr.on("data",ce=>this.outputChannel.append(a.string(ce)?ce:ce.toString(P))),x===h.ipc?(te.stdout.on("data",ce=>this.outputChannel.append(a.string(ce)?ce:ce.toString(P))),ee({reader:new p.IPCMessageReader(this._serverProcess),writer:new p.IPCMessageWriter(this._serverProcess)})):ee({reader:new p.StreamMessageReader(te.stdout),writer:new p.StreamMessageWriter(te.stdin)})}else x===h.pipe?(0,p.createClientPipeTransport)(Z).then(te=>{const ce=i.fork($.module,ae||[],ne);v(ce),this._serverProcess=ce,ce.stderr.on("data",se=>this.outputChannel.append(a.string(se)?se:se.toString(P))),ce.stdout.on("data",se=>this.outputChannel.append(a.string(se)?se:se.toString(P))),te.onConnected().then(se=>{ee({reader:se[0],writer:se[1]})},re)},re):N.isSocket(x)&&(0,p.createClientSocketTransport)(x.port).then(te=>{const ce=i.fork($.module,ae||[],ne);v(ce),this._serverProcess=ce,ce.stderr.on("data",se=>this.outputChannel.append(a.string(se)?se:se.toString(P))),ce.stdout.on("data",se=>this.outputChannel.append(a.string(se)?se:se.toString(P))),te.onConnected().then(se=>{ee({reader:se[0],writer:se[1]})},re)},re)})}}else if(j.is(k)&&k.command){const $=k,x=k.args!==void 0?k.args.slice(0):[];let Z;const ee=k.transport;if(ee===h.stdio)x.push("--stdio");else if(ee===h.pipe)Z=(0,p.generateRandomPipeName)(),x.push(`--pipe=${Z}`);else if(N.isSocket(ee))x.push(`--socket=${ee.port}`);else if(ee===h.ipc)throw new Error("Transport kind ipc is not support for command executable");const re=Object.assign({},$.options);if(re.cwd=re.cwd||q,ee===void 0||ee===h.stdio){const ae=i.spawn($.command,x,re);return!ae||!ae.pid?W(ae,`Launching server using command ${$.command} failed.`):(ae.stderr.on("data",ne=>this.outputChannel.append(a.string(ne)?ne:ne.toString(P))),this._serverProcess=ae,this._isDetached=!!re.detached,Promise.resolve({reader:new p.StreamMessageReader(ae.stdout),writer:new p.StreamMessageWriter(ae.stdin)}))}else{if(ee===h.pipe)return(0,p.createClientPipeTransport)(Z).then(ae=>{const ne=i.spawn($.command,x,re);return!ne||!ne.pid?W(ne,`Launching server using command ${$.command} failed.`):(this._serverProcess=ne,this._isDetached=!!re.detached,ne.stderr.on("data",te=>this.outputChannel.append(a.string(te)?te:te.toString(P))),ne.stdout.on("data",te=>this.outputChannel.append(a.string(te)?te:te.toString(P))),ae.onConnected().then(te=>({reader:te[0],writer:te[1]})))});if(N.isSocket(ee))return(0,p.createClientSocketTransport)(ee.port).then(ae=>{const ne=i.spawn($.command,x,re);return!ne||!ne.pid?W(ne,`Launching server using command ${$.command} failed.`):(this._serverProcess=ne,this._isDetached=!!re.detached,ne.stderr.on("data",te=>this.outputChannel.append(a.string(te)?te:te.toString(P))),ne.stdout.on("data",te=>this.outputChannel.append(a.string(te)?te:te.toString(P))),ae.onConnected().then(te=>({reader:te[0],writer:te[1]})))})}}return Promise.reject(new Error("Unsupported server configuration "+JSON.stringify(R,null,4)))})}_getRuntimePath(P,L){if(o.isAbsolute(P))return P;const V=this._mainGetRootPath();if(V!==void 0){const D=o.join(V,P);if(r.existsSync(D))return D}if(L!==void 0){const D=o.join(L,P);if(r.existsSync(D))return D}return P}_mainGetRootPath(){let P=s.workspace.workspaceFolders;if(!P||P.length===0)return;let L=P[0];if(L.uri.scheme==="file")return L.uri.fsPath}_getServerWorkingDir(P){let L=P&&P.cwd;return L||(L=this.clientOptions.workspaceFolder?this.clientOptions.workspaceFolder.uri.fsPath:this._mainGetRootPath()),L?new Promise(V=>{r.lstat(L,(D,d)=>{V(!D&&d.isDirectory()?L:void 0)})}):Promise.resolve(void 0)}}e.LanguageClient=C;class M{constructor(P,L){this._client=P,this._setting=L,this._listeners=[]}start(){return s.workspace.onDidChangeConfiguration(this.onDidChangeConfiguration,this,this._listeners),this.onDidChangeConfiguration(),new s.Disposable(()=>{this._client.needsStop()&&this._client.stop()})}onDidChangeConfiguration(){let P=this._setting.indexOf("."),L=P>=0?this._setting.substr(0,P):this._setting,V=P>=0?this._setting.substr(P+1):void 0,D=V?s.workspace.getConfiguration(L).get(V,!1):s.workspace.getConfiguration(L);D&&this._client.needsStart()?this._client.start().catch(d=>this._client.error("Start failed after configuration change",d,"force")):!D&&this._client.needsStop()&&this._client.stop().catch(d=>this._client.error("Stop failed after configuration change",d,"force"))}}e.SettingMonitor=M;function W(I,P){return I===null?Promise.reject(P):new Promise((L,V)=>{I.on("error",D=>{V(`${P} ${D}`)}),setImmediate(()=>V(P))})}}(Ps),function(e){e.exports=Ps}(gr);var Cs,hc;function hh(){if(hc)return Cs;hc=1,Cs=i,i.sync=r;var e=fr.default;function t(o,s){var a=s.pathExt!==void 0?s.pathExt:process.env.PATHEXT;if(!a||(a=a.split(";"),a.indexOf("")!==-1))return!0;for(var c=0;c<a.length;c++){var u=a[c].toLowerCase();if(u&&o.substr(-u.length).toLowerCase()===u)return!0}return!1}function n(o,s,a){return!o.isSymbolicLink()&&!o.isFile()?!1:t(s,a)}function i(o,s,a){e.stat(o,function(c,u){a(c,c?!1:n(u,o,s))})}function r(o,s){return n(e.statSync(o),o,s)}return Cs}var _s,gc;function gh(){if(gc)return _s;gc=1,_s=t,t.sync=n;var e=fr.default;function t(o,s,a){e.stat(o,function(c,u){a(c,c?!1:i(u,s))})}function n(o,s){return i(e.statSync(o),s)}function i(o,s){return o.isFile()&&r(o,s)}function r(o,s){var a=o.mode,c=o.uid,u=o.gid,p=s.uid!==void 0?s.uid:process.getuid&&process.getuid(),y=s.gid!==void 0?s.gid:process.getgid&&process.getgid(),f=parseInt("100",8),g=parseInt("010",8),h=parseInt("001",8),N=f|g,j=a&h||a&g&&u===y||a&f&&c===p||a&N&&p===0;return j}return _s}var cr;process.platform==="win32"||He.commonjsGlobal.TESTING_WINDOWS?cr=hh():cr=gh();var ph=ws;ws.sync=mh;function ws(e,t,n){if(typeof t=="function"&&(n=t,t={}),!n){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(i,r){ws(e,t||{},function(o,s){o?r(o):i(s)})})}cr(e,t||{},function(i,r){i&&(i.code==="EACCES"||t&&t.ignoreErrors)&&(i=null,r=!1),n(i,r)})}function mh(e,t){try{return cr.sync(e,t||{})}catch(n){if(t&&t.ignoreErrors||n.code==="EACCES")return!1;throw n}}const gn=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",pc=Vn.default,yh=gn?";":":",mc=ph,yc=e=>Object.assign(new Error(`not found: ${e}`),{code:"ENOENT"}),vc=(e,t)=>{const n=t.colon||yh,i=e.match(/\//)||gn&&e.match(/\\/)?[""]:[...gn?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(n)],r=gn?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=gn?r.split(n):[""];return gn&&e.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:i,pathExt:o,pathExtExe:r}},Cc=(e,t,n)=>{typeof t=="function"&&(n=t,t={}),t||(t={});const{pathEnv:i,pathExt:r,pathExtExe:o}=vc(e,t),s=[],a=u=>new Promise((p,y)=>{if(u===i.length)return t.all&&s.length?p(s):y(yc(e));const f=i[u],g=/^".*"$/.test(f)?f.slice(1,-1):f,h=pc.join(g,e),N=!g&&/^\.[\\\/]/.test(e)?e.slice(0,2)+h:h;p(c(N,u,0))}),c=(u,p,y)=>new Promise((f,g)=>{if(y===r.length)return f(a(p+1));const h=r[y];mc(u+h,{pathExt:o},(N,j)=>{if(!N&&j)if(t.all)s.push(u+h);else return f(u+h);return f(c(u,p,y+1))})});return n?a(0).then(u=>n(null,u),n):a(0)},vh=(e,t)=>{t=t||{};const{pathEnv:n,pathExt:i,pathExtExe:r}=vc(e,t),o=[];for(let s=0;s<n.length;s++){const a=n[s],c=/^".*"$/.test(a)?a.slice(1,-1):a,u=pc.join(c,e),p=!c&&/^\.[\\\/]/.test(e)?e.slice(0,2)+u:u;for(let y=0;y<i.length;y++){const f=p+i[y];try{if(mc.sync(f,{pathExt:r}))if(t.all)o.push(f);else return f}catch{}}}if(t.all&&o.length)return o;if(t.nothrow)return null;throw yc(e)};var Ch=Cc;Cc.sync=vh;var _h=Ch;async function wh(e){return console.log(!1),await bh(e)}async function bh(e){var t,n,i;const r=Jt(),o=!!ve.workspace.getConfiguration().get("evenBetterToml.taplo.bundled");let s;if(o){const a={module:ve.Uri.joinPath(e.extensionUri,"dist/server.js").fsPath,transport:gr.exports.TransportKind.ipc,options:{env:(t=ve.workspace.getConfiguration().get("evenBetterToml.taplo.environment"))!=null?t:void 0}};s={run:a,debug:a}}else{const a=(n=ve.workspace.getConfiguration().get("evenBetterToml.taplo.path"))!=null?n:_h.sync("taplo",{nothrow:!0});if(typeof a!="string")throw r.appendLine("failed to locate Taplo LSP"),new Error("failed to locate Taplo LSP");let c=ve.workspace.getConfiguration().get("evenBetterToml.taplo.extraArgs");Array.isArray(c)||(c=[]);const u=c.filter(y=>typeof y=="string"),p={command:a,args:["lsp","stdio",...u],options:{env:(i=ve.workspace.getConfiguration().get("evenBetterToml.taplo.environment"))!=null?i:void 0}};s={run:p,debug:p}}return new gr.exports.LanguageClient("evenBetterToml","Even Better TOML LSP",s,await Dh(e))}async function Dh(e){return await ve.workspace.fs.createDirectory(e.globalStorageUri),{documentSelector:[{scheme:"file",language:"toml"},{scheme:"file",language:"cargoLock"}],initializationOptions:{configurationSection:"evenBetterToml",cachePath:e.globalStorageUri.fsPath}}}function Sh(e,t){var n,i;for(const r of ve.extensions.all){const o=(i=(n=r.packageJSON)==null?void 0:n.contributes)==null?void 0:i.tomlValidation;if(Array.isArray(o))for(const s of o){if(typeof s!="object")continue;const a=s.url;if(typeof a!="string")continue;let c=s.fileMatch,u=s.regexMatch;Array.isArray(c)||(c=[c]);for(let p of c)typeof p=="string"&&(p.startsWith("/")||(p=`/${p}`),t.sendNotification("taplo/associateSchema",{schemaUri:a,priority:10,rule:{glob:`**${p}`},meta:{source:"extension",extensionId:r.id}}));Array.isArray(u)||(u=[u]);for(const p of u)typeof p=="string"&&t.sendNotification("taplo/associateSchema",{schemaUri:a,priority:10,rule:{regex:p},meta:{source:"extension",extensionId:r.id}})}}}async function Rh(e){var t;const n=ve.window.createStatusBarItem(ve.StatusBarAlignment.Right,0);n.text="no schema selected",n.tooltip="TOML Schema",n.command="evenBetterToml.selectSchema";const i=await wh(e);await i.start(),((t=ve.window.activeTextEditor)==null?void 0:t.document.languageId)==="toml"&&n.show(),Ac(e,i),Sh(e,i),e.subscriptions.push(Jt(),n,i.onNotification("taplo/messageWithOutput",async r=>Nc(r,i)),ve.window.onDidChangeActiveTextEditor(r=>{r?.document.languageId==="toml"?n.show():n.hide()}),i.onNotification("taplo/didChangeSchemaAssociation",async r=>{var o,s,a,c;const u=(o=ve.window.activeTextEditor)==null?void 0:o.document.uri.toString();!u||r.documentUri===u&&(n.text=(c=(a=(s=r.meta)==null?void 0:s.name)!=null?a:r.schemaUri)!=null?c:"no schema selected")}))}exports.activate=Rh;
