(()=>{"use strict";const u=e=>{var r=e[0]/255,t=e[1]/255,a=e[2]/255,o=Math.min(r,t,a),n=Math.max(r,t,a);let d,l,s=(n+o)/2;if(n===o)d=l=0;else{var i=n-o;switch(l=.5<s?i/(2-n-o):i/(n+o),n){case r:d=(t-a)/i+(t<a?6:0);break;case t:d=(a-r)/i+2;break;case a:d=(r-t)/i+4}d/=6}return 3===e.length?[Math.round(360*d),Math.round(100*l),Math.round(100*s)]:[Math.round(360*d),Math.round(100*l),Math.round(100*s),e[3]]},ue=e=>{var r,t=e[0]/360,a=e[1]/100,o=e[2]/100;let n=0,d=0,l=0;return 0==a?n=d=l=o:(r=(e,r,t)=>(t<0&&(t+=1),1<t&&--t,t<1/6?e+6*(r-e)*t:t<.5?r:t<2/3?e+(r-e)*(2/3-t)*6:e),a=2*o-(o=o<.5?o*(1+a):o+a-o*a),n=r(a,o,t+1/3),d=r(a,o,t),l=r(a,o,t-1/3)),3===e.length?[Math.round(255*n),Math.round(255*d),Math.round(255*l)]:[Math.round(255*n),Math.round(255*d),Math.round(255*l),e[3]]},_=e=>{const r=e.replace(/\s/g,"").split(","),t=parseInt(r[0].substr(r[0].indexOf("(")+1,r[0].length)),a=parseInt(r[1]),o=parseInt(r[2]);return 4===r.length?[t,a,o,parseFloat(r[3].slice(0,-1))]:[t,a,o]},_e=(e,r)=>"hsl"===r?3===e.length?r+"("+e[0]+", "+e[1]+"%, "+e[2]+"%)":r+"a("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")":3===e.length?r+"("+e[0]+", "+e[1]+", "+e[2]+")":r+"a("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")",he=e=>{var r=e.slice(e.indexOf("(",0)+1,e.lastIndexOf(")")).split(","),e=(256|r[0]).toString(16).slice(1)+(256|r[1]).toString(16).slice(1)+(256|r[2]).toString(16).slice(1);return 3===r.length?"#"+e:"#"+e+(Math.round(255*r[3])+65536).toString(16).substr(-2)},c=(e,r)=>{4===e.length?e=we(e,36):5===e.length&&(e=we(e,48));var t=parseInt(e.substring(1,3),16),a=parseInt(e.substring(3,5),16),o=parseInt(e.substring(5,7),16);let n=!1;return 9===e.length&&(n=h(e)),!0===r?!1===n?"rgb("+t+", "+a+", "+o+")":"rgba("+t+", "+a+", "+o+", "+n+")":!1===n?[t,a,o]:[t,a,o,n]},h=e=>parseFloat((parseInt(e.slice(-2),16)/255).toFixed(2)),fe=(e,r)=>0===r?e+"00":e+Math.round(255*Math.min(Math.max(r||1,0),1)).toString(16),f=e=>({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"transparent"})[e.toLowerCase()],p=e=>{if(e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]){if(7===e.length)return 63;if(e[7]===e[8])return 84}return!1},we=(e,r)=>36===r?"#"+e[1].repeat(2)+e[2].repeat(2)+e[3].repeat(2):48===r?"#"+e[1].repeat(2)+e[2].repeat(2)+e[3].repeat(2)+e[4].repeat(2):63===r?"#"+e[1]+e[3]+e[5]:84===r?"#"+e[1]+e[3]+e[5]+e[7]:void 0,g=r=>{if("#"===(r=r.toLowerCase())[0]){if(null===r.match(/^#[0-9a-f]+$/))return!1;var e=r.length;return 7===e?1:9===e?2:4===e?3:5===e&&4}if("rg"===r.substr(0,2))return"a"===(r=r.replace(/\s/g,"")).substr(3,1)?null!==r.match(/^rgba\((0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d),(0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d),(0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d),(0|1|0?\.?\d*?)\)$/)&&6:null!==r.match(/^rgb\((0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d),(0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d),(0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d)\)$/)&&5;if("hs"===r.substr(0,2))return"a"===(r=r.replace(/\s/g,"")).substr(3,1)?null!==r.match(/^hsla\((0|360|35\d|3[0-4]\d|[12]\d\d|0?\d?\d),(0|100|\d{1,2})%,(0|100|\d{1,2})%,(0|1|0?\.?\d*?)\)$/)&&8:null!==r.match(/^hsl\((0|360|35\d|3[0-4]\d|[12]\d\d|0?\d?\d),(0|100|\d{1,2})%,(0|100|\d{1,2})%\)$/)&&7;if(-1===r.indexOf("gradient"))return-1!==["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgrey","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgrey","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","transparent"].indexOf(r)&&9;{let e=!1;return null!==r.match(/.*gradient\s*\(((?:\([^\)]*\)|[^\)\(]*)*)\)/)&&(!1===xr&&(xr=!0,Lr=document.createElement("div"),document.body.appendChild(Lr)),Lr.style.background=r,e=0<Lr.style.background.length&&10,Lr.style.background=""),e}},ge=e=>{let r=g(e),t=[],a="";return!1!==r&&(10===r?r=!1:(tr=e,1<=r&&r<=4?(3===r?e=we(e,36):4===r&&(e=we(e,48)),t=u(c(e,!1)),1!==r&&3!==r||(t[3]=1)):5===r||6===r?(t=u(_(e)),5===r&&(t[3]=1)):7===r||8===r?(t=_(e),7===r&&(t[3]=1)):9===r&&("transparent"===e.toLowerCase()?(a="#000000",t=[0,0,0,0]):(a=f(e),t=u(c(a,!1),!1),t[3]=1)))),[r,t,a]},a=(a,t)=>{const r=([e,r,t,a])=>{se=Math.round(ce-a*ce),J=Math.round(r*(re/100)),Q=Math.round(te-te*t/100),oe=Math.round(de/(360/e)),H.style.transform="translate(-"+pe/2+"px, "+parseInt(se-pe/2)+"px)",z.style.transform="translate("+(J-ae/2)+"px ,"+(Q-ae/2)+"px)",q.style.transform="translate(-"+le/2+"px, "+parseInt(oe-le/2)+"px)"},o=e=>{oe=Math.max(Math.min(e.pageY-ne,de),0),q.style.transform="translate(-"+le/2+"px, "+parseInt(oe-le/2)+"px)",R[0]=Math.round(oe/de*360),O.style.background="linear-gradient(to bottom, hsl("+R[0]+","+R[1]+"%,"+R[2]+"%), transparent)",Y.style.background="hsl("+R[0]+", 100%, 50%)",z.style.background="hsl("+R[0]+","+R[1]+"%,"+R[2]+"%)",q.style.background="hsl("+R[0]+", 100%, 50%)",L.style.background="hsla("+R[0]+","+R[1]+"%,"+R[2]+"%,"+R[3]+")",M.textContent=R[0],p()},n=e=>{J=Math.max(Math.min(e.pageX-ee,re),0),Q=Math.max(Math.min(e.pageY-Z,te),0),R[1]=Math.round(J/re*100),R[2]=Math.round(100-Q/te*100),z.style.transform="translate("+(J-ae/2)+"px ,"+(Q-ae/2)+"px)",O.style.background="linear-gradient(to bottom, hsl("+R[0]+","+R[1]+"%,"+R[2]+"%), transparent)",z.style.background="hsl("+R[0]+","+R[1]+"%,"+R[2]+"%)",L.style.background="hsla("+R[0]+","+R[1]+"%,"+R[2]+"%,"+R[3]+")",M.textContent=R[1]+","+R[2],p()},d=e=>{se=Math.max(Math.min(e.pageY-ie,ce),0),R[3]=parseFloat((1-se/ce).toFixed(2)),H.style.transform="translate(-"+pe/2+"px, "+parseInt(se-pe/2)+"px)",L.style.background="hsla("+R[0]+","+R[1]+"%,"+R[2]+"%,"+R[3]+")",M.textContent=R[3],p()},l=e=>d(e),s=e=>n(e),i=e=>o(e),c=()=>{!0===G?(G=!1,document.removeEventListener("mousemove",l,!1)):!0===U?(U=!1,document.removeEventListener("mousemove",s,!1)):!0===P&&(P=!1,document.removeEventListener("mousemove",i,!1)),M.textContent="",M.className="",document.removeEventListener("mouseup",c,!1),g.classList.remove("picker-mousehold"),tr=a,ke()},p=()=>{var r=R[3]<1?R:[R[0],R[1],R[2]];if(!0===V&&(V=!1),5===A||6===A)a=_e(ue(r),"rgb");else if(7===A||8===A)a=_e(r,"hsl");else{let e=!1;4<D&&D<9||R[0]!==X[0]||R[1]!==X[1]||R[2]!==X[2]?e=!0:1===D||2===D?(a=t.substr(0,7),R[3]<1&&(a=fe(a,R[3]))):3===D||4===D?(a=t.substr(0,4),R[3]<1&&(a=fe(we(a,36),R[3]))):9===D&&(1===R[3]?9===A?a="transparent"===t.toLowerCase()?j:t:1===A||2===A?a=j:3!==A&&4!==A||(a=we(j,63)):a="transparent"===t.toLowerCase()&&0===r[3]?t:fe(j,R[3])),!0===e&&(a=he(_e(ue(r),"rgb")))}N.textContent=a},m=()=>{O.style.background="linear-gradient(to bottom, hsl("+R[0]+","+R[1]+"%,"+R[2]+"%), transparent)",Y.style.background="hsl("+R[0]+", 100%, 50%)",z.style.background="hsl("+R[0]+","+R[1]+"%,"+R[2]+"%)",q.style.background="hsl("+R[0]+", 100%, 50%)",L.style.background="hsla("+R[0]+","+R[1]+"%,"+R[2]+"%,"+R[3]+")"},u=()=>{x.style.background="hsla("+X[0]+","+X[1]+"%,"+X[2]+"%,"+X[3]+")",N.textContent=a},_=()=>{Y.style.background="#f00",N.textContent=F,x.style.background="linear-gradient(135deg, transparent 0%, transparent 48%, red 50%, transparent 52%, transparent 100%)",L.style.background=B},e=()=>{v.offsetHeight>window.outerHeight?g.style.overflowY="scroll":g.overflowY="hidden",get_picker_dimensions(),r(R)},h=e=>{!0===e?(Er=!0,setTimeout(()=>document.body.classList.add("picker-no-insert"),0)):(Er=!1,setTimeout(()=>document.body.classList.remove("picker-no-insert"),0))},f=e=>"0x"===e.substr(0,2)?"#"+e.substr(2,e.length):e,w=()=>{let e=ge(t);A=e[0],!1!==A?(R=e[1],j=e[2]):(K=!0,V=!0,R=W.slice(),a=B,t=B,A=1),X=R.slice(),D=A,a!==t&&(e=ge(a),A=e[0],!1!==A?(V=!1,R=e[1]):(V=!0,a=B,R=W.slice(),A=1)),tr=a,ar=t},g=document.createElement("div"),v=document.createElement("div"),b=document.createElement("div"),y=document.createElement("p"),$=document.createElement("div"),E=document.createElement("p"),k=document.createElement("p"),L=document.createElement("span"),x=document.createElement("span"),C=document.createElement("p"),N=document.createElement("div"),M=document.createElement("div"),T=document.createElement("div"),O=document.createElement("div"),H=document.createElement("div"),I=document.createElement("div"),q=document.createElement("div"),Y=document.createElement("div"),z=document.createElement("div"),S=document.createElement("p"),B="#ffffff",W=[0,0,100,1],F="INVALID COLOR VALUE";let R=[],X=[],A=!1,D=!1,K=!1,V=!1,j="",P=!1,U=!1,G=!1,J=0,Q=0,Z=0,ee=0,re=0,te=0,ae=0,oe=0,ne=0,de=0,le=0,se=0,ie=0,ce=0,pe=0,me=null;window.get_picker_dimensions=()=>{var e=Y.getBoundingClientRect();Z=parseInt(e.top+window.scrollY),ee=parseInt(e.left),re=Y.offsetWidth,te=Y.offsetHeight,ae=z.offsetWidth,ie=Z,ce=te,pe=H.offsetWidth,ne=Z,de=te,le=pe},window.picker_refresh=e=>{e=f(e),t=a=e,w(),(!1===K?u:_)(),r(R),m()},window.picker_close=()=>{(e=>{if(arr_dh.splice(arr_dh.indexOf(e.d_id),1),dh_len--,dh_len===0)window.removeEventListener("resize",Ee,false)})(b),window.removeEventListener("resize",e,!1),document.body.removeChild(g),h(!1),rr=!1,ke()},void 0===t&&(t=a),a=f(a),t=f(t),w(),g.id="picker-wrapper-outer",g.className="drag-head-wrapper-outer",g.addEventListener("scroll",()=>{get_picker_dimensions()},!1),v.id="picker-wrapper",v.className="drag-head-wrapper",b.id="picker-head",v.appendChild(b),y.id="picker-btn-close",y.addEventListener("click",picker_close,!1),v.appendChild(y),$.id="picker-preview-wrapper",E.id="picker-btn-add",E.addEventListener("mousedown",()=>{!0!==V&&(be([a],[a],Je,!1),x.style.background=a)},!1),k.id="picker-btn-replace",k.addEventListener("mousedown",()=>{if(!0!==V){var r=ye(),t=r.length;let e=0;if(0<t){for(e=0;e<t;e++)Be[r[e]]=a,We[r[e]]=!1!==A?a:qe,$color_inputs_c[r[e]].value=!1!==A?a:F,$color_spans[r[e]].style.background=We[r[e]];Le()}}},!1),x.id="picker-preview-init",x.addEventListener("mousedown",()=>{!1===K&&picker_refresh(t)},!1),L.id="picker-preview-new",$.appendChild(E),$.appendChild(k),$.appendChild(L),$.appendChild(x),v.appendChild($),C.id="picker-btn-switch",C.addEventListener("mousedown",()=>{if(!0!==V){let e=!1;var r;7!==A&&8!==A||R[0]!==X[0]&&R[1]!==X[1]&&R[2]!==X[2]||(1===R[3]?1===D?(a=t,A=D,e=!0):2===D?(a=t.substr(0,7),A=1,e=!0):9===D&&(A="transparent"===t.toLowerCase()?(a="#000000",1):(a=t,D),e=!0):1===D||2===D?(a=fe(t.substr(0,7),R[3]),A=2,e=!0):9===D&&(A="transparent"===t.toLowerCase()&&0===R[3]?(a=t,D):(a=fe(j,R[3]),2),e=!0)),!1===e&&(r=ve(a),A=r[0],a=r[1]),N.textContent=a,tr=a}},!1),N.id="picker-text-switch",me=document.createElement("div"),me.id="picker-switch-wrapper",me.appendChild(C),me.appendChild(N),v.appendChild(me),M.id="picker_controls_info",v.appendChild(M),T.id="picker-controls-wrapper",O.id="alpha-slider",O.addEventListener("mousedown",e=>{G=!0,g.classList.add("picker-mousehold"),M.className="alpha",document.addEventListener("mousemove",l,!1),document.addEventListener("mouseup",c,!1),d(e)},!1),H.id="alpha-pointer",H.className="pointer",O.appendChild(H),T.appendChild(O),Y.id="sat-rect",Y.addEventListener("mousedown",e=>{U=!0,g.classList.add("picker-mousehold"),M.className="sat",document.addEventListener("mousemove",s,!1),document.addEventListener("mouseup",c,!1),n(e)},!1),z.id="sat-pointer",z.className="pointer",me=document.createElement("div"),Y.appendChild(me),Y.appendChild(z),T.appendChild(Y),I.id="hue-slider",I.addEventListener("mousedown",e=>{P=!0,g.classList.add("picker-mousehold"),M.className="hue",document.addEventListener("mousemove",i,!1),document.addEventListener("mouseup",c,!1),o(e)},!1),q.id="hue-pointer",q.className="pointer",I.appendChild(q),T.appendChild(I),v.appendChild(T),S.id="picker-btn-insert",v.appendChild(S),S.addEventListener("mousedown",()=>{!0!==V&&He.postMessage({command:"insert",insert_val:a})},!1),window.addEventListener("resize",e,!1),(!1===K?u:_)(),m(),((e,r,t,a)=>{if(typeof arr_dh==="undefined"){window.arr_dh=[];window.dh_len=0;window.dh_id=0}if(dh_len===0)window.addEventListener("resize",Ee,false);e.d_id=dh_len,e.addEventListener("mousedown",$e,false),e.className="drag-head",arr_dh[dh_len]=[],arr_dh[dh_len].$el_head=e,arr_dh[dh_len].$el_drag=r,arr_dh[dh_len].$el_drag_wrapper=t,arr_dh[dh_len].custom_func_when_moved=a,arr_dh[dh_len].start_top=0,arr_dh[dh_len].start_left=0,arr_dh[dh_len].start_x=0,arr_dh[dh_len].start_y=0,arr_dh[dh_len].dragged=false,arr_dh[dh_len].is_flex_centred=false,dh_len++})(b,v,g,get_picker_dimensions),h(!0),g.appendChild(v),document.body.appendChild(g),get_picker_dimensions(),r(R),ke()},m=e=>{!1===rr?(rr=!0,a(e)):picker_refresh(e)},ve=e=>{var r,t=g(e);let a="",o=-1;return 1===t||2===t?(r=p(e),o=63===r?(a=we(e,63),3):84===r?(a=we(e,84),4):(a=c(e,!0),4+t)):3===t?(a=c(we(e,36),!0),o=5):4===t?(a=c(we(e,48),!0),o=6):5===t||6===t?(a=_e(u(_(e)),"hsl"),o=2+t):7===t||8===t?a=he(_e(ue(_(e)),"rgb")):9===t?(a="transparent"===e.toLowerCase()?"#00000000":f(e),o=1):10===t&&(o=!1),[o,a]},w=(e,r)=>{var t=e=>(7===e.length?63===p(e)&&(e=we(e,63)):9===e.length&&84===p(e)&&(e=we(e,84)),e),a=!0===r?Fe:r.length,o="insert-compactview"===Ge;let n,d,l=!1,s,i=0;for(i=0;i<a;i++)n=!0===r?i:r[i],l=!1,d=Be[n],1<=(s=g(d))&&s<=4?1===e?l=c(d,!0):2===e&&(l=_e(u(c(d,!1)),"hsl")):5===s||6===s?0===e?l=t(he(d)):2===e&&(l=_e(u(_(d)),"hsl")):7===s||8===s?0===e?l=t(he(_e(ue(_(d)),"rgb"))):1===e&&(l=_e(ue(_(d)),"rgb")):9===s&&(l=0===e?t(f(d)):1===e?c(f(d),!0):_e(u(c(f(d),!1)),"hsl")),!1!==l&&(Be[n]=l,$color_inputs_c[n].value=l,!0==o&&($color_wrappers[n].title=Se[n]===Be[n]?Se[n]:Se[n]+": "+Be[n]));Le()},be=(e,r,t,a)=>{const o=()=>{for(m=i;m<_r;m++)$color_wrappers[ur[m]].className="color-wrapper"},n=e=>{Cr.style.padding=ir*lr+"px 0 "+(e-cr)*lr+"px 0"},d=window.scrollY,l=!1===Qe?Fe:_r,s=[];let i=0,c=0,p,m=0;if(c=!0===e?(e=[Xe],r=[Ae],1):e.length,0<(p=Fe+c-Re)){if(C("Limit of "+Re+" reached!",!1,!1,!1,e=>{}),c-p<1)return;e=e.slice(0,p),r=r.slice(0,p),c=p}if(!0===Qe)if(_r<1)t=0,m=0,ur=[...Array(c)].map((e,r)=>r+0),_r=c,L();else{for(-1===t?t=ur[0]:i=ur.indexOf(t),m=i;m<_r;m++)$color_wrappers[ur[m]].className="hide",ur[m]+=c;m=0;var u=[...Array(c)].map((e,r)=>r+t);ur.splice(i,0,...u),_r+=c}else-1===t&&(t=0);for(m=0;m<c;m++)s[m]=!1===g(r[m])?qe:r[m];if(Se.splice(t,0,...e),Be.splice(t,0,...r),We.splice(t,0,...s),Fe+=c,Y(Fe-c,Fe,!1),"insert-compactview"===Ge)!0===Qe&&o();else if(!0===dr){var _=3*sr;if(cr===l){var h=ir;if(U(),!1===Qe)for(m=0;m<_;m++)h+m<ir&&($color_wrappers[h+m].className="hide"),$color_wrappers[ir+m].className="color-wrapper";else{for(m=0;m<_;m++)h+m<ir&&($color_wrappers[ur[ir+m]].className="hide"),$color_wrappers[ur[ir+m]].className="color-wrapper";window.scrollTo(0,d+lr*c)}}else if(!0===Qe)for(m=0;m<_;m++)$color_wrappers[ur[ir+m]].className="color-wrapper";n(l+c)}else{var f=!1===Qe?Fe:_r;if(f>Ie){if(0===lr&&R(),U(),!1===Qe)for(m=0;m<f;m++)$color_wrappers[m].className=m<ir||m>cr?"hide":"color-wrapper";else for(m=0;m<f;m++)$color_wrappers[ur[m]].className=m<ir||m>cr?"hide":"color-wrapper";n(f),Cr.style.padding=ir*lr+"px 0 "+(f-cr)*lr+"px 0",window.scrollTo(0,d),D()}else!0===Qe&&o()}if(de(t),-1===Je&&(Je=!1===Qe?0:ur[0],ke()),!0===a){0<yr&&se(!0);var a=t,w=t+c;for(m=a;m<w;m++)$color_inp_wrappers[m].className="selected",br[yr]=m,yr++;Je>=a&&Je<w&&(br.splice(br.indexOf(Je),1),yr--)}$color_inp_wrappers[Je].className="active",Q(!1),G(),J(),Le()},ye=()=>{let e=[];return 0===yr?-1!==Je&&(e[0]=Je):(e=br.slice(),-1!==Je&&e.push(Je),e.sort((e,r)=>e-r)),e},v=()=>{const o=ye(),n=o.length,d=!1===Qe?Fe:_r,l=[];if(0!==n){let e,r,t=0,a=0;if(!0===Qe){var s=ur.indexOf(o[0]),i=0;for(t=s;t<_r;t++)!1===dr&&($color_wrappers[ur[t]].className="hide"),-1!==o.indexOf(ur[t])?i++:(l[a]=ur[t]-i,a++);ur=[...ur.splice(0,s),...l],_r-=n,L()}for(e=Fe-1,r=Fe-n,a=1,t=e;t>=r;t--)$color_wrapper_main.removeChild($color_wrappers[t]),$color_inp_wrappers[o[n-a]].className="",Se.splice(o[n-a],1),Be.splice(o[n-a],1),We.splice(o[n-a],1),a++;if($color_wrappers.splice(Fe-n,n),$color_inputs_n.splice(Fe-n,n),$color_inputs_c.splice(Fe-n,n),$color_inp_wrappers.splice(Fe-n,n),$color_spans.splice(Fe-n,n),Fe-=n,!0===dr)if(d-n<=Ie)if(P(),!1===Qe)for(t=0;t<Fe;t++)$color_wrappers[t].className="color-wrapper";else for(t=0;t<_r;t++)$color_wrappers[ur[t]].className="color-wrapper";else{var c=3*sr;if(cr===d&&(ir-=n,cr-=n),!1===Qe)for(t=0;t<c;t++)$color_wrappers[ir+t].className="color-wrapper";else for(t=0;t<c;t++)$color_wrappers[ur[ir+t]].className="color-wrapper";Cr.style.padding=ir*lr+"px 0 "+(d-n-cr)*lr+"px 0"}else if(!0===Qe)for(t=s;t<_r;t++)$color_wrappers[ur[t]].className="color-wrapper";d===n?Je=-1:(de(o[0]),-1!==Je&&(Je=!1===Qe?o[0]>Fe-1?Fe-1:o[0]:s===d-1?ur[s-1]:ur[s],$color_inp_wrappers[Je].className="active")),ke(),Le(),0<yr&&(br=[],yr=0),G(),J()}},b=(e,r)=>{const t=[];t[0]=Se[e],t[1]=Be[e],t[2]=We[e],Se[e]=Se[r],Be[e]=Be[r],We[e]=We[r],Se[r]=t[0],Be[r]=t[1],We[r]=t[2],$color_inputs_n[e].value=Se[e],$color_inputs_c[e].value=Be[e],$color_spans[e].style.background=We[e],$color_inputs_n[r].value=Se[r],$color_inputs_c[r].value=Be[r],$color_spans[r].style.background=We[r],!0===er&&"insert-compactview"===Ge&&($color_wrappers[e].title=Se[e]===Be[e]?Se[e]:Se[e]+": "+Be[e],$color_wrappers[r].title=Se[r]===Be[r]?Se[r]:Se[r]+": "+Be[r])},y=e=>{let r=0;if(!0===e){for(er=!0,$color_wrapper_main.classList.add("sort-mode"),r=0;r<Fe;r++)$color_wrappers[r].addEventListener("mousedown",t,!1);0<yr&&se(!0)}else for(er=!1,$color_wrapper_main.classList.remove("sort-mode"),r=0;r<Fe;r++)$color_wrappers[r].removeEventListener("mousedown",t,!1)},$=e=>{var r=()=>{let e=0;if(!1===Qe&&Fe>Ie||!0===Qe&&_r>Ie){if(0===lr&&R(),!1===Qe)for(e=0;e<Fe;e++)$color_wrappers[e].title="",e>cr&&($color_wrappers[e].className="hide");else{const t=ur.slice();var r;for(e=0;e<Fe;e++)$color_wrappers[e].title="",e>cr&&(r=t.indexOf(e),t.splice(r,1),-1!==r&&($color_wrappers[e].className="hide"))}window.scrollTo(0,0),pr=-1,ir=0,cr=3*sr,j(!0===Qe&&0<_r),D()}else for(e=0;e<Fe;e++)$color_wrappers[e].title=""};let t="";"toggle-insert-edit"===e?t="edit"===Ge?"insert-listview":("insert-compactview"===Ge&&r(),"edit"):"toggle-insert-view"===e&&(t="insert-compactview"===Ge?(r(),"insert-listview"):((()=>{var e=e=>{$color_wrappers[e].title=Se[e]===Be[e]?Se[e]:Se[e]+": "+Be[e]};let r=[],t,a=0;if(Fe>Ie)if(P(),0===_r)for(a=0;a<Fe;a++)e(a),$color_wrappers[a].className="color-wrapper";else for(r=ur.slice(),a=0;a<Fe;a++)e(a),t=r.indexOf(a),r.splice(t,1),-1!==t&&($color_wrappers[a].className="color-wrapper");else for(a=0;a<Fe;a++)e(a)})(),"insert-compactview")),Cr.className=t,Ge=t,Z(),ke()},o=()=>{Nr.clientWidth<360?Tr.classList.add("dropdown-ul-full-width"):Tr.classList.remove("dropdown-ul-full-width")},n=()=>{const e=e=>{$(e.currentTarget.command)},t=()=>{Mr.value=De[Ve],Mr.opened=!1,i=[],Tr.innerHTML="",Tr.classList.add("hide")},r=e=>{void 0===e.target.l_id&&t(),document.removeEventListener("mouseup",r,!1)},a=document.createElement("div"),o=document.createElement("div"),n=document.createElement("div"),d=document.createElement("div"),l=document.createElement("div"),s=document.createElement("i");let i=[],c=null;Cr=document.createElement("div"),Nr=document.createElement("div"),Mr=document.createElement("input"),Tr=document.createElement("ul"),Or=document.createElement("p"),Hr=document.createElement("div"),Ir=document.createElement("input"),qr=document.createElement("span"),Yr=document.createElement("span"),zr=document.createElement("em"),window.btn_save_click=()=>{C("Save?",!0,!1,!1,e=>{!0===e&&He.postMessage({command:"save_palette",arr_n:Se,arr_c:Be,c_len:Fe})})},Nr.id="controls-wrapper",a.id="toggle-wrapper",n.id="edit-wrapper",d.id="edit-btn-wrapper",c=document.createElement("p"),c.id="btn-toggle-insert-edit",c.title="toggle edit options",c.command="toggle-insert-edit",c.addEventListener("mousedown",e,!1),a.appendChild(c),o.className="dropdown-wrapper",Tr.className="hide",Mr.value=De[Ve],Mr.opened=!1,Mr.title="load palette",Mr.addEventListener("mousedown",()=>{let e=0;if(!1===Mr.opened){Mr.opened=!0;var r=e=>{e.currentTarget.l_id!==Ve&&(Ve=e.currentTarget.l_id,le(!0),He.postMessage({command:"change_palette",p_cid:Ve}),Mr.value=De[Ve]),t()};for(e=0;e<Ke;e++)i[e]=document.createElement("li"),i[e].l_id=e,i[e].textContent=De[e],i[e].addEventListener("mouseup",r,!1),Tr.appendChild(i[e]);Tr.classList.remove("hide"),o.appendChild(Tr)}},!1),Mr.addEventListener("focusout",()=>{document.addEventListener("mouseup",r,!1)},!1),Mr.addEventListener("keyup",e=>{e.preventDefault();let r=0,t=0;if(27!==e.keyCode){for(r=0;r<Ke;r++)-1!==De[r].toLowerCase().indexOf(Mr.value.toLowerCase())?(i[r].className="",t++):i[r].className="hide";0===t&&Tr.classList.add("hide"),Tr.classList.remove("hide")}else{for(Mr.value=De[Ve],r=0;r<Ke;r++)i[r].className="";Tr.classList.add("hide")}},!1),o.appendChild(Mr),a.appendChild(o),c=document.createElement("p"),c.id="btn-toggle-insertview",c.title="toggle view",c.command="toggle-insert-view",c.addEventListener("mousedown",e,!1),a.appendChild(c),Or.id="btn-filter",Or.title="toggle filter",Or.addEventListener("click",()=>E(!0)),a.appendChild(Or),Hr.id="filter-wrapper",Hr.className="hide",Ir.addEventListener("keyup",k,!1),Hr.appendChild(Ir),Nr.appendChild(a),Nr.appendChild(Hr),c=document.createElement("p"),c.id="btn-add",c.title="add color",c.addEventListener("mousedown",()=>{be(!0,!0,Je,!1)},!1),d.appendChild(c),c=document.createElement("p"),c.id="btn-pm-open",c.title="open palette manager",c.addEventListener("mousedown",x,!1),d.appendChild(c),c=document.createElement("p"),c.id="btn-texteditor",c.title="edit palette in texteditor",c.addEventListener("mousedown",()=>{He.postMessage({command:"edit_palette_in_texteditor"})},!1),d.appendChild(c),c=document.createElement("p"),c.id="btn-restore",c.title="restore palette",c.addEventListener("mousedown",()=>{C("Restore?",!0,!1,!1,e=>{!0===e&&(le(!0),He.postMessage({command:"change_palette",p_cid:Ve}))})},!1),d.appendChild(c),c=document.createElement("p"),c.id="btn-save",c.title="save palette",c.addEventListener("mousedown",btn_save_click,!1),d.appendChild(c),n.appendChild(d),Nr.appendChild(n),Cr.id="main-wrapper",Cr.className="hide",Cr.appendChild(Nr),l.id="statusbar",Yr.title="scroll to active",Yr.addEventListener("click",()=>{Q(!0)}),Yr.appendChild(s),Yr.appendChild(zr),l.appendChild(qr),l.appendChild(Yr),Cr.appendChild(l)},d=e=>{Mr.value=e},E=e=>{let r=0;if(!1===Qe)Qe=!0,Hr.className="",Or.className="active",hr=!1,Ir.focus();else{var t=()=>{for($color_wrapper_main.classList.add("hide"),r=0;r<Fe;r++)$color_wrappers[r].className="color-wrapper";$color_wrapper_main.classList.remove("hide")};if("insert-compactview"===Ge)t();else if(!0===e&&(_r<Fe&&t(),Fe>Ie)){for(0===lr&&R(),window.scrollTo(0,0),pr=0,ir=0,cr=3*sr,r=0;r<Fe;r++)$color_wrappers[r].className=r>cr?"hide":"color-wrapper";Cr.style.padding="0 0 "+(Fe-cr)*lr+"px 0",!1===dr&&D()}Qe=!1,Ze="",ur=[],_r=0,hr=!1,Or.className="",Hr.className="hide",Ir.value="",G(),J(),$color_wrapper_main.classList.remove("filter-no-results")}Z(),ke()},k=()=>{let e=0;if(!1===Ur&&!1===hr&&(hr=!0,-1!==Je&&($color_inp_wrappers[Je].className="",Je=-1)),Ze=Ir.value.toLowerCase(),window.scrollTo(0,0),!0===dr&&(pr=0,ir=0,cr=3*sr),ur=[],_r=0,"insert-compactview"===Ge||"insert-compactview"!==Ge&&Fe<Ie)for(e=0;e<Fe;e++)-1!==Be[e].toLowerCase().indexOf(Ze)||-1!==Se[e].toLowerCase().indexOf(Ze)?($color_wrappers[e].className="color-wrapper",ur[_r]=e,_r++):($color_wrappers[e].className="hide",e===Je&&(Je=-1));else{for(e=0;e<Fe;e++)-1!==Be[e].toLowerCase().indexOf(Ze)||-1!==Se[e].toLowerCase().indexOf(Ze)?(ur[_r]=e,_r++):e===Je&&(Je=-1),$color_wrappers[e].className="hide";if(_r>Ie){for(e=0;e<cr;e++)$color_wrappers[ur[e]].className="color-wrapper";!1===dr&&D(),Cr.style.padding="0 0 "+(_r-cr)*lr+"px 0"}else if(!0===dr&&P(),0!==_r)for(e=0;e<_r;e++)$color_wrappers[ur[e]].className="color-wrapper"}G(),J(),L(),ke()},L=()=>{0===_r?$color_wrapper_main.classList.add("filter-no-results"):$color_wrapper_main.classList.remove("filter-no-results")},x=()=>{if(!0===fr)return;const e=e=>{13===e.keyCode&&(e=e.currentTarget,t(e.value,e.add_saveas))},r=e=>{e=e.currentTarget.previousElementSibling;t(e.value,e.add_saveas)},t=(r,t)=>{r=r.trim(),!1!==d(r)&&C("Save?",!0,!1,!1,e=>{!0===e&&He.postMessage({command:"add_palette",add_saveas:t,arr_n:Se,arr_c:Be,fname:r})})},a=e=>{13===e.keyCode&&n(e.currentTarget.parentNode.t_id,e.currentTarget.value)},o=e=>{e=e.currentTarget.parentNode.t_id;n(e,h[e].value)},n=(r,t)=>{(t=t.trim()).toLowerCase()!==De[r].toLowerCase()&&!1!==d(t)&&C("Rename?",!0,!1,!1,e=>{!0===e&&He.postMessage({command:"rename_palette",p_id:r,fname:t})})},d=r=>""!==r&&(-1!==De.findIndex(e=>e.toLowerCase()===r.toLowerCase())?(C("Not possible! Name already exists!",!1,!1,!1,e=>{}),!1):!r.match(/[\\\\/:*?\'<>|]/g)||(C('Not possible! These chars are not allowed: \\ / : * ? " < > | ',!1,!1,!1,e=>{}),!1)),l=e=>{const r=e.currentTarget.parentNode.t_id;C("Delete?",!0,!1,!1,e=>{!0===e&&He.postMessage({command:"delete_palette",p_id:r})})},s=e=>{u.classList.add("hover-helper"),_[e.currentTarget.parentNode.t_id].classList.add("hover-helper-highlight")},i=e=>{u.classList.remove("hover-helper"),_[e.currentTarget.parentNode.t_id].classList.remove("hover-helper-highlight")},c=()=>{let e=0;for(e;e<Ke;e++)_[e]=document.createElement("div"),_[e].t_id=e,h[e]=document.createElement("input"),h[e].value=De[e],h[e].addEventListener("keydown",a,!1),_[e].appendChild(h[e]),w=document.createElement("p"),w.addEventListener("mousedown",o,!1),w.addEventListener("mouseenter",s,!1),w.addEventListener("mouseleave",i,!1),_[e].appendChild(w),w=document.createElement("p"),w.addEventListener("mousedown",l,!1),w.addEventListener("mouseenter",s,!1),w.addEventListener("mouseleave",i,!1),_[e].appendChild(w),u.appendChild(_[e]);_[Ve].classList.add("active")},p=document.createElement("div"),m=document.createElement("div"),u=document.createElement("div");window.pm_refresh=()=>{p.classList.add("hide");var e=_.length;let r=0;for(r;r<e;r++)u.removeChild(_[r]);_=[],h=[],c(),p.classList.remove("hide")},window.pm_close=()=>{document.body.removeChild(p),document.body.classList.remove("overflow-hidden"),fr=!1};let _=[],h=[],f=document.createElement("div"),w=null;p.id="pm-wrapper-outer",p.className="drag-head-wrapper-outer",m.id="pm-wrapper",m.className="drag-head-wrapper",u.id="pm-list-wrapper",w=document.createElement("p"),w.addEventListener("mousedown",pm_close,!1),f.id="pm-head",f.appendChild(w),m.appendChild(f),f=document.createElement("div"),w=document.createElement("input"),w.add_saveas=!0,w.addEventListener("keydown",e,!1),f.appendChild(w),w=document.createElement("p"),w.add_saveas=!0,w.addEventListener("mousedown",r,!1),f.appendChild(w),m.appendChild(f),f=document.createElement("div"),w=document.createElement("input"),w.add_saveas=!1,w.addEventListener("keydown",e,!1),f.appendChild(w),w=document.createElement("p"),w.add_saveas=!1,w.addEventListener("mousedown",r,!1),f.appendChild(w),m.appendChild(f),w=document.createElement("span"),m.appendChild(w),c(),m.appendChild(u),p.appendChild(m),document.body.classList.add("overflow-hidden"),document.body.appendChild(p),!0===rr&&picker_close(),fr=!0},C=(e,t,a,r,o)=>{const n=()=>{var e;!1!==r?""!==(e=m.value.trim())&&(o(e),s()):(o(!0),s())},d=e=>{let r=e.currentTarget.t_id;!0===t&&r===a.length-1&&(r=!1),o(r),s()},l=e=>{9===e.keyCode&&e.preventDefault(),!1===a&&13===e.keyCode&&n(),!0===t&&27===e.keyCode&&dib_cancel()},s=()=>{document.removeEventListener("keydown",l,!1),Cr.removeChild(c),i.focus(),document.addEventListener("keypress",ie,!1),Pr=!1},i=document.activeElement,c=document.createElement("div"),p=document.createElement("div");window.dib_cancel=()=>{o(!1),s()};let m=null,u=null,_,h=null,f=0;if(Pr=!0,document.removeEventListener("keypress",ie,!1),c.id="dib-wrapper",u=document.createElement("span"),u.textContent=e,p.appendChild(u),!1!==r&&(m=document.createElement("input"),m.type="text",m.value=r.input,p.appendChild(m)),!1===a)u=document.createElement("p"),u.textContent="OK",u.addEventListener("click",n,!1),p.appendChild(u),!0===t&&(u=document.createElement("p"),u.textContent="Cancel",u.addEventListener("click",dib_cancel,!1),p.appendChild(u));else for(h=!0===t?(a.push("Cancel")," has-cancel"):"",p.className="has-options"+h,_=a.length,f=0;f<_;f++)u=document.createElement("p"),u.innerHTML=a[f],u.t_id=f,u.addEventListener("click",d,!1),p.appendChild(u);c.appendChild(p),Cr.appendChild(c),p.offsetWidth<ze&&p.classList.add("dib-stretch"),i.blur(),setTimeout(()=>{document.addEventListener("keydown",l,!1)},0),!1!==r&&(m.focus(),m.select())},l=e=>{Br=!!(e.which&&3===e.which||e.button&&2===e.button)||(!1===wr&&!1===gr&&0<yr&&se(!0),!1)},s=n=>{if(!(!0===Br&&0<yr)){let a=-1,o=0;if(!1===wr&&!1===gr)-1!==Je&&($color_inp_wrappers[Je].className=""),a=n.currentTarget.wid;else{if(!0===er)return;var d,n=n.currentTarget.wid;if(!0===wr)n===Je?($color_inp_wrappers[Je].className="",Je=-1,ke()):-1===(d=br.indexOf(n))?-1===Je?a=n:(br[yr]=n,yr++,$color_inp_wrappers[n].className="selected"):(br.splice(d,1),yr--,$color_inp_wrappers[n].className="");else{let e=0,r=0,t=!1;if(-1!==Je?n>Je?(e=!1===Qe?Je+1:ur.indexOf(Je)+1,r=!1===Qe?n:ur.indexOf(n)):n<Je?(e=!1===Qe?n:ur.indexOf(n),r=!1===Qe?Je-1:ur.indexOf(Je)-1):t=!0:a=0===yr?(e=0,r=!1===Qe?n-1:ur.indexOf(n)-1,n):(1<yr&&br.sort((e,r)=>e-r),(d=!1===Qe?br[0]:ur.indexOf(br[0]))<n?(e=d+1,r=!1===Qe?n:ur.indexOf(n)):n<d?(e=!1===Qe?n:ur.indexOf(n),r=d-1):t=!0,d),se(!0),!1===t)if(!1===Qe)for(o=e;o<=r;o++)$color_inp_wrappers[o].className="selected",br[yr]=o,yr++;else for(o=e;o<=r;o++)$color_inp_wrappers[ur[o]].className="selected",br[yr]=ur[o],yr++}}-1!==a&&(Je=a,$color_inp_wrappers[Je].className="active",ke()),J()}},i=()=>{!0===vr&&(vr=!1,wr=!1,gr=!1,$color_wrapper_main.classList.remove("multi-select"))},N=e=>{!0===Br&&0<yr||(e=e.currentTarget.wid)!==Je&&(-1!==Je&&($color_inp_wrappers[Je].className=""),Je=e,$color_inp_wrappers[Je].className="active",ke())},M=()=>{var e;!0!==Br&&!0!==Er&&(e=Be[Je],He.postMessage({command:"insert",insert_val:e}),$r!==Je?($r=Je,$color_wrappers[Je].className="color-wrapper ani-insert"):($color_wrappers[Je].className="color-wrapper",setTimeout(()=>$color_wrappers[Je].className="color-wrapper ani-insert",0)))},T=()=>{if(!0!==Br){let e=[],r="",t=-1;Sr!==Je&&(Sr=Je,Ye.init_color=Be[Je],e=ge(Ye.init_color),Ye.csys=e[0],Ye.csys_init=e[0],Ye.arr_hsla_init=e[1]),(0<Ye.csys_init&&Ye.csys_init<5||9===Ye.csys_init)&&(7!==Ye.csys&&8!==Ye.csys||(e=ge(Be[Je])[1],e[0]===Ye.arr_hsla_init[0]&&e[1]===Ye.arr_hsla_init[1]&&e[2]===Ye.arr_hsla_init[2]&&e[3]===Ye.arr_hsla_init[3]&&(r=Ye.init_color,t=Ye.csys_init))),-1===t&&(e=ve(Be[Je]),t=e[0],r=e[1]),!1!==t&&(Be[Je]=r,$color_inputs_c[Je].value=r,Ye.csys=t)}},O=()=>{!0!==Br&&-1!==Je&&e(Je)},H=()=>{e(Je)},e=e=>{let r=$color_inputs_n[e].value;r=-1!==r.indexOf(":")?r.replace(/\:/g,"."):r,Se[e]=r,Le()},I=()=>{!0!==Br&&-1!==Je&&r(Je)},q=e=>{13===e.keyCode&&r(Je)},r=e=>{var r=$color_inputs_c[e].value.trim();We[e]=!1===g(r)?qe:r,Be[e]=r,$color_spans[e].style.background=We[e],Le()},Y=(e,r,t)=>{let a="",o=!1,n=null,d=0;for(o="insert-compactview"!==Ge?(a=Fe>Ie||!0===Qe?"hide":"color-wrapper",!1):(a=!0===Qe?"hide":"color-wrapper",!0),!0===Ur?(window.$color_wrappers=[],window.$color_spans=[],window.$color_inp_wrappers=[],window.$color_inputs_n=[],window.$color_inputs_c=[],window.$color_mode_switches=[],window.$color_wrapper_main=document.createElement("div"),$color_wrapper_main.id="color-wrapper-main",$color_wrapper_main.addEventListener("contextmenu",W,!1),$color_wrapper_main.addEventListener("mousedown",l,!1)):Cr.className=Ge+" hide",d=e;d<r;d++)$color_wrappers[d]=document.createElement("div"),$color_wrappers[d].wid=d,$color_wrappers[d].className=a,$color_wrappers[d].addEventListener("mousedown",i,!1),$color_wrappers[d].addEventListener("mouseup",s,!1),!0===o&&($color_wrappers[d].title=Se[d]===Be[d]?Se[d]:Se[d]+": "+Be[d]),$color_spans[d]=document.createElement("span"),$color_spans[d].addEventListener("click",M,!1),!0===t&&(We[d]=!1===g(Be[d])?qe:Be[d],$color_spans[d].style.background=We[d]),$color_inp_wrappers[d]=document.createElement("div"),$color_inputs_n[d]=document.createElement("input"),$color_inputs_n[d].wid=d,$color_inputs_n[d].addEventListener("focusin",N,!1),$color_inputs_n[d].addEventListener("focusout",O,!1),$color_inputs_n[d].addEventListener("keyup",H,!1),$color_inputs_n[d].value=Se[d],$color_inputs_c[d]=document.createElement("input"),$color_inputs_c[d].wid=d,$color_inputs_c[d].addEventListener("focusin",N,!1),$color_inputs_c[d].addEventListener("focusout",I,!1),$color_inputs_c[d].addEventListener("keyup",q,!1),$color_inputs_c[d].value=Be[d],$color_mode_switches[d]=document.createElement("p"),$color_mode_switches[d].addEventListener("click",T,!1),n=document.createElement("i"),n.addEventListener("click",v,!1),$color_inp_wrappers[d].appendChild($color_inputs_n[d]),$color_inp_wrappers[d].appendChild($color_inputs_c[d]),$color_inp_wrappers[d].appendChild($color_mode_switches[d]),$color_wrappers[d].appendChild(n),$color_wrappers[d].appendChild($color_spans[d]),$color_wrappers[d].appendChild($color_inp_wrappers[d]),$color_wrapper_main.appendChild($color_wrappers[d]);!0===Ur?(-1!==Je&&Je<Fe&&($color_inp_wrappers[Je].className="active"),J(),Cr.appendChild($color_wrapper_main)):Cr.className=Ge,!1===Qe&&G()},t=e=>{let r=0;for(Dr=e.currentTarget,Kr=Dr,Vr=Dr.wid,r;r<Fe;r++)$color_wrappers[r].addEventListener("mouseenter",z,!1);document.addEventListener("mouseup",S,!1),-1!==Je&&($color_inp_wrappers[Je].className=""),Dr.className="color-wrapper drag-element",$color_inp_wrappers[Vr].className="active",Je=Vr},z=e=>{jr=e.currentTarget.wid,b(jr,Vr),$color_inp_wrappers[Vr].className="",$color_inp_wrappers[jr].className="active",Dr.className="color-wrapper",Kr=e.currentTarget,Kr.className="color-wrapper drag-element",Dr=Kr,Vr=jr,Je=jr},S=()=>{let e=0;for(e;e<Fe;e++)$color_wrappers[e].removeEventListener("mouseenter",z,!1);document.removeEventListener("mouseup",S,!1),Dr.className="color-wrapper",Le()},B=()=>{$color_wrapper_main.style.minHeight=je-mr-Ue-4+"px"},W=e=>{e.preventDefault();const r=()=>{const p=-1!==Je?Je:br[0],m=g(Be[p]);!1!==m&&10!==m?C("Number of steps (2-100)?",!0,!1,{input:10},e=>{0<(e=parseInt(e))&&e<101&&(e=>{const r=[],t=[];let a=Be[p],o=!1,n=[],d=0,l=0,s,i=0,c=0;for(d=5<=m&&m<=8?(5===m||6===m?n=u(_(a)):7!==m&&8!==m||(n=_(a)),3===n.length?1/e:n[3]/e):(o=!0,2===m||4===m?(4===m&&(a=we(a,48)),a=a.slice(0,-2),h(a)/e):(3===m?a=we(a,36):9===m&&(a=f(a)),1/e)),i=e;0<=i;i--)l=parseFloat((d*i).toFixed(2)),0!==l&&1!==l&&(!0===o?t[c]=fe(a,l):(s=[n[0],n[1],n[2],l],5===m||6===m?t[c]=_e(ue(s),"rgb"):7!==m&&8!==m||(t[c]=_e(s,"hsl"))),r[c]=Se[p]+" "+l.toString(),c++);if(0===_r)be(r,t,Je+1,!1);else{for(be(r,t,Je,!1),i=0;i<c;i++)b(Je+i,Je+c);Le()}})(e)}):C("Not possible! Invalid color value!",!1,!1,!1,e=>{})},t=()=>{const d=ye(),l=d.length;l<2?C("Not possible! Select two colors at least!",!1,!1,!1,e=>{}):C("Sort selected ...",!0,["by Name","by Value","by HUE","Reverse"],!1,e=>{!1!==e&&(t=>{const e=[];let r=[],a=!0,o,n=0;if(0===t||1===t||3===t){for(n=0;n<l;n++)r[n]=[Se[d[n]],Be[d[n]],We[d[n]]];for(0===t||1===t?r.sort((e,r)=>e[t]===r[t]?0:e[t]<r[t]?-1:1):r.reverse(),n=0;n<l;n++)Se[d[n]]=r[n][0],Be[d[n]]=r[n][1],We[d[n]]=r[n][2]}else if(2===t){for(n=0;n<l;n++)o=g(Be[d[n]]),e[n]=1<=o&&o<=4?u(c(Be[d[n]],!1)):5===o||6===o?u(_(Be[d[n]])):7===o||8===o?_(Be[d[n]]):9===o?u(c(f(Be[d[n]]),!1)):[-1];if(0===e.length)a=!1;else for(r=e.map((e,r)=>({color:e,index:r})).sort((e,r)=>e.color[0]-r.color[0]).map(e=>[Se[d[e.index]],Be[d[e.index]],We[d[e.index]]]),n=0;n<l;n++)Se[d[n]]=r[n][0],Be[d[n]]=r[n][1],We[d[n]]=r[n][2]}!0===a&&(de(0),Le(),!0===Qe&&k())})(e)})},a=()=>{var e=ye();let r=0;for(Rr=[],Xr=[],Ar=e.length,r;r<Ar;r++)Rr[r]=Se[e[r]],Xr[r]=Be[e[r]]},o=()=>{let e=-1;e=-1!==Je?Je:0<yr?ye()[yr-1]:0,be(Rr,Xr,e,!0)},n=()=>{C("Special functions:",!0,["Sort by ...","Create Alpha-Steps","Create comple&shy;mentary Color","Randomize Selected"],!1,e=>{0===e?t():1===e?r():2===e?(()=>{var e=-1!==Je?Je:br[0],r=g(Be[e]),t=Se[e]+" complementary";let a=[],o="";!1!==r&&10!==r?(a=1<=r&&r<=4?u(c(Be[e],!1)):9===r?u(c(f(Be[e]),!1)):5===r||6===r?u(_(Be[e])):_(Be[e]),a[0]=180<a[0]?a[0]-180:a[0]+180,o=1<=r&&r<=4||9===r?he(_e(ue(a),"rgb")):5===r||6===r?_e(ue(a),"rgb"):_e(a,"hsl"),0===_r?be([t],[o],Je+1,!1):(be([t],[o],Je,!1),b(Je,Je+1),Le())):C("Not possible! Invalid color value!",!1,!1,!1,e=>{})})():3===e&&(()=>{var e=ye(),r=e.length;let t=0;for(t=0;t<r;t++)Se[e[t]]="Color "+(t+1),Be[e[t]]=_e([Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random())],"rgb"),We[e[t]]=Be[e[t]];Le(),de(0)})()})},d=()=>{document.removeEventListener("keyup",d,!1),document.removeEventListener("mouseup",d,!1),document.body.removeChild($context_ul)},l=()=>{$context_ul.style.top=e.clientY+Wr<=je?e.clientY+"px":je-Wr-4+"px",$context_ul.style.left=e.clientX+Fr>=Pe?Pe-Fr+"px":e.clientX+"px"},s=e.target===$color_wrapper_main;window.$context_ul=document.createElement("ul");let i=null;$context_ul.id="context-ul",i=document.createElement("li"),!(i.id="context-li-picker")==s&&!1===er?i.addEventListener("mouseup",()=>{-1!==Je?m(Be[Je]):0<yr&&m(Be[br[0]])},!1):i.className="context-li-disabled",$context_ul.appendChild(i),i=document.createElement("li"),!(i.id="context-li-add")===er?i.addEventListener("mouseup",()=>{be(!0,!0,Je,!1)},!1):i.className="context-li-disabled",$context_ul.appendChild(i),i=document.createElement("li"),!(i.id="context-li-duplicate")==s&&!1===er?i.addEventListener("mouseup",()=>{a(),o()},!1):i.className="context-li-disabled",$context_ul.appendChild(i),i=document.createElement("li"),!(i.id="context-li-delete")==s&&!1===er?i.addEventListener("mouseup",v,!1):i.className="context-li-disabled",$context_ul.appendChild(i),i=document.createElement("li"),i.id="context-li-select",!0===Qe&&0<_r&&!1===er||!1===Qe&&0<Fe&&!1===er?i.addEventListener("mouseup",()=>{let e=0;if(0<yr&&se(!1),!1===Qe)for(br=[...Array(Fe)].map((e,r)=>r+0),yr=Fe,e=0;e<Fe;e++)$color_inp_wrappers[e].className="selected";else for(br=ur,yr=_r,e=0;e<_r;e++)$color_inp_wrappers[ur[e]].className="selected";-1!==Je&&(br.splice(br.indexOf(Je),1),yr--,$color_inp_wrappers[Je].className="active")},!1):i.className="context-li-disabled",$context_ul.appendChild(i),i=document.createElement("li"),!(i.id="context-li-copy")==s&&!1===er?i.addEventListener("mouseup",()=>{a()},!1):i.className="context-li-disabled",$context_ul.appendChild(i),i=document.createElement("li"),!(i.id="context-li-cut")==s&&!1===er?i.addEventListener("mouseup",()=>{a(),v()},!1):i.className="context-li-disabled",$context_ul.appendChild(i),i=document.createElement("li"),i.id="context-li-paste",0<Ar&&!1===er?i.addEventListener("mouseup",o,!1):i.className="context-li-disabled",$context_ul.appendChild(i),i=document.createElement("li"),i.id="context-li-sort",i.className=!0===er?"context-li-sort-off":"context-li-sort-on",i.addEventListener("mouseup",()=>{0<yr&&se(!0),y(!1===er)},!1),$context_ul.appendChild(i),i=document.createElement("li"),!(i.id="context-li-convert")==s&&!1===er?i.addEventListener("mouseup",()=>{C("Convert to ...",!0,["HEX","RGB","HSL"],!1,e=>{var r;!1!==e&&(r=ye(),w(e,r))})},!1):i.className="context-li-disabled",$context_ul.appendChild(i),i=document.createElement("li"),!(i.id="context-li-special")==s&&!1===er?i.addEventListener("mouseup",n,!1):i.className="context-li-disabled",$context_ul.appendChild(i),document.addEventListener("mouseup",d,!1),document.addEventListener("keyup",d,!1),0===Wr?(document.body.appendChild($context_ul),Wr=$context_ul.clientHeight,Fr=$context_ul.clientWidth,l()):(l(),document.body.appendChild($context_ul)),document.activeElement.blur()},F=e=>{var r=3*sr,t=!1===Qe?Fe:_r;let a=0,o=0,n=0,d=0,l=0,s=0;if(window.removeEventListener("scroll",K,!1),!1===e?(o=r,d=(t-o)*lr):(a=t-r,o=t,n=a*lr,l=document.body.scrollHeight),!1===Qe)for(s=0;s<r;s++)$color_wrappers[ir+s].className="hide",$color_wrappers[a+s].className="color-wrapper";else for(s=0;s<r;s++)$color_wrappers[ur[ir+s]].className="hide",$color_wrappers[ur[a+s]].className="color-wrapper";ir=a,cr=o,Cr.style.padding=n+"px 0 "+d+"px 0",window.scrollTo(0,l),window.addEventListener("scroll",K,!1)},R=()=>{var e;0===lr&&("insert-compactview"!==Ge?(e=0===_r?0:ur[0],$color_wrappers[e].className="color-wrapper",lr=$color_wrappers[e].offsetHeight):($color_wrappers[0].classList.add("meassure-list-wrapper-height"),lr=$color_wrappers[0].offsetHeight,$color_wrappers[0].classList.remove("meassure-list-wrapper-height"))),sr=Math.ceil((je-mr)/lr),cr=3*sr},X=()=>{"insert-compactview"!==Ge&&Fe>Ie&&A()},A=()=>{let e=0;for(R(),e=0;e<cr;e++)$color_wrappers[e].className="color-wrapper";V(),D()},D=()=>{window.addEventListener("scroll",K,!1),dr=!0},K=()=>{V()},V=()=>{var e=window.scrollY,r=!0===Qe&&0<_r;let t=Math.floor(e/lr),a=0,o=0;if(t>=sr?(a=t+2*sr,t-=sr):(t=0,a=3*sr),!1==r?a>=Fe&&(a=Fe,t=Fe-3*sr):a>=_r&&(a=_r,t=_r-3*sr),e<=pr){var n=ir-t;if(!1==r)for(o=0;o<n;o++)$color_wrappers[t+o].className="color-wrapper",$color_wrappers[a+o].className="hide";else for(o=0;o<n;o++)$color_wrappers[ur[t+o]].className="color-wrapper",$color_wrappers[ur[a+o]].className="hide"}else{var d=t-ir;if(!1==r)for(o=0;o<d;o++)$color_wrappers[ir+o].className="hide",$color_wrappers[cr+o].className="color-wrapper";else for(o=0;o<d;o++)$color_wrappers[ur[ir+o]].className="hide",$color_wrappers[ur[cr+o]].className="color-wrapper"}pr=e,ir=t,cr=a,j(r)},j=e=>{Cr.style.padding=!1===e?ir*lr+"px 0 "+(Fe-cr)*lr+"px 0":ir*lr+"px 0 "+(_r-cr)*lr+"px 0"},P=()=>{window.removeEventListener("scroll",K,!1),dr=!1,Cr.style.padding=""},U=()=>{ir=Math.floor(window.scrollY/lr),cr=0,ir>=sr?(cr=ir+2*sr,ir-=sr):(ir=0,cr=3*sr);var e=!1===Qe?Fe:_r;cr>=e&&(cr=e,ir=e-3*sr)},G=()=>{qr.textContent=!1===Qe?Fe+" entries":_r+" / "+Fe+" entries"},J=()=>{var e=!1===Qe?Je+1:ur.indexOf(Je)+1;0!==e?(zr.textContent=e,Yr.className=""):Yr.className="hide"},Q=e=>{let r=0;if(-1===Je)r=0;else if(!0===dr){var t=0===_r?Je:ur.indexOf(Je);if(!1===e&&(t<sr||t>=ir+sr&&t<=cr-sr))return;r=lr*t}else{var a=window.scrollY,t=$color_wrappers[Je].offsetTop;if(!1===e&&a<=t&&t<=a+je&&!1===e)return;r=t}window.scrollTo(0,r)},Z=()=>{mr=Nr.offsetHeight,document.body.style.paddingTop=mr+"px",B()},$e=e=>{dh_id=e.currentTarget.d_id;const r=arr_dh[dh_id],t=r.$el_drag.getBoundingClientRect();r.start_top=parseInt(t.top),r.start_left=parseInt(t.left),r.start_x=e.pageX,r.start_y=e.pageY,r.dragged=!0,"column"===window.getComputedStyle(r.$el_drag_wrapper).flexDirection&&(r.$el_drag_wrapper.style.display="block",r.is_flex_centred=!0),r.$el_drag.style.margin=0,r.$el_drag.classList.add("drag"),r.$el_drag_wrapper.classList.add("mousehold"),document.addEventListener("mousemove",ee,!1),document.addEventListener("mouseup",re,!1),e.currentTarget.addEventListener("dblclick",ae,!1),ee(e)},ee=e=>{const r=arr_dh[dh_id];r.$el_drag.style.transform="translate("+(r.start_left+e.pageX-r.start_x)+"px ,"+(r.start_top+e.pageY-r.start_y)+"px)"},re=e=>{const r=arr_dh[dh_id];let t=r.start_left+e.pageX-r.start_x,a=r.start_top+e.pageY-r.start_y,o=!1;t>=Pe-100?(t=Pe-100,o=!0):t+r.$el_drag.offsetWidth<=100&&(t=100-r.$el_drag.offsetWidth,o=!0),a>=window.innerHeight-100?(a=window.innerHeight-100,o=!0):a<=0&&(a=0,o=!0),!0===o&&(r.$el_drag.style.transform="translate("+t+"px ,"+a+"px)"),document.removeEventListener("mousemove",ee,!1),document.removeEventListener("mouseup",re,!1),r.$el_drag_wrapper.classList.remove("mousehold"),!1!==r.custom_func_when_moved&&r.custom_func_when_moved()},te=e=>{const r=arr_dh[e];r.$el_drag.classList.remove("drag"),r.$el_drag.style.transform=null,r.$el_drag.style.margin=null,!(r.$el_drag.dragged=!1)===r.is_flex_centred&&(r.$el_drag_wrapper.style.display="flex"),!1!==r.custom_func_when_moved&&r.custom_func_when_moved()},ae=e=>{te(e.currentTarget.d_id),e.currentTarget.removeEventListener("dblclick",ae,!1)},Ee=()=>{let e,r=0;for(r=0;r<dh_len;r++)!0===arr_dh[r].dragged&&te(r),(e=arr_dh[r].$el_drag.getBoundingClientRect()).top>window.innerHeight-100?arr_dh[r].$el_drag.style.transform="translateY("+(window.innerHeight-100)+"px)":e.top<0&&(current_y=0,arr_dh[r].$el_drag.style.transform="translateY(0px)")},oe=()=>{window.scroll_end_timeout&&clearTimeout(window.scroll_end_timeout),window.scroll_end_timeout=setTimeout(()=>{nr=window.scrollY,!1===Ur&&(ke(),!0===rr&&get_picker_dimensions())},200)},ne=()=>{window.resize_timeout&&clearTimeout(window.resize_timeout),window.resize_timeout=setTimeout(()=>(()=>{Pe=window.innerWidth;var e=window.innerHeight,r=Nr.clientHeight;let t=0;if(0!==lr&&(sr=Math.ceil((e-mr)/lr)),r!==mr&&(mr=r,document.body.style.paddingTop=mr+"px"),"insert-compactview"===Ge)nr=window.scrollY,ke();else if(Fe>Ie&&(sr=Math.ceil((e-mr)/lr),e>je)){for(U(),t=ir;t<cr;t++)$color_wrappers[t].className="color-wrapper";Cr.style.padding=ir*lr+"px 0 "+(Fe-cr)*lr+"px 0"}o(),je=e,B()})(),20)},de=e=>{let r=0;if("insert-compactview"!==Ge)for(r=e;r<Fe;r++)$color_inputs_n[r].value=Se[r],$color_inputs_c[r].value=Be[r],$color_spans[r].style.background=We[r];else for(r=e;r<Fe;r++)$color_inputs_n[r].value=Se[r],$color_inputs_c[r].value=Be[r],$color_spans[r].style.background=We[r],$color_wrappers[r].title=Se[r]===Be[r]?Se[r]:Se[r]+": "+Be[r]},le=e=>{!0===e?document.body.classList.add("loading"):setTimeout(()=>document.body.classList.remove("loading"),150)},ke=()=>{He.postMessage({command:"store_settings",settings:{mode_current:Ge,c_cid:Je,filter_open:Qe,filter_val:Ze,picker_open:rr,picker_color:tr,picker_color_init:ar,scroll_pos:nr,cm_width:or}})},Le=()=>{He.postMessage({command:"store_colors",arr_n:Se,arr_c:Be,c_len:Fe})},se=e=>{let r=0;if(!0===e)for(r=0;r<yr;r++)$color_inp_wrappers[br[r]].className="";br=[],yr=0},ie=e=>{!0===e.ctrlKey&&19===e.which&&(!0===e.shiftKey?"no-palettes"!==Ge&&btn_save_click():He.postMessage({command:"save_active_doc"}))},ce=e=>{18!==e.keyCode?(!0===e.ctrlKey&&!1===wr&&($color_wrapper_main.classList.add("multi-select"),wr=!0),!0===e.shiftKey&&!1===gr&&($color_wrapper_main.classList.add("multi-select"),gr=!0),!0===wr&&"control"!==e.key.toLowerCase()&&(vr=!0),36===e.keyCode?(e.preventDefault(),!0===dr?F(!1):window.scrollTo(0,0)):35===e.keyCode&&(e.preventDefault(),!0===dr?F(!0):window.scrollTo(0,document.body.scrollHeight))):y(!0)},pe=e=>{18!==e.keyCode?(!(vr=!1)===wr&&($color_wrapper_main.classList.remove("multi-select"),wr=!1),!0===gr&&($color_wrapper_main.classList.remove("multi-select"),gr=!1)):y(!1)},me=()=>{window.scrollTo(0,0),!0===dr&&(P(),pr=0,ir=0,cr=3*sr),Se=[],Be=[],We=[],Fe=0,Je=-1,ur=[],_r=0,br=[],yr=0,$color_wrappers=[],$color_spans=[],$color_inp_wrappers=[],$color_inputs_n=[],$color_inputs_c=[],$color_wrapper_main.innerHTML="",G(),J()},xe=(e,r)=>{Se=e,Be=r,Fe=Se.length,Je>Fe-1&&(Je=-1)},Ce=(e,r,t)=>{De=e,Ke=r,Ve=t},Ne=(e,r)=>{if(!0===e)return;const t=e=>{document.documentElement.style.setProperty("--cm-max-width",e+"px")},a=e=>{d.start_x=e.pageX,d.direction=e.currentTarget===s?1:-1,d.distance=0,document.addEventListener("mousemove",o,!1),document.addEventListener("mouseup",n,!1),document.body.classList.add("resizing"),"insert-compactview"===Ge&&300<(0<_r?_r:Fe)&&(Pe>document.documentElement.scrollWidth&&document.body.classList.add("has-scrollbar"),document.body.classList.add("resizing-hide-colors"))},o=e=>{e=(d.start_x-e.pageX)*d.direction;or+e<=Pe&&200<or+e&&(t(or+e),d.distance=e),ne()},n=()=>{or+=d.distance,document.removeEventListener("mousemove",o,!1),document.removeEventListener("mouseup",n,!1),document.body.classList.remove("resizing"),"insert-compactview"===Ge&&(document.body.classList.remove("resizing-hide-colors"),document.body.classList.remove("has-scrollbar")),ke()},d={},l=document.createElement("div"),s=document.createElement("div"),i=document.createElement("div");l.id="resize-wrapper",s.className="resize-border left",i.className="resize-border right",s.addEventListener("mousedown",a,!1),i.addEventListener("mousedown",a,!1),l.appendChild(s),l.appendChild(i),document.body.appendChild(l),or=r<200?200:r,document.body.classList.add("set-max-width"),t(or)},Me=e=>{if(0<Object.entries(e).length){var r={background:"--vscode-sideBar-background",foreground:"--vscode-editor-foreground",buttonBackground:"--vscode-button-background",buttonForeground:"--vscode-button-foreground",buttonHoverBackground:"--vscode-button-hoverBackground",buttonBorder:"--vscode-input-border",inputBackground:"--vscode-input-background",inputForeground:"--vscode-input-foreground",inputBorder:"--vscode-dropdown-border",dropdownForeground:"--vscode-dropdown-foreground",dropdownBackground:"--vscode-dropdown-background",dropdownHoverBackground:"--vscode-list-hoverBackground",selectionBorder:"--cm-selection-border",popupBorder:"--cm-popup-border",overlayBackground:"--cm-overlay-background"};for(const t in e)document.documentElement.style.setProperty(r[t],e[t])}},Te=e=>{const r=()=>{je=window.innerHeight,Pe=window.innerWidth,je<1&&t<100?setTimeout(()=>{t++,r()},10):(Ge=e.settings.mode_current,Je=e.settings.c_cid,Qe=e.settings.filter_open,Ze=e.settings.filter_val,rr=e.settings.picker_open,Re=e.c_max,Xe=e.n_new,Ae=e.c_new,Ce(e.arr_p,e.p_len,e.p_cid),xe(e.arr_n,e.arr_c),Me(e.config.styles),Ne(e.config.fullWidth,e.settings.cm_width),n(),Y(0,Fe,!0),Cr.className=Ge,document.body.appendChild(Cr),Ue=qr.clientHeight,o(),0!==Fe?!0===Qe?(Qe=!1,""!==Ze&&(Ir.value=Ze),E(!1),"insert-compactview"!==Ge&&Fe>Ie&&R(),k()):(Z(),"insert-compactview"!==Ge&&Fe>Ie&&A()):Z(),B(),window.addEventListener("resize",ne,!1),document.addEventListener("keydown",ce,!1),document.addEventListener("keyup",pe,!1),document.addEventListener("keypress",ie,!1),-1!==e.settings.scroll_pos&&window.scrollTo(0,e.settings.scroll_pos),window.addEventListener("scroll",oe,!1),!0===rr&&a(e.settings.picker_color,e.settings.picker_color_init),He.postMessage({command:"color_manager_is_ready"}),le(!1),Ur=!1)};let t=0;r()},Oe=e=>{switch(!0===Pr&&dib_cancel(),e.command){case"init":Te(e);break;case"refresh":o=e,Ce(o.arr_p,o.p_len,o.p_cid),d(De[Ve]),!0===o.refresh_pm&&!0===fr&&pm_refresh(),!0===er&&(er=!1,$color_wrapper_main.classList.remove("sort-mode")),me(),xe(o.arr_n,o.arr_c),0<Fe&&(Y(0,Fe,!0),(!0===Qe?k:X)()),le(!1);break;case"palette_added_success":a=e,Ce(a.arr_p,a.p_len,a.p_cid),pm_refresh(),d(De[Ve]),!0===a.add_saveas&&("no-palettes"===Ge&&(Ge="edit",document.body.className=Ge),!0===Qe&&E(!1),me(),xe([Xe],[Ae]),Y(0,Fe,!0),X());break;case"palette_renamed_success":a=e,Ce(a.arr_p,a.p_len,a.p_cid),d(De[Ve]);break;case"palette_deleted_success":t=e,Ce(t.arr_p,t.p_len,t.p_cid),pm_refresh(),!1!==t.palette_changed&&(!0===Qe&&E(!1),me(),"no-palettes-left"===t.palette_changed?(d(""),Ge="no-palettes",document.body.className=Ge):!0===t.palette_changed&&(d(De[0]),"is-empty"!==t.arr_n&&(xe(t.arr_n,t.arr_c),Y(0,Fe,!0),X())));break;case"find_colors_in_selection":!0===fr&&pm_close(),t=(r=e).arr_add.length,0!==Ke?(!0===rr&&picker_close(),!0===er&&y(!1),C("Add "+t+" colors to current palette?",!0,!1,!1,e=>{!0===e&&be(r.arr_add,r.arr_add,Je,!0)})):C("Not possible! Create a palette!",!1,!1,!1,e=>{});break;case"open_picker":!0===fr&&pm_close(),m(e.picker_color)}var r,t,a,o},He=acquireVsCodeApi(),Ie=200,qe="linear-gradient(135deg, transparent 0%, transparent 47%, red 50%, transparent 53%, transparent 100%)",Ye={},ze=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--dib-min-width").slice(0,-2));let Se=[],Be=[],We=[],Fe=-1,Re=0,Xe="",Ae="",De=[],Ke=0,Ve=-1,je=0,Pe=0,Ue=0,Ge="",Je=-1,Qe=!1,Ze="",er=!1,rr=!1,tr="",ar="",or=0,nr=0,dr=!1,lr=0,sr=0,ir=0,cr=0,pr=-1,mr=0,ur=[],_r=0,hr=!1,fr=!1,wr=!1,gr=!1,vr=!1,br=[],yr=0,$r=-1,Er=!1,kr=null,Lr=null,xr=!1,Cr=null,Nr=null,Mr=null,Tr=null,Or=null,Hr=null,Ir=null,qr=null,Yr=null,zr=null,Sr=-1,Br=!1,Wr=0,Fr=0,Rr=[],Xr=[],Ar=0,Dr=null,Kr=null,Vr=0,jr=0,Pr=!1,Ur=!0;window.addEventListener("message",e=>Oe(e.data)),He.postMessage({command:"webview_is_loaded"}),kr=document.createElement("div"),kr.id="loading-overlay",document.body.appendChild(kr),le(!0)})();